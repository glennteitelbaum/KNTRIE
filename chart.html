<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>kntrie Benchmark</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
<style>
  body { margin:0; background:#0f0f1a; color:#ddd; font-family:system-ui,sans-serif; }
  .wrap { max-width:700px; margin:0 auto; padding:16px 12px; }
  h2 { margin:0 0 4px; font-size:18px; font-weight:700; text-align:center; }
  .sub { text-align:center; color:#777; font-size:12px; margin:0 0 12px; }
  .btns { display:flex; justify-content:center; gap:8px; margin-bottom:16px; }
  .btns button { padding:6px 16px; border-radius:6px; border:1px solid #444;
    background:#1a1a2e; color:#aaa; cursor:pointer; font-size:13px; font-weight:600; }
  .btns button.active { background:#3b82f6; color:#fff; }
  .chart-box { margin-bottom:24px; }
  .chart-box h3 { margin:0 0 6px; font-size:14px; font-weight:600; text-align:center; }
  canvas { background:#12122a; border-radius:8px; }
</style>
</head>
<body>
<div class="wrap">
  <h2>kntrie Benchmark</h2>
  <p class="sub">Log-log · Per-entry · Lower is better · Solid = i32, Dashed = u64</p>
  <div class="btns">
    <button class="active" onclick="show('random')">random</button>
    <button onclick="show('sequential')">sequential</button>
  </div>
  <div class="chart-box"><h3>Find (ns/entry)</h3><canvas id="c_find"></canvas></div>
  <div class="chart-box"><h3>Insert (ns/entry)</h3><canvas id="c_insert"></canvas></div>
  <div class="chart-box"><h3>Erase N/2 (ns/entry)</h3><canvas id="c_erase"></canvas></div>
  <div class="chart-box"><h3>Memory (B/entry)</h3><canvas id="c_mem"></canvas></div>
</div>
<script>
const RAW_DATA = [
  {pattern:"random",N:100,kntrie_int32_find:0.0008,kntrie_int32_insert:0.0089,kntrie_int32_erase:0.0037,kntrie_int32_mem:1544,kntrie_uint64_find:0.0008,kntrie_uint64_insert:0.0111,kntrie_uint64_erase:0.0039,kntrie_uint64_mem:2056,map_int32_find:0.0042,map_int32_insert:0.0112,map_int32_erase:0.0070,map_int32_mem:4800,map_uint64_find:0.0040,map_uint64_insert:0.0129,map_uint64_erase:0.0071,map_uint64_mem:4800,umap_int32_find:0.0013,umap_int32_insert:0.0051,umap_int32_erase:0.0019,umap_int32_mem:3224,umap_uint64_find:0.0014,umap_uint64_insert:0.0041,umap_uint64_erase:0.0023,umap_uint64_mem:3224},
  {pattern:"random",N:150,kntrie_int32_find:0.0014,kntrie_int32_insert:0.0129,kntrie_int32_erase:0.0042,kntrie_int32_mem:3080,kntrie_uint64_find:0.0012,kntrie_uint64_insert:0.0121,kntrie_uint64_erase:0.0045,kntrie_uint64_mem:4104,map_int32_find:0.0068,map_int32_insert:0.0175,map_int32_erase:0.0092,map_int32_mem:7200,map_uint64_find:0.0065,map_uint64_insert:0.0173,map_uint64_erase:0.0093,map_uint64_mem:7200,umap_int32_find:0.0022,umap_int32_insert:0.0065,umap_int32_erase:0.0025,umap_int32_mem:4856,umap_uint64_find:0.0019,umap_uint64_insert:0.0065,umap_uint64_erase:0.0026,umap_uint64_mem:4856},
  {pattern:"random",N:225,kntrie_int32_find:0.0019,kntrie_int32_insert:0.0162,kntrie_int32_erase:0.0055,kntrie_int32_mem:3080,kntrie_uint64_find:0.0019,kntrie_uint64_insert:0.0170,kntrie_uint64_erase:0.0054,kntrie_uint64_mem:4104,map_int32_find:0.0111,map_int32_insert:0.0240,map_int32_erase:0.0131,map_int32_mem:10800,map_uint64_find:0.0104,map_uint64_insert:0.0257,map_uint64_erase:0.0133,map_uint64_mem:10800,umap_int32_find:0.0037,umap_int32_insert:0.0098,umap_int32_erase:0.0040,umap_int32_mem:7216,umap_uint64_find:0.0033,umap_uint64_insert:0.0088,umap_uint64_erase:0.0040,umap_uint64_mem:7216},
  {pattern:"random",N:337,kntrie_int32_find:0.0033,kntrie_int32_insert:0.0315,kntrie_int32_erase:0.0087,kntrie_int32_mem:6152,kntrie_uint64_find:0.0037,kntrie_uint64_insert:0.0291,kntrie_uint64_erase:0.0089,kntrie_uint64_mem:8200,map_int32_find:0.0177,map_int32_insert:0.0395,map_int32_erase:0.0195,map_int32_mem:16176,map_uint64_find:0.0171,map_uint64_insert:0.0395,map_uint64_erase:0.0203,map_uint64_mem:16176,umap_int32_find:0.0047,umap_int32_insert:0.0129,umap_int32_erase:0.0051,umap_int32_mem:10784,umap_uint64_find:0.0044,umap_uint64_insert:0.0131,umap_uint64_erase:0.0054,umap_uint64_mem:10784},
  {pattern:"random",N:506,kntrie_int32_find:0.0049,kntrie_int32_insert:0.0414,kntrie_int32_erase:0.0107,kntrie_int32_mem:6152,kntrie_uint64_find:0.0046,kntrie_uint64_insert:0.0384,kntrie_uint64_erase:0.0113,kntrie_uint64_mem:8200,map_int32_find:0.0283,map_int32_insert:0.0599,map_int32_erase:0.0296,map_int32_mem:24288,map_uint64_find:0.0272,map_uint64_insert:0.0582,map_uint64_erase:0.0289,map_uint64_mem:24288,umap_int32_find:0.0064,umap_int32_insert:0.0181,umap_int32_erase:0.0075,umap_int32_mem:16472,umap_uint64_find:0.0063,umap_uint64_insert:0.0179,umap_uint64_erase:0.0077,umap_uint64_mem:16472},
  {pattern:"random",N:759,kntrie_int32_find:0.0087,kntrie_int32_insert:0.0557,kntrie_int32_erase:0.0199,kntrie_int32_mem:12296,kntrie_uint64_find:0.0082,kntrie_uint64_insert:0.0591,kntrie_uint64_erase:0.0205,kntrie_uint64_mem:16392,map_int32_find:0.0462,map_int32_insert:0.0906,map_int32_erase:0.0463,map_int32_mem:36432,map_uint64_find:0.0457,map_uint64_insert:0.0896,map_uint64_erase:0.0472,map_uint64_mem:36432,umap_int32_find:0.0103,umap_int32_insert:0.0261,umap_int32_erase:0.0115,umap_int32_mem:24304,umap_uint64_find:0.0101,umap_uint64_insert:0.0264,umap_uint64_erase:0.0118,umap_uint64_mem:24304},
  {pattern:"random",N:1139,kntrie_int32_find:0.0145,kntrie_int32_insert:0.0869,kntrie_int32_erase:0.0234,kntrie_int32_mem:24584,kntrie_uint64_find:0.0139,kntrie_uint64_insert:0.0938,kntrie_uint64_erase:0.0235,kntrie_uint64_mem:32776,map_int32_find:0.0784,map_int32_insert:0.1373,map_int32_erase:0.0687,map_int32_mem:54672,map_uint64_find:0.0773,map_uint64_insert:0.1293,map_uint64_erase:0.0688,map_uint64_mem:54672,umap_int32_find:0.0149,umap_int32_insert:0.0355,umap_int32_erase:0.0171,umap_int32_mem:36880,umap_uint64_find:0.0151,umap_uint64_insert:0.0357,umap_uint64_erase:0.0173,umap_uint64_mem:36880},
  {pattern:"random",N:1708,kntrie_int32_find:0.0216,kntrie_int32_insert:0.1237,kntrie_int32_erase:0.0400,kntrie_int32_mem:24584,kntrie_uint64_find:0.0209,kntrie_uint64_insert:0.1359,kntrie_uint64_erase:0.0398,kntrie_uint64_mem:32776,map_int32_find:0.1291,map_int32_insert:0.2177,map_int32_erase:0.1096,map_int32_mem:81984,map_uint64_find:0.1274,map_uint64_insert:0.2014,map_uint64_erase:0.1103,map_uint64_mem:81984,umap_int32_find:0.0256,umap_int32_insert:0.0539,umap_int32_erase:0.0271,umap_int32_mem:54920,umap_uint64_find:0.0247,umap_uint64_insert:0.0531,umap_uint64_erase:0.0273,umap_uint64_mem:54920},
  {pattern:"random",N:2562,kntrie_int32_find:0.0361,kntrie_int32_insert:0.2185,kntrie_int32_erase:0.0572,kntrie_int32_mem:49160,kntrie_uint64_find:0.0368,kntrie_uint64_insert:0.2249,kntrie_uint64_erase:0.0625,kntrie_uint64_mem:65544,map_int32_find:0.2117,map_int32_insert:0.3325,map_int32_erase:0.1757,map_int32_mem:122976,map_uint64_find:0.2077,map_uint64_insert:0.3173,map_uint64_erase:0.1710,map_uint64_mem:122976,umap_int32_find:0.0382,umap_int32_insert:0.0780,umap_int32_erase:0.0397,umap_int32_mem:83512,umap_uint64_find:0.0371,umap_uint64_insert:0.0786,umap_uint64_erase:0.0397,umap_uint64_mem:83512},
  {pattern:"random",N:3844,kntrie_int32_find:0.0534,kntrie_int32_insert:0.3179,kntrie_int32_erase:0.0883,kntrie_int32_mem:49160,kntrie_uint64_find:0.0553,kntrie_uint64_insert:0.3505,kntrie_uint64_erase:0.0937,kntrie_uint64_mem:65544,map_int32_find:0.3414,map_int32_insert:0.5307,map_int32_erase:0.2736,map_int32_mem:184512,map_uint64_find:0.3457,map_uint64_insert:0.4896,map_uint64_erase:0.2856,map_uint64_mem:184512,umap_int32_find:0.0594,umap_int32_insert:0.1165,umap_int32_erase:0.0625,umap_int32_mem:124472,umap_uint64_find:0.0604,umap_uint64_insert:0.1169,umap_uint64_erase:0.0640,umap_uint64_mem:124472},
  {pattern:"random",N:5766,kntrie_int32_find:0.0749,kntrie_int32_insert:0.6074,kntrie_int32_erase:0.3877,kntrie_int32_mem:100560,kntrie_uint64_find:0.0828,kntrie_uint64_insert:0.6716,kntrie_uint64_erase:0.4216,kntrie_uint64_mem:131600,map_int32_find:0.5642,map_int32_insert:0.8405,map_int32_erase:0.4408,map_int32_mem:276768,map_uint64_find:0.5549,map_uint64_insert:0.7703,map_uint64_erase:0.4401,map_uint64_mem:276768,umap_int32_find:0.0923,umap_int32_insert:0.1843,umap_int32_erase:0.0975,umap_int32_mem:186008,umap_uint64_find:0.0936,umap_uint64_insert:0.1880,umap_uint64_erase:0.0979,umap_uint64_mem:186008},
  {pattern:"random",N:8649,kntrie_int32_find:0.1543,kntrie_int32_insert:0.8212,kntrie_int32_erase:0.7038,kntrie_int32_mem:157968,kntrie_uint64_find:0.1537,kntrie_uint64_insert:0.8124,kntrie_uint64_erase:0.7541,kntrie_uint64_mem:214544,map_int32_find:0.9604,map_int32_insert:1.3532,map_int32_erase:0.7463,map_int32_mem:415152,map_uint64_find:0.9645,map_uint64_insert:1.2313,map_uint64_erase:0.7359,map_uint64_mem:415152,umap_int32_find:0.1456,umap_int32_insert:0.2912,umap_int32_erase:0.1514,umap_int32_mem:277840,umap_uint64_find:0.1434,umap_uint64_insert:0.2857,umap_uint64_erase:0.1542,umap_uint64_mem:277840},
  {pattern:"random",N:12974,kntrie_int32_find:0.2006,kntrie_int32_insert:1.2308,kntrie_int32_erase:0.8273,kntrie_int32_mem:207888,kntrie_uint64_find:0.2109,kntrie_uint64_insert:1.1400,kntrie_uint64_erase:0.9190,kntrie_uint64_mem:274960,map_int32_find:1.6023,map_int32_insert:2.1253,map_int32_erase:1.2040,map_int32_mem:622752,map_uint64_find:1.5465,map_uint64_insert:1.9560,map_uint64_erase:1.1553,map_uint64_mem:622752,umap_int32_find:0.2339,umap_int32_insert:0.4510,umap_int32_erase:0.2366,umap_int32_mem:415240,umap_uint64_find:0.2247,umap_uint64_insert:0.4252,umap_uint64_erase:0.2366,umap_uint64_mem:415240},
  {pattern:"random",N:19461,kntrie_int32_find:0.3413,kntrie_int32_insert:1.5890,kntrie_int32_erase:1.0125,kntrie_int32_mem:380688,kntrie_uint64_find:0.3632,kntrie_uint64_insert:1.5997,kntrie_uint64_erase:1.0987,kntrie_uint64_mem:503824,map_int32_find:2.6046,map_int32_insert:3.3139,map_int32_erase:1.8657,map_int32_mem:934128,map_uint64_find:2.5447,map_uint64_insert:3.0934,map_uint64_erase:1.8507,map_uint64_mem:934128,umap_int32_find:0.3353,umap_int32_insert:0.6366,umap_int32_erase:0.3461,umap_int32_mem:633088,umap_uint64_find:0.3323,umap_uint64_insert:0.6242,umap_uint64_erase:0.3485,umap_uint64_mem:633088},
  {pattern:"random",N:29192,kntrie_int32_find:0.5353,kntrie_int32_insert:2.4322,kntrie_int32_erase:1.3649,kntrie_int32_mem:444432,kntrie_uint64_find:0.5593,kntrie_uint64_insert:2.4424,kntrie_uint64_erase:1.4835,kntrie_uint64_mem:568336,map_int32_find:4.6395,map_int32_insert:5.4288,map_int32_erase:3.2175,map_int32_mem:1401216,map_uint64_find:4.4478,map_uint64_insert:5.0314,map_uint64_erase:3.0650,map_uint64_mem:1401216,umap_int32_find:0.5204,umap_int32_insert:0.9546,umap_int32_erase:0.5383,umap_int32_mem:946424,umap_uint64_find:0.5194,umap_uint64_insert:0.9699,umap_uint64_erase:0.5343,umap_uint64_mem:946424},
  {pattern:"random",N:43789,kntrie_int32_find:0.8858,kntrie_int32_insert:3.5523,kntrie_int32_erase:1.9676,kntrie_int32_mem:791568,kntrie_uint64_find:0.9483,kntrie_uint64_insert:3.6474,kntrie_uint64_erase:2.1460,kntrie_uint64_mem:1053712,map_int32_find:8.2082,map_int32_insert:8.8682,map_int32_erase:5.3975,map_int32_mem:2101872,map_uint64_find:7.8875,map_uint64_insert:8.2919,map_uint64_erase:5.2987,map_uint64_mem:2101872,umap_int32_find:0.8325,umap_int32_insert:1.5108,umap_int32_erase:0.8679,umap_int32_mem:1414784,umap_uint64_find:0.8171,umap_uint64_insert:1.4843,umap_uint64_erase:0.8882,umap_uint64_mem:1414784},
  {pattern:"random",N:65684,kntrie_int32_find:1.6612,kntrie_int32_insert:5.9624,kntrie_int32_erase:2.4502,kntrie_int32_mem:1163280,kntrie_uint64_find:1.8427,kntrie_uint64_insert:6.1033,kntrie_uint64_erase:2.7889,kntrie_uint64_mem:1573904,map_int32_find:14.4319,map_int32_insert:14.5510,map_int32_erase:8.9323,map_int32_mem:3152832,map_uint64_find:14.4478,map_uint64_insert:13.8398,map_uint64_erase:8.9613,map_uint64_mem:3152832,umap_int32_find:1.3946,umap_int32_insert:2.4445,umap_int32_erase:1.5607,umap_int32_mem:2114872,umap_uint64_find:1.3739,umap_uint64_insert:2.4678,umap_uint64_erase:1.5660,umap_uint64_mem:2114872},
  {pattern:"random",N:98523,kntrie_int32_find:2.4018,kntrie_int32_insert:8.5595,kntrie_int32_erase:3.8303,kntrie_int32_mem:1578000,map_int32_find:24.4154,map_int32_insert:25.1415,map_int32_erase:15.5868,map_int32_mem:4729104,umap_int32_find:2.2989,umap_int32_insert:4.2216,umap_int32_erase:2.6923,umap_int32_mem:3162416},
  {pattern:"random",N:98526,kntrie_uint64_find:3.0269,kntrie_uint64_insert:8.8798,kntrie_uint64_erase:4.3927,kntrie_uint64_mem:2102288,map_uint64_find:24.8441,map_uint64_insert:23.5187,map_uint64_erase:15.1795,map_uint64_mem:4729248,umap_uint64_find:2.2426,umap_uint64_insert:4.1621,umap_uint64_erase:2.7180,umap_uint64_mem:3162488},
  {pattern:"random",N:147785,kntrie_int32_find:5.3135,kntrie_int32_insert:14.8513,kntrie_int32_erase:5.4654,kntrie_int32_mem:3150864,map_int32_find:43.4437,map_int32_insert:44.2774,map_int32_erase:28.0765,map_int32_mem:7093680,umap_int32_find:3.6755,umap_int32_insert:7.1203,umap_int32_erase:4.4908,umap_int32_mem:4729184},
  {pattern:"random",N:147789,kntrie_uint64_find:7.1619,kntrie_uint64_insert:15.6693,kntrie_uint64_erase:6.5724,kntrie_uint64_mem:4183056,map_uint64_find:44.4085,map_uint64_insert:41.0218,map_uint64_erase:26.5455,map_uint64_mem:7093872,umap_uint64_find:3.6205,umap_uint64_insert:7.1157,umap_uint64_erase:4.4792,umap_uint64_mem:4729280},
  {pattern:"random",N:221675,kntrie_int32_find:8.0169,kntrie_int32_insert:21.7612,kntrie_int32_erase:9.3970,kntrie_int32_mem:3150864,map_int32_find:85.2333,map_int32_insert:76.5055,map_int32_erase:49.1901,map_int32_mem:10640400,umap_int32_find:5.7742,umap_int32_insert:12.0734,umap_int32_erase:8.1500,umap_int32_mem:7215376},
  {pattern:"random",N:221683,kntrie_uint64_find:10.5799,kntrie_uint64_insert:24.1893,kntrie_uint64_erase:11.4249,kntrie_uint64_mem:4199440,map_uint64_find:77.4434,map_uint64_insert:74.1245,map_uint64_erase:48.7072,map_uint64_mem:10640784,umap_uint64_find:5.6942,umap_uint64_insert:11.6814,umap_uint64_erase:7.5033,umap_uint64_mem:7215568},
  {pattern:"random",N:332509,kntrie_int32_find:17.8050,kntrie_int32_insert:37.8882,kntrie_int32_erase:15.9389,kntrie_int32_mem:6296592,map_int32_find:143.8913,map_int32_insert:129.9199,map_int32_erase:85.3923,map_int32_mem:15960432,umap_int32_find:9.5488,umap_int32_insert:20.1178,umap_int32_erase:12.8434,umap_int32_mem:10788704},
  {pattern:"random",N:332525,kntrie_uint64_find:23.6087,kntrie_uint64_insert:45.6768,kntrie_uint64_erase:20.3952,kntrie_uint64_mem:8393744,map_uint64_find:161.1506,map_uint64_insert:127.0708,map_uint64_erase:84.6768,map_uint64_mem:15961200,umap_uint64_find:9.6627,umap_uint64_insert:20.2576,umap_uint64_erase:13.5913,umap_uint64_mem:10789088},
  {pattern:"random",N:498753,kntrie_int32_find:28.5735,kntrie_int32_insert:67.1134,kntrie_int32_erase:27.0081,kntrie_int32_mem:6444048,map_int32_find:242.4881,map_int32_insert:222.2732,map_int32_erase:138.7113,map_int32_mem:23940144,umap_int32_find:15.5795,umap_int32_insert:31.6734,umap_int32_erase:20.0759,umap_int32_mem:16132000},
  {pattern:"random",N:498788,kntrie_uint64_find:37.5175,kntrie_uint64_insert:82.2034,kntrie_uint64_erase:36.3406,kntrie_uint64_mem:8524816,map_uint64_find:237.9665,map_uint64_insert:243.4647,map_uint64_erase:134.5810,map_uint64_mem:23941824,umap_uint64_find:15.2269,umap_uint64_insert:31.1297,umap_uint64_erase:20.0940,umap_uint64_mem:16132840},
  {pattern:"random",N:748117,kntrie_int32_find:57.8901,kntrie_int32_insert:110.9785,kntrie_int32_erase:48.8456,kntrie_int32_mem:12588048,map_int32_find:407.8010,map_int32_insert:364.3839,map_int32_erase:223.9971,map_int32_mem:35909616,umap_int32_find:24.4855,umap_int32_insert:49.2186,umap_int32_erase:30.6384,umap_int32_mem:24123200},
  {pattern:"random",N:748182,kntrie_uint64_find:72.2628,kntrie_uint64_insert:134.3291,kntrie_uint64_erase:61.0612,kntrie_uint64_mem:16782352,map_uint64_find:483.9273,map_uint64_insert:425.4752,map_uint64_erase:267.6404,map_uint64_mem:35912736,umap_uint64_find:24.7160,umap_uint64_insert:53.9693,umap_uint64_erase:32.0670,umap_uint64_mem:24124760},
  {pattern:"random",N:1122145,kntrie_int32_find:64.4654,kntrie_int32_insert:242.2159,kntrie_int32_erase:103.2034,kntrie_int32_mem:17446224,umap_int32_find:39.3286,umap_int32_insert:92.1363,umap_int32_erase:52.3912,umap_int32_mem:36074048},
  {pattern:"random",N:1122274,kntrie_uint64_find:82.6653,kntrie_uint64_insert:278.3245,kntrie_uint64_erase:128.9263,kntrie_uint64_mem:27146000,umap_uint64_find:39.4695,umap_uint64_insert:85.2297,umap_uint64_erase:50.3588,umap_uint64_mem:36077144},
  {pattern:"random",N:1683111,kntrie_int32_find:99.0968,kntrie_int32_insert:316.6809,kntrie_int32_erase:232.6342,kntrie_int32_mem:23942784,umap_int32_find:62.8641,umap_int32_insert:135.2348,umap_int32_erase:78.7645,umap_int32_mem:53945536},
  {pattern:"random",N:1683411,kntrie_uint64_find:138.0555,kntrie_uint64_insert:385.4208,kntrie_uint64_erase:319.4025,kntrie_uint64_mem:37514256,umap_uint64_find:64.2707,umap_uint64_insert:149.3417,umap_uint64_erase:87.2452,umap_uint64_mem:53952736},
  {pattern:"random",N:2524384,kntrie_int32_find:178.5664,kntrie_int32_insert:456.2181,kntrie_int32_erase:351.6244,kntrie_int32_mem:39793104,umap_int32_find:95.9475,umap_int32_insert:215.7317,umap_int32_erase:127.4534,umap_int32_mem:82315208},
  {pattern:"random",N:2525116,kntrie_uint64_find:264.5324,kntrie_uint64_insert:575.4167,kntrie_uint64_erase:488.1446,kntrie_uint64_mem:62881040,umap_uint64_find:99.9926,umap_uint64_insert:257.8436,umap_uint64_erase:146.0059,umap_uint64_mem:82332776},
  {pattern:"sequential",N:100,kntrie_int32_find:0.0008,kntrie_int32_insert:0.0091,kntrie_int32_erase:0.0027,kntrie_int32_mem:1544,kntrie_uint64_find:0.0007,kntrie_uint64_insert:0.0095,kntrie_uint64_erase:0.0032,kntrie_uint64_mem:2056,map_int32_find:0.0041,map_int32_insert:0.0115,map_int32_erase:0.0058,map_int32_mem:4800,map_uint64_find:0.0040,map_uint64_insert:0.0109,map_uint64_erase:0.0062,map_uint64_mem:4800,umap_int32_find:0.0003,umap_int32_insert:0.0023,umap_int32_erase:0.0009,umap_int32_mem:3224,umap_uint64_find:0.0003,umap_uint64_insert:0.0025,umap_uint64_erase:0.0011,umap_uint64_mem:3224},
  {pattern:"sequential",N:150,kntrie_int32_find:0.0013,kntrie_int32_insert:0.0129,kntrie_int32_erase:0.0045,kntrie_int32_mem:3080,kntrie_uint64_find:0.0013,kntrie_uint64_insert:0.0124,kntrie_uint64_erase:0.0049,kntrie_uint64_mem:4104,map_int32_find:0.0068,map_int32_insert:0.0168,map_int32_erase:0.0090,map_int32_mem:7200,map_uint64_find:0.0064,map_uint64_insert:0.0193,map_uint64_erase:0.0095,map_uint64_mem:7200,umap_int32_find:0.0005,umap_int32_insert:0.0044,umap_int32_erase:0.0014,umap_int32_mem:4856,umap_uint64_find:0.0005,umap_uint64_insert:0.0049,umap_uint64_erase:0.0018,umap_uint64_mem:4856},
  {pattern:"sequential",N:225,kntrie_int32_find:0.0019,kntrie_int32_insert:0.0165,kntrie_int32_erase:0.0054,kntrie_int32_mem:3080,kntrie_uint64_find:0.0019,kntrie_uint64_insert:0.0154,kntrie_uint64_erase:0.0053,kntrie_uint64_mem:4104,map_int32_find:0.0110,map_int32_insert:0.0258,map_int32_erase:0.0134,map_int32_mem:10800,map_uint64_find:0.0103,map_uint64_insert:0.0269,map_uint64_erase:0.0125,map_uint64_mem:10800,umap_int32_find:0.0008,umap_int32_insert:0.0062,umap_int32_erase:0.0017,umap_int32_mem:7216,umap_uint64_find:0.0008,umap_uint64_insert:0.0064,umap_uint64_erase:0.0019,umap_uint64_mem:7216},
  {pattern:"sequential",N:337,kntrie_int32_find:0.0032,kntrie_int32_insert:0.0233,kntrie_int32_erase:0.0089,kntrie_int32_mem:6152,kntrie_uint64_find:0.0032,kntrie_uint64_insert:0.0238,kntrie_uint64_erase:0.0091,kntrie_uint64_mem:8200,map_int32_find:0.0177,map_int32_insert:0.0414,map_int32_erase:0.0184,map_int32_mem:16176,map_uint64_find:0.0169,map_uint64_insert:0.0412,map_uint64_erase:0.0188,map_uint64_mem:16176,umap_int32_find:0.0012,umap_int32_insert:0.0088,umap_int32_erase:0.0022,umap_int32_mem:10784,umap_uint64_find:0.0012,umap_uint64_insert:0.0091,umap_uint64_erase:0.0023,umap_uint64_mem:10784},
  {pattern:"sequential",N:506,kntrie_int32_find:0.0051,kntrie_int32_insert:0.0383,kntrie_int32_erase:0.0119,kntrie_int32_mem:6152,kntrie_uint64_find:0.0047,kntrie_uint64_insert:0.0404,kntrie_uint64_erase:0.0120,kntrie_uint64_mem:8200,map_int32_find:0.0284,map_int32_insert:0.0622,map_int32_erase:0.0302,map_int32_mem:24288,map_uint64_find:0.0271,map_uint64_insert:0.0606,map_uint64_erase:0.0284,map_uint64_mem:24288,umap_int32_find:0.0018,umap_int32_insert:0.0132,umap_int32_erase:0.0031,umap_int32_mem:16472,umap_uint64_find:0.0018,umap_uint64_insert:0.0126,umap_uint64_erase:0.0034,umap_uint64_mem:16472},
  {pattern:"sequential",N:759,kntrie_int32_find:0.0088,kntrie_int32_insert:0.0515,kntrie_int32_erase:0.0202,kntrie_int32_mem:12296,kntrie_uint64_find:0.0084,kntrie_uint64_insert:0.0565,kntrie_uint64_erase:0.0205,kntrie_uint64_mem:16392,map_int32_find:0.0469,map_int32_insert:0.0947,map_int32_erase:0.0463,map_int32_mem:36432,map_uint64_find:0.0467,map_uint64_insert:0.0927,map_uint64_erase:0.0457,map_uint64_mem:36432,umap_int32_find:0.0026,umap_int32_insert:0.0184,umap_int32_erase:0.0048,umap_int32_mem:24304,umap_uint64_find:0.0027,umap_uint64_insert:0.0178,umap_uint64_erase:0.0053,umap_uint64_mem:24304},
  {pattern:"sequential",N:1139,kntrie_int32_find:0.0145,kntrie_int32_insert:0.0977,kntrie_int32_erase:0.0222,kntrie_int32_mem:24584,kntrie_uint64_find:0.0139,kntrie_uint64_insert:0.1065,kntrie_uint64_erase:0.0234,kntrie_uint64_mem:32776,map_int32_find:0.0777,map_int32_insert:0.1444,map_int32_erase:0.0702,map_int32_mem:54672,map_uint64_find:0.0772,map_uint64_insert:0.1369,map_uint64_erase:0.0681,map_uint64_mem:54672,umap_int32_find:0.0039,umap_int32_insert:0.0252,umap_int32_erase:0.0071,umap_int32_mem:36880,umap_uint64_find:0.0039,umap_uint64_insert:0.0245,umap_uint64_erase:0.0073,umap_uint64_mem:36880},
  {pattern:"sequential",N:1708,kntrie_int32_find:0.0219,kntrie_int32_insert:0.1157,kntrie_int32_erase:0.0424,kntrie_int32_mem:24584,kntrie_uint64_find:0.0210,kntrie_uint64_insert:0.1335,kntrie_uint64_erase:0.0410,kntrie_uint64_mem:32776,map_int32_find:0.1297,map_int32_insert:0.2239,map_int32_erase:0.1149,map_int32_mem:81984,map_uint64_find:0.1282,map_uint64_insert:0.2058,map_uint64_erase:0.1094,map_uint64_mem:81984,umap_int32_find:0.0059,umap_int32_insert:0.0360,umap_int32_erase:0.0112,umap_int32_mem:54920,umap_uint64_find:0.0059,umap_uint64_insert:0.0355,umap_uint64_erase:0.0116,umap_uint64_mem:54920},
  {pattern:"sequential",N:2562,kntrie_int32_find:0.0361,kntrie_int32_insert:0.2007,kntrie_int32_erase:0.0590,kntrie_int32_mem:49160,kntrie_uint64_find:0.0373,kntrie_uint64_insert:0.2137,kntrie_uint64_erase:0.0608,kntrie_uint64_mem:65544,map_int32_find:0.2084,map_int32_insert:0.3450,map_int32_erase:0.1778,map_int32_mem:122976,map_uint64_find:0.2102,map_uint64_insert:0.3254,map_uint64_erase:0.1718,map_uint64_mem:122976,umap_int32_find:0.0089,umap_int32_insert:0.0518,umap_int32_erase:0.0179,umap_int32_mem:83512,umap_uint64_find:0.0088,umap_uint64_insert:0.0504,umap_uint64_erase:0.0184,umap_uint64_mem:83512},
  {pattern:"sequential",N:3844,kntrie_int32_find:0.0553,kntrie_int32_insert:0.3138,kntrie_int32_erase:0.0898,kntrie_int32_mem:49160,kntrie_uint64_find:0.0556,kntrie_uint64_insert:0.3320,kntrie_uint64_erase:0.0906,kntrie_uint64_mem:65544,map_int32_find:0.3542,map_int32_insert:0.5387,map_int32_erase:0.2911,map_int32_mem:184512,map_uint64_find:0.3435,map_uint64_insert:0.4969,map_uint64_erase:0.2773,map_uint64_mem:184512,umap_int32_find:0.0133,umap_int32_insert:0.0781,umap_int32_erase:0.0282,umap_int32_mem:124472,umap_uint64_find:0.0133,umap_uint64_insert:0.0746,umap_uint64_erase:0.0291,umap_uint64_mem:124472},
  {pattern:"sequential",N:5766,kntrie_int32_find:0.0924,kntrie_int32_insert:0.5039,kntrie_int32_erase:0.1706,kntrie_int32_mem:69888,kntrie_uint64_find:0.2211,kntrie_uint64_insert:0.6184,kntrie_uint64_erase:0.1862,kntrie_uint64_mem:70272,map_int32_find:0.5842,map_int32_insert:0.8904,map_int32_erase:0.4559,map_int32_mem:276768,map_uint64_find:0.5735,map_uint64_insert:0.7931,map_uint64_erase:0.4486,map_uint64_mem:276768,umap_int32_find:0.0201,umap_int32_insert:0.1089,umap_int32_erase:0.0450,umap_int32_mem:186008,umap_uint64_find:0.0202,umap_uint64_insert:0.1143,umap_uint64_erase:0.0436,umap_uint64_mem:186008},
  {pattern:"sequential",N:8649,kntrie_int32_find:0.1367,kntrie_int32_insert:0.6394,kntrie_int32_erase:0.2605,kntrie_int32_mem:104464,kntrie_uint64_find:0.3370,kntrie_uint64_insert:0.6872,kntrie_uint64_erase:0.2809,kntrie_uint64_mem:104736,map_int32_find:0.9737,map_int32_insert:1.3636,map_int32_erase:0.7495,map_int32_mem:415152,map_uint64_find:0.9598,map_uint64_insert:1.2484,map_uint64_erase:0.7218,map_uint64_mem:415152,umap_int32_find:0.0303,umap_int32_insert:0.1572,umap_int32_erase:0.0679,umap_int32_mem:277840,umap_uint64_find:0.0303,umap_uint64_insert:0.1656,umap_uint64_erase:0.0686,umap_uint64_mem:277840},
  {pattern:"sequential",N:12974,kntrie_int32_find:0.2073,kntrie_int32_insert:0.9146,kntrie_int32_erase:0.3927,kntrie_int32_mem:156736,kntrie_uint64_find:0.5025,kntrie_uint64_insert:0.9439,kntrie_uint64_erase:0.4376,kntrie_uint64_mem:156976,map_int32_find:1.6096,map_int32_insert:2.1307,map_int32_erase:1.1909,map_int32_mem:622752,map_uint64_find:1.5753,map_uint64_insert:1.9677,map_uint64_erase:1.1626,map_uint64_mem:622752,umap_int32_find:0.0464,umap_int32_insert:0.2367,umap_int32_erase:0.1051,umap_int32_mem:415240,umap_uint64_find:0.0448,umap_uint64_insert:0.2436,umap_uint64_erase:0.1031,umap_uint64_mem:415240},
  {pattern:"sequential",N:19461,kntrie_int32_find:0.3169,kntrie_int32_insert:1.2115,kntrie_int32_erase:0.6115,kntrie_int32_mem:235808,kntrie_uint64_find:0.7631,kntrie_uint64_insert:1.2672,kntrie_uint64_erase:0.6560,kntrie_uint64_mem:236336,map_int32_find:2.6691,map_int32_insert:3.3845,map_int32_erase:1.8852,map_int32_mem:934128,map_uint64_find:2.6179,map_uint64_insert:3.1456,map_uint64_erase:1.8722,map_uint64_mem:934128,umap_int32_find:0.0674,umap_int32_insert:0.3688,umap_int32_erase:0.1617,umap_int32_mem:633088,umap_uint64_find:0.0677,umap_uint64_insert:0.3621,umap_uint64_erase:0.1595,umap_uint64_mem:633088},
  {pattern:"sequential",N:29192,kntrie_int32_find:0.5086,kntrie_int32_insert:1.7452,kntrie_int32_erase:0.9522,kntrie_int32_mem:353696,kntrie_uint64_find:1.1674,kntrie_uint64_insert:1.9078,kntrie_uint64_erase:1.0204,kntrie_uint64_mem:353696,map_int32_find:4.8794,map_int32_insert:5.4252,map_int32_erase:3.2660,map_int32_mem:1401216,map_uint64_find:4.6576,map_uint64_insert:5.0501,map_uint64_erase:3.0860,map_uint64_mem:1401216,umap_int32_find:0.1107,umap_int32_insert:0.5441,umap_int32_erase:0.2519,umap_int32_mem:946424,umap_uint64_find:0.1098,umap_uint64_insert:0.5341,umap_uint64_erase:0.2613,umap_uint64_mem:946424},
  {pattern:"sequential",N:43789,kntrie_int32_find:0.7712,kntrie_int32_insert:2.5087,kntrie_int32_erase:1.4236,kntrie_int32_mem:530304,kntrie_uint64_find:1.7937,kntrie_uint64_insert:2.6692,kntrie_uint64_erase:1.5563,kntrie_uint64_mem:531344,map_int32_find:8.5130,map_int32_insert:8.9613,map_int32_erase:5.3516,map_int32_mem:2101872,map_uint64_find:8.2404,map_uint64_insert:8.3797,map_uint64_erase:5.2649,map_uint64_mem:2101872,umap_int32_find:0.2003,umap_int32_insert:0.7844,umap_int32_erase:0.4575,umap_int32_mem:1414784,umap_uint64_find:0.1876,umap_uint64_insert:0.7709,umap_uint64_erase:0.4571,umap_uint64_mem:1414784},
  {pattern:"sequential",N:65684,kntrie_int32_find:1.2011,kntrie_int32_insert:4.3239,kntrie_int32_erase:2.4104,kntrie_int32_mem:796312,kntrie_uint64_find:2.7668,kntrie_uint64_insert:4.5890,kntrie_uint64_erase:2.7328,kntrie_uint64_mem:796584,map_int32_find:14.6224,map_int32_insert:14.6900,map_int32_erase:9.0982,map_int32_mem:3152832,map_uint64_find:14.6382,map_uint64_insert:14.0626,map_uint64_erase:9.1114,map_uint64_mem:3152832,umap_int32_find:0.3871,umap_int32_insert:1.1926,umap_int32_erase:0.9010,umap_int32_mem:2114872,umap_uint64_find:0.4054,umap_uint64_insert:1.1693,umap_uint64_erase:0.9158,umap_uint64_mem:2114872},
  {pattern:"sequential",N:98526,kntrie_int32_find:1.9086,kntrie_int32_insert:6.7319,kntrie_int32_erase:3.9598,kntrie_int32_mem:1192608,kntrie_uint64_find:4.3869,kntrie_uint64_insert:7.2160,kntrie_uint64_erase:4.4476,kntrie_uint64_mem:1192880,map_int32_find:26.2063,map_int32_insert:25.1156,map_int32_erase:15.3604,map_int32_mem:4729248,map_uint64_find:25.8185,map_uint64_insert:24.4610,map_uint64_erase:15.8599,map_uint64_mem:4729248,umap_int32_find:0.7247,umap_int32_insert:2.0101,umap_int32_erase:1.6205,umap_int32_mem:3162488,umap_uint64_find:0.7747,umap_uint64_insert:1.9547,umap_uint64_erase:1.8878,umap_uint64_mem:3162488},
  {pattern:"sequential",N:147789,kntrie_int32_find:2.9370,kntrie_int32_insert:10.3426,kntrie_int32_erase:5.8743,kntrie_int32_mem:1789648,kntrie_uint64_find:6.6001,kntrie_uint64_insert:10.8306,kntrie_uint64_erase:6.6208,kntrie_uint64_mem:1789920,map_int32_find:45.7562,map_int32_insert:43.5214,map_int32_erase:26.9051,map_int32_mem:7093872,map_uint64_find:47.2454,map_uint64_insert:41.0568,map_uint64_erase:27.0557,map_uint64_mem:7093872,umap_int32_find:1.2285,umap_int32_insert:3.3494,umap_int32_erase:2.7292,umap_int32_mem:4729280,umap_uint64_find:1.4345,umap_uint64_insert:3.3862,umap_uint64_erase:2.7845,umap_uint64_mem:4729280},
  {pattern:"sequential",N:221683,kntrie_int32_find:4.9337,kntrie_int32_insert:16.0617,kntrie_int32_erase:9.1826,kntrie_int32_mem:2684192,kntrie_uint64_find:10.5588,kntrie_uint64_insert:16.8127,kntrie_uint64_erase:10.1904,kntrie_uint64_mem:2684384,map_int32_find:80.5689,map_int32_insert:72.5904,map_int32_erase:47.0536,map_int32_mem:10640784,map_uint64_find:79.4207,map_uint64_insert:70.0397,map_uint64_erase:47.9077,map_uint64_mem:10640784,umap_int32_find:1.9161,umap_int32_insert:5.6398,umap_int32_erase:4.6677,umap_int32_mem:7215568,umap_uint64_find:2.1118,umap_uint64_insert:5.5068,umap_uint64_erase:4.5571,umap_uint64_mem:7215568},
  {pattern:"sequential",N:332525,kntrie_int32_find:8.3108,kntrie_int32_insert:24.3498,kntrie_int32_erase:15.1341,kntrie_int32_mem:4026176,kntrie_uint64_find:17.1521,kntrie_uint64_insert:25.6210,kntrie_uint64_erase:16.7579,kntrie_uint64_mem:4026368,map_int32_find:145.9936,map_int32_insert:127.6042,map_int32_erase:82.4784,map_int32_mem:15961200,map_uint64_find:144.2649,map_uint64_insert:121.5413,map_uint64_erase:80.8166,map_uint64_mem:15961200,umap_int32_find:3.2588,umap_int32_insert:9.5886,umap_int32_erase:7.6355,umap_int32_mem:10789088,umap_uint64_find:3.4403,umap_uint64_insert:9.3886,umap_uint64_erase:7.5085,umap_uint64_mem:10789088},
  {pattern:"sequential",N:498788,kntrie_int32_find:13.6731,kntrie_int32_insert:38.7760,kntrie_int32_erase:26.2945,kntrie_int32_mem:6040320,kntrie_uint64_find:28.1521,kntrie_uint64_insert:40.7889,kntrie_uint64_erase:29.1758,kntrie_uint64_mem:6040512,map_int32_find:230.2569,map_int32_insert:213.0638,map_int32_erase:133.5864,map_int32_mem:23941824,map_uint64_find:229.4472,map_uint64_insert:208.4683,map_uint64_erase:135.4207,map_uint64_mem:23941824,umap_int32_find:5.1730,umap_int32_insert:14.7635,umap_int32_erase:12.0080,umap_int32_mem:16132840,umap_uint64_find:5.7052,umap_uint64_insert:15.2030,umap_uint64_erase:12.2493,umap_uint64_mem:16132840},
  {pattern:"sequential",N:748182,kntrie_int32_find:22.9394,kntrie_int32_insert:63.1797,kntrie_int32_erase:46.9527,kntrie_int32_mem:9060464,kntrie_uint64_find:46.7633,kntrie_uint64_insert:70.0264,kntrie_uint64_erase:51.9774,kntrie_uint64_mem:9060720,map_int32_find:449.4855,map_int32_insert:370.1014,map_int32_erase:237.6079,map_int32_mem:35912736,map_uint64_find:431.4453,map_uint64_insert:365.7032,map_uint64_erase:239.3584,map_uint64_mem:35912736,umap_int32_find:8.7315,umap_int32_insert:20.5199,umap_int32_erase:19.4189,umap_int32_mem:24124760,umap_uint64_find:9.3508,umap_uint64_insert:22.4299,umap_uint64_erase:19.1328,umap_uint64_mem:24124760},
  {pattern:"sequential",N:1122274,kntrie_int32_find:39.3883,kntrie_int32_insert:106.5981,kntrie_int32_erase:83.3662,kntrie_int32_mem:13590048,kntrie_uint64_find:72.0147,kntrie_uint64_insert:111.9952,kntrie_uint64_erase:85.9789,kntrie_uint64_mem:13590160,umap_int32_find:17.7526,umap_int32_insert:39.0728,umap_int32_erase:30.0805,umap_int32_mem:36077144,umap_uint64_find:18.2495,umap_uint64_insert:39.3635,umap_uint64_erase:29.8762,umap_uint64_mem:36077144},
  {pattern:"sequential",N:1683411,kntrie_int32_find:64.1831,kntrie_int32_insert:183.1219,kntrie_int32_erase:140.2891,kntrie_int32_mem:20385296,kntrie_uint64_find:115.1459,kntrie_uint64_insert:186.3207,kntrie_uint64_erase:143.1049,kntrie_uint64_mem:20385680,umap_int32_find:30.8833,umap_int32_insert:70.9266,umap_int32_erase:55.9101,umap_int32_mem:53952736,umap_uint64_find:29.2889,umap_uint64_insert:65.3010,umap_uint64_erase:47.2041,umap_uint64_mem:53952736},
  {pattern:"sequential",N:2525116,kntrie_int32_find:104.8507,kntrie_int32_insert:297.0593,kntrie_int32_erase:226.1937,kntrie_int32_mem:30577904,kntrie_uint64_find:205.7923,kntrie_uint64_insert:320.6383,kntrie_uint64_erase:241.9796,kntrie_uint64_mem:30578176,umap_int32_find:46.4147,umap_int32_insert:105.2148,umap_int32_erase:77.1886,umap_int32_mem:82332776,umap_uint64_find:48.4342,umap_uint64_insert:113.7539,umap_uint64_erase:78.0657,umap_uint64_mem:82332776},
];


const LINES = [
  { key: "kntrie_int32", color: "#3b82f6", dash: [], width: 2.5, label: "kntrie i32" },
  { key: "kntrie_uint64", color: "#93c5fd", dash: [6,3], width: 1.5, label: "kntrie u64" },
  { key: "map_int32", color: "#ef4444", dash: [], width: 2.5, label: "map i32" },
  { key: "map_uint64", color: "#fca5a5", dash: [6,3], width: 1.5, label: "map u64" },
  { key: "umap_int32", color: "#22c55e", dash: [], width: 2.5, label: "umap i32" },
  { key: "umap_uint64", color: "#86efac", dash: [6,3], width: 1.5, label: "umap u64" },
];

const MEM_LINES = [
  ...LINES,
  { key: "raw_int32", color: "#888", dash: [], width: 1, label: "raw i32" },
  { key: "raw_uint64", color: "#555", dash: [3,3], width: 1, label: "raw u64" },
];

const METRICS = [
  { id: "find", suffix: "find", convert: (ms, n) => (ms * 1e6) / n },
  { id: "insert", suffix: "insert", convert: (ms, n) => (ms * 1e6) / n },
  { id: "erase", suffix: "erase", convert: (ms, n) => (ms * 1e6) / (n / 2) },
  { id: "mem", suffix: "mem", convert: (b, n) => b / n },
];

function buildData(pattern, metric) {
  const lines = metric.id === "mem" ? MEM_LINES : LINES;
  return RAW_DATA
    .filter(r => r.pattern === pattern)
    .map(r => {
      const pt = { N: r.N };
      for (const l of lines) {
        if (l.key === "raw_int32") { pt[l.key] = 12; continue; }
        if (l.key === "raw_uint64") { pt[l.key] = 16; continue; }
        const raw = r[l.key + "_" + metric.suffix];
        if (raw != null) pt[l.key] = metric.convert(raw, r.N);
      }
      return pt;
    });
}

const charts = {};

function makeChart(canvasId, metric) {
  const ctx = document.getElementById(canvasId).getContext("2d");
  const lines = metric.id === "mem" ? MEM_LINES : LINES;
  const data = buildData("random", metric);

  charts[canvasId] = new Chart(ctx, {
    type: "line",
    data: {
      labels: data.map(d => d.N),
      datasets: lines.map(l => ({
        label: l.label,
        data: data.map(d => d[l.key] ?? null),
        borderColor: l.color,
        backgroundColor: l.color + "33",
        borderWidth: l.width,
        borderDash: l.dash,
        pointRadius: 0,
        pointHitRadius: 8,
        tension: 0.2,
        spanGaps: true,
      })),
    },
    options: {
      responsive: true,
      interaction: { mode: "index", intersect: false },
      plugins: {
        legend: { display: true, labels: { color: "#bbb", font: { size: 11 }, boxWidth: 20, padding: 10 } },
        tooltip: {
          backgroundColor: "#1a1a2e",
          borderColor: "#444",
          borderWidth: 1,
          titleColor: "#aaa",
          bodyColor: "#ddd",
          callbacks: {
            title: (items) => {
              const v = items[0].parsed.x;
              if (v >= 1e6) return "N = " + (v/1e6).toFixed(1) + "M";
              if (v >= 1e3) return "N = " + (v/1e3).toFixed(1) + "K";
              return "N = " + v;
            },
            label: (item) => {
              const v = item.parsed.y;
              if (v == null) return null;
              const s = v < 0.1 ? v.toFixed(3) : v < 10 ? v.toFixed(2) : v < 1000 ? v.toFixed(1) : v.toFixed(0);
              return " " + item.dataset.label + ": " + s;
            },
          },
        },
      },
      scales: {
        x: {
          type: "logarithmic",
          title: { display: false },
          ticks: { color: "#888", font: { size: 11 },
            callback: (v) => v >= 1e6 ? (v/1e6)+"M" : v >= 1e3 ? (v/1e3)+"K" : v },
          grid: { color: "#2a2a3e" },
        },
        y: {
          type: "logarithmic",
          ticks: { color: "#888", font: { size: 10 },
            callback: (v) => v < 0.1 ? v.toFixed(2) : v < 10 ? v.toFixed(1) : v >= 1000 ? v.toFixed(0) : v.toFixed(1) },
          grid: { color: "#2a2a3e" },
        },
      },
    },
  });
  charts[canvasId]._metric = metric;
}

METRICS.forEach(m => makeChart("c_" + m.id, m));

function show(pattern) {
  document.querySelectorAll(".btns button").forEach(b => b.classList.remove("active"));
  event.target.classList.add("active");
  for (const [id, chart] of Object.entries(charts)) {
    const m = chart._metric;
    const lines = m.id === "mem" ? MEM_LINES : LINES;
    const data = buildData(pattern, m);
    chart.data.labels = data.map(d => d.N);
    lines.forEach((l, i) => {
      chart.data.datasets[i].data = data.map(d => d[l.key] ?? null);
    });
    chart.update("none");
  }
}
</script>
</body>
</html>
