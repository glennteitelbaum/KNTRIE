<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>kntrie Benchmark</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
<style>
  body { margin:0; background:#0f0f1a; color:#ddd; font-family:system-ui,sans-serif; }
  .wrap { max-width:700px; margin:0 auto; padding:16px 12px; }
  h2 { margin:0 0 4px; font-size:18px; font-weight:700; text-align:center; }
  .sub { text-align:center; color:#777; font-size:12px; margin:0 0 12px; }
  .btns { display:flex; justify-content:center; gap:8px; margin-bottom:16px; }
  .btns button { padding:6px 16px; border-radius:6px; border:1px solid #444;
    background:#1a1a2e; color:#aaa; cursor:pointer; font-size:13px; font-weight:600; }
  .btns button.active { background:#3b82f6; color:#fff; }
  .chart-box { margin-bottom:24px; }
  .chart-box h3 { margin:0 0 6px; font-size:14px; font-weight:600; text-align:center; }
  canvas { background:#12122a; border-radius:8px; }
</style>
</head>
<body>
<div class="wrap">
  <h2>kntrie Benchmark</h2>
  <p class="sub">Log-log · Per-entry · Lower is better · Solid = i32, Dashed = u64</p>
  <div class="btns">
    <button class="active" onclick="show('random')">random</button>
    <button onclick="show('sequential')">sequential</button>
  </div>
  <div class="chart-box"><h3>Find (ns/entry)</h3><canvas id="c_find"></canvas></div>
  <div class="chart-box"><h3>Insert (ns/entry)</h3><canvas id="c_insert"></canvas></div>
  <div class="chart-box"><h3>Erase N/2 (ns/entry)</h3><canvas id="c_erase"></canvas></div>
  <div class="chart-box"><h3>Memory (B/entry)</h3><canvas id="c_mem"></canvas></div>
</div>
<script>
const RAW_DATA = [
  {pattern:"random",N:100,kntrie_int32_find:0.0006,kntrie_int32_insert:0.0060,kntrie_int32_erase:0.0026,kntrie_int32_mem:1544,kntrie_uint64_find:0.0006,kntrie_uint64_insert:0.0054,kntrie_uint64_erase:0.0038,kntrie_uint64_mem:2056,map_int32_find:0.0014,map_int32_insert:0.0080,map_int32_erase:0.0054,map_int32_mem:4800,map_uint64_find:0.0013,map_uint64_insert:0.0087,map_uint64_erase:0.0060,map_uint64_mem:4800,umap_int32_find:0.0011,umap_int32_insert:0.0021,umap_int32_erase:0.0017,umap_int32_mem:3224,umap_uint64_find:0.0012,umap_uint64_insert:0.0028,umap_uint64_erase:0.0022,umap_uint64_mem:3224},
  {pattern:"random",N:150,kntrie_int32_find:0.0011,kntrie_int32_insert:0.0098,kntrie_int32_erase:0.0041,kntrie_int32_mem:3080,kntrie_uint64_find:0.0011,kntrie_uint64_insert:0.0098,kntrie_uint64_erase:0.0051,kntrie_uint64_mem:4104,map_int32_find:0.0025,map_int32_insert:0.0135,map_int32_erase:0.0082,map_int32_mem:7200,map_uint64_find:0.0023,map_uint64_insert:0.0126,map_uint64_erase:0.0093,map_uint64_mem:7200,umap_int32_find:0.0019,umap_int32_insert:0.0068,umap_int32_erase:0.0030,umap_int32_mem:4856,umap_uint64_find:0.0017,umap_uint64_insert:0.0056,umap_uint64_erase:0.0031,umap_uint64_mem:4856},
  {pattern:"random",N:225,kntrie_int32_find:0.0017,kntrie_int32_insert:0.0127,kntrie_int32_erase:0.0052,kntrie_int32_mem:3080,kntrie_uint64_find:0.0015,kntrie_uint64_insert:0.0127,kntrie_uint64_erase:0.0055,kntrie_uint64_mem:4104,map_int32_find:0.0039,map_int32_insert:0.0212,map_int32_erase:0.0125,map_int32_mem:10800,map_uint64_find:0.0035,map_uint64_insert:0.0178,map_uint64_erase:0.0101,map_uint64_mem:10800,umap_int32_find:0.0032,umap_int32_insert:0.0092,umap_int32_erase:0.0040,umap_int32_mem:7216,umap_uint64_find:0.0028,umap_uint64_insert:0.0070,umap_uint64_erase:0.0032,umap_uint64_mem:7216},
  {pattern:"random",N:337,kntrie_int32_find:0.0027,kntrie_int32_insert:0.0192,kntrie_int32_erase:0.0070,kntrie_int32_mem:6152,kntrie_uint64_find:0.0027,kntrie_uint64_insert:0.0200,kntrie_uint64_erase:0.0091,kntrie_uint64_mem:8200,map_int32_find:0.0063,map_int32_insert:0.0350,map_int32_erase:0.0159,map_int32_mem:16176,map_uint64_find:0.0057,map_uint64_insert:0.0279,map_uint64_erase:0.0168,map_uint64_mem:16176,umap_int32_find:0.0041,umap_int32_insert:0.0109,umap_int32_erase:0.0043,umap_int32_mem:10784,umap_uint64_find:0.0039,umap_uint64_insert:0.0100,umap_uint64_erase:0.0051,umap_uint64_mem:10784},
  {pattern:"random",N:506,kntrie_int32_find:0.0048,kntrie_int32_insert:0.0315,kntrie_int32_erase:0.0122,kntrie_int32_mem:6152,kntrie_uint64_find:0.0040,kntrie_uint64_insert:0.0320,kntrie_uint64_erase:0.0135,kntrie_uint64_mem:8200,map_int32_find:0.0099,map_int32_insert:0.0451,map_int32_erase:0.0247,map_int32_mem:24288,map_uint64_find:0.0099,map_uint64_insert:0.0438,map_uint64_erase:0.0270,map_uint64_mem:24288,umap_int32_find:0.0056,umap_int32_insert:0.0147,umap_int32_erase:0.0063,umap_int32_mem:16472,umap_uint64_find:0.0056,umap_uint64_insert:0.0168,umap_uint64_erase:0.0087,umap_uint64_mem:16472},
  {pattern:"random",N:759,kntrie_int32_find:0.0080,kntrie_int32_insert:0.0471,kntrie_int32_erase:0.0192,kntrie_int32_mem:12296,kntrie_uint64_find:0.0073,kntrie_uint64_insert:0.0460,kntrie_uint64_erase:0.0229,kntrie_uint64_mem:16392,map_int32_find:0.0180,map_int32_insert:0.0828,map_int32_erase:0.0519,map_int32_mem:36432,map_uint64_find:0.0161,map_uint64_insert:0.0801,map_uint64_erase:0.0414,map_uint64_mem:36432,umap_int32_find:0.0091,umap_int32_insert:0.0285,umap_int32_erase:0.0131,umap_int32_mem:24304,umap_uint64_find:0.0090,umap_uint64_insert:0.0216,umap_uint64_erase:0.0109,umap_uint64_mem:24304},
  {pattern:"random",N:1139,kntrie_int32_find:0.0120,kntrie_int32_insert:0.0776,kntrie_int32_erase:0.0190,kntrie_int32_mem:24584,kntrie_uint64_find:0.0114,kntrie_uint64_insert:0.0758,kntrie_uint64_erase:0.0256,kntrie_uint64_mem:32776,map_int32_find:0.0283,map_int32_insert:0.1077,map_int32_erase:0.0624,map_int32_mem:54672,map_uint64_find:0.0272,map_uint64_insert:0.0971,map_uint64_erase:0.0572,map_uint64_mem:54672,umap_int32_find:0.0134,umap_int32_insert:0.0343,umap_int32_erase:0.0163,umap_int32_mem:36880,umap_uint64_find:0.0131,umap_uint64_insert:0.0297,umap_uint64_erase:0.0142,umap_uint64_mem:36880},
  {pattern:"random",N:1708,kntrie_int32_find:0.0190,kntrie_int32_insert:0.1149,kntrie_int32_erase:0.0354,kntrie_int32_mem:24584,kntrie_uint64_find:0.0178,kntrie_uint64_insert:0.1084,kntrie_uint64_erase:0.0438,kntrie_uint64_mem:32776,map_int32_find:0.0472,map_int32_insert:0.1859,map_int32_erase:0.0966,map_int32_mem:81984,map_uint64_find:0.0425,map_uint64_insert:0.1547,map_uint64_erase:0.0908,map_uint64_mem:81984,umap_int32_find:0.0239,umap_int32_insert:0.0578,umap_int32_erase:0.0237,umap_int32_mem:54920,umap_uint64_find:0.0218,umap_uint64_insert:0.0430,umap_uint64_erase:0.0228,umap_uint64_mem:54920},
  {pattern:"random",N:2562,kntrie_int32_find:0.0296,kntrie_int32_insert:0.1626,kntrie_int32_erase:0.0494,kntrie_int32_mem:49160,kntrie_uint64_find:0.0313,kntrie_uint64_insert:0.1762,kntrie_uint64_erase:0.0682,kntrie_uint64_mem:65544,map_int32_find:0.0715,map_int32_insert:0.2912,map_int32_erase:0.1591,map_int32_mem:122976,map_uint64_find:0.0693,map_uint64_insert:0.2595,map_uint64_erase:0.1458,map_uint64_mem:122976,umap_int32_find:0.0323,umap_int32_insert:0.0655,umap_int32_erase:0.0337,umap_int32_mem:83512,umap_uint64_find:0.0328,umap_uint64_insert:0.0656,umap_uint64_erase:0.0337,umap_uint64_mem:83512},
  {pattern:"random",N:3844,kntrie_int32_find:0.0485,kntrie_int32_insert:0.2691,kntrie_int32_erase:0.0828,kntrie_int32_mem:49160,kntrie_uint64_find:0.0479,kntrie_uint64_insert:0.2806,kntrie_uint64_erase:0.1103,kntrie_uint64_mem:65544,map_int32_find:0.1395,map_int32_insert:0.4562,map_int32_erase:0.2792,map_int32_mem:184512,map_uint64_find:0.1183,map_uint64_insert:0.4103,map_uint64_erase:0.2299,map_uint64_mem:184512,umap_int32_find:0.0535,umap_int32_insert:0.1043,umap_int32_erase:0.0530,umap_int32_mem:124472,umap_uint64_find:0.0533,umap_uint64_insert:0.0991,umap_uint64_erase:0.0541,umap_uint64_mem:124472},
  {pattern:"random",N:5766,kntrie_int32_find:0.0774,kntrie_int32_insert:0.5420,kntrie_int32_erase:0.1495,kntrie_int32_mem:100560,kntrie_uint64_find:0.0769,kntrie_uint64_insert:0.5257,kntrie_uint64_erase:0.1501,kntrie_uint64_mem:131600,map_int32_find:0.2115,map_int32_insert:0.7337,map_int32_erase:0.3891,map_int32_mem:276768,map_uint64_find:0.1968,map_uint64_insert:0.6914,map_uint64_erase:0.3717,map_uint64_mem:276768,umap_int32_find:0.0820,umap_int32_insert:0.1539,umap_int32_erase:0.0841,umap_int32_mem:186008,umap_uint64_find:0.0831,umap_uint64_insert:0.1596,umap_uint64_erase:0.0866,umap_uint64_mem:186008},
  {pattern:"random",N:8649,kntrie_int32_find:0.1482,kntrie_int32_insert:0.6721,kntrie_int32_erase:0.2101,kntrie_int32_mem:157968,kntrie_uint64_find:0.1560,kntrie_uint64_insert:0.7073,kntrie_uint64_erase:0.2331,kntrie_uint64_mem:214544,map_int32_find:0.3588,map_int32_insert:1.2369,map_int32_erase:0.6370,map_int32_mem:415152,map_uint64_find:0.3306,map_uint64_insert:1.1284,map_uint64_erase:0.6356,map_uint64_mem:415152,umap_int32_find:0.1360,umap_int32_insert:0.2546,umap_int32_erase:0.1497,umap_int32_mem:277840,umap_uint64_find:0.1267,umap_uint64_insert:0.2379,umap_uint64_erase:0.1315,umap_uint64_mem:277840},
  {pattern:"random",N:12974,kntrie_int32_find:0.1940,kntrie_int32_insert:0.9979,kntrie_int32_erase:0.3082,kntrie_int32_mem:207888,kntrie_uint64_find:0.1940,kntrie_uint64_insert:0.9359,kntrie_uint64_erase:0.3189,kntrie_uint64_mem:274960,map_int32_find:0.6274,map_int32_insert:2.0842,map_int32_erase:1.1023,map_int32_mem:622752,map_uint64_find:0.5621,map_uint64_insert:1.7931,map_uint64_erase:1.0259,map_uint64_mem:622752,umap_int32_find:0.2118,umap_int32_insert:0.4401,umap_int32_erase:0.2155,umap_int32_mem:415240,umap_uint64_find:0.1963,umap_uint64_insert:0.3528,umap_uint64_erase:0.2007,umap_uint64_mem:415240},
  {pattern:"random",N:19461,kntrie_int32_find:0.3471,kntrie_int32_insert:1.4754,kntrie_int32_erase:0.4410,kntrie_int32_mem:380688,kntrie_uint64_find:0.3398,kntrie_uint64_insert:1.4204,kntrie_uint64_erase:0.4867,kntrie_uint64_mem:503824,map_int32_find:0.9952,map_int32_insert:3.1602,map_int32_erase:1.6414,map_int32_mem:934128,map_uint64_find:0.9638,map_uint64_insert:2.9159,map_uint64_erase:1.6968,map_uint64_mem:934128,umap_int32_find:0.2952,umap_int32_insert:0.5468,umap_int32_erase:0.3102,umap_int32_mem:633088,umap_uint64_find:0.3080,umap_uint64_insert:0.5493,umap_uint64_erase:0.3220,umap_uint64_mem:633088},
  {pattern:"random",N:29192,kntrie_int32_find:0.5271,kntrie_int32_insert:2.1094,kntrie_int32_erase:0.7005,kntrie_int32_mem:444432,kntrie_uint64_find:0.5186,kntrie_uint64_insert:2.0943,kntrie_uint64_erase:0.7146,kntrie_uint64_mem:568336,map_int32_find:1.9043,map_int32_insert:5.1237,map_int32_erase:3.0949,map_int32_mem:1401216,map_uint64_find:1.7334,map_uint64_insert:5.2179,map_uint64_erase:2.8631,map_uint64_mem:1401216,umap_int32_find:0.4668,umap_int32_insert:0.8710,umap_int32_erase:0.4761,umap_int32_mem:946424,umap_uint64_find:0.4606,umap_uint64_insert:0.8146,umap_uint64_erase:0.4737,umap_uint64_mem:946424},
  {pattern:"random",N:43789,kntrie_int32_find:0.8649,kntrie_int32_insert:3.1403,kntrie_int32_erase:1.1294,kntrie_int32_mem:791568,kntrie_uint64_find:0.8931,kntrie_uint64_insert:3.1934,kntrie_uint64_erase:1.1929,kntrie_uint64_mem:1053712,map_int32_find:3.8845,map_int32_insert:9.0300,map_int32_erase:5.8221,map_int32_mem:2101872,map_uint64_find:3.4063,map_uint64_insert:10.4824,map_uint64_erase:5.4598,map_uint64_mem:2101872,umap_int32_find:0.8161,umap_int32_insert:1.4320,umap_int32_erase:0.9864,umap_int32_mem:1414784,umap_uint64_find:0.7890,umap_uint64_insert:1.3278,umap_uint64_erase:0.8415,umap_uint64_mem:1414784},
  {pattern:"random",N:65684,kntrie_int32_find:1.6828,kntrie_int32_insert:5.2570,kntrie_int32_erase:1.5962,kntrie_int32_mem:1163280,kntrie_uint64_find:1.8926,kntrie_uint64_insert:5.5299,kntrie_uint64_erase:1.8211,kntrie_uint64_mem:1573904,map_int32_find:7.1884,map_int32_insert:16.8850,map_int32_erase:11.1967,map_int32_mem:3152832,map_uint64_find:6.6419,map_uint64_insert:21.4874,map_uint64_erase:10.7510,map_uint64_mem:3152832,umap_int32_find:1.4469,umap_int32_insert:2.5426,umap_int32_erase:1.8378,umap_int32_mem:2114872,umap_uint64_find:1.4441,umap_uint64_insert:2.5605,umap_uint64_erase:1.8345,umap_uint64_mem:2114872},
  {pattern:"random",N:98523,kntrie_int32_find:2.4518,kntrie_int32_insert:7.4752,kntrie_int32_erase:2.8314,kntrie_int32_mem:1578000,map_int32_find:15.2979,map_int32_insert:31.8448,map_int32_erase:21.4346,map_int32_mem:4729104,umap_int32_find:2.5445,umap_int32_insert:5.0338,umap_int32_erase:3.5335,umap_int32_mem:3162416},
  {pattern:"random",N:98526,kntrie_uint64_find:3.7884,kntrie_uint64_insert:8.1383,kntrie_uint64_erase:3.6292,kntrie_uint64_mem:2102288,map_uint64_find:15.2073,map_uint64_insert:39.6017,map_uint64_erase:21.6792,map_uint64_mem:4729248,umap_uint64_find:2.5017,umap_uint64_insert:4.8037,umap_uint64_erase:3.4672,umap_uint64_mem:3162488},
  {pattern:"random",N:147785,kntrie_int32_find:7.2363,kntrie_int32_insert:13.1615,kntrie_int32_erase:4.7370,kntrie_int32_mem:3150864,map_int32_find:28.8743,map_int32_insert:62.2230,map_int32_erase:41.2038,map_int32_mem:7093680,umap_int32_find:4.2618,umap_int32_insert:9.2975,umap_int32_erase:5.9307,umap_int32_mem:4729184},
  {pattern:"random",N:147789,kntrie_uint64_find:10.6965,kntrie_uint64_insert:15.6626,kntrie_uint64_erase:6.7704,kntrie_uint64_mem:4183056,map_uint64_find:31.0511,map_uint64_insert:71.6552,map_uint64_erase:44.2733,map_uint64_mem:7093872,umap_uint64_find:4.4103,umap_uint64_insert:9.6840,umap_uint64_erase:6.3582,umap_uint64_mem:4729280},
  {pattern:"random",N:221675,kntrie_int32_find:10.8620,kntrie_int32_insert:20.4325,kntrie_int32_erase:8.7216,kntrie_int32_mem:3150864,map_int32_find:58.6597,map_int32_insert:120.6958,map_int32_erase:92.6108,map_int32_mem:10640400,umap_int32_find:6.7525,umap_int32_insert:17.0380,umap_int32_erase:11.1178,umap_int32_mem:7215376},
  {pattern:"random",N:221683,kntrie_uint64_find:17.1961,kntrie_uint64_insert:27.8867,kntrie_uint64_erase:13.2647,kntrie_uint64_mem:4199440,map_uint64_find:71.7697,map_uint64_insert:130.0450,map_uint64_erase:95.3916,map_uint64_mem:10640784,umap_uint64_find:7.3775,umap_uint64_insert:18.6391,umap_uint64_erase:12.4812,umap_uint64_mem:7215568},
  {pattern:"random",N:332509,kntrie_int32_find:31.6175,kntrie_int32_insert:38.0379,kntrie_int32_erase:18.3918,kntrie_int32_mem:6296592,map_int32_find:119.7176,map_int32_insert:225.8210,map_int32_erase:157.4173,map_int32_mem:15960432,umap_int32_find:11.9356,umap_int32_insert:30.0083,umap_int32_erase:21.0159,umap_int32_mem:10788704},
  {pattern:"random",N:332525,kntrie_uint64_find:45.7778,kntrie_uint64_insert:58.1627,kntrie_uint64_erase:28.9828,kntrie_uint64_mem:8393744,map_uint64_find:123.1126,map_uint64_insert:296.8046,map_uint64_erase:174.2478,map_uint64_mem:15961200,umap_uint64_find:11.3339,umap_uint64_insert:28.1137,umap_uint64_erase:20.0960,umap_uint64_mem:10789088},
  {pattern:"random",N:498753,kntrie_int32_find:52.4619,kntrie_int32_insert:83.1386,kntrie_int32_erase:39.7202,kntrie_int32_mem:6444048,map_int32_find:225.8478,map_int32_insert:467.0357,map_int32_erase:330.4040,map_int32_mem:23940144,umap_int32_find:20.7133,umap_int32_insert:58.8439,umap_int32_erase:41.3917,umap_int32_mem:16132000},
  {pattern:"random",N:498788,kntrie_uint64_find:60.7378,kntrie_uint64_insert:106.0763,kntrie_uint64_erase:48.7452,kntrie_uint64_mem:8524816,map_uint64_find:200.0360,map_uint64_insert:460.3445,map_uint64_erase:281.6412,map_uint64_mem:23941824,umap_uint64_find:23.4419,umap_uint64_insert:79.8108,umap_uint64_erase:47.1656,umap_uint64_mem:16132840},
  {pattern:"random",N:748117,kntrie_int32_find:118.2275,kntrie_int32_insert:135.4741,kntrie_int32_erase:73.2599,kntrie_int32_mem:12588048,map_int32_find:365.6106,map_int32_insert:801.7579,map_int32_erase:525.7052,map_int32_mem:35909616,umap_int32_find:40.0364,umap_int32_insert:110.7904,umap_int32_erase:69.2049,umap_int32_mem:24123200},
  {pattern:"random",N:748182,kntrie_uint64_find:166.1806,kntrie_uint64_insert:236.9312,kntrie_uint64_erase:119.3402,kntrie_uint64_mem:16782352,map_uint64_find:332.6932,map_uint64_insert:773.9318,map_uint64_erase:505.2817,map_uint64_mem:35912736,umap_uint64_find:35.6862,umap_uint64_insert:99.1780,umap_uint64_erase:70.7390,umap_uint64_mem:24124760},
  {pattern:"random",N:1122145,kntrie_int32_find:150.4782,kntrie_int32_insert:303.1147,kntrie_int32_erase:125.8735,kntrie_int32_mem:17446224,umap_int32_find:66.5237,umap_int32_insert:208.4882,umap_int32_erase:145.1529,umap_int32_mem:36074048},
  {pattern:"random",N:1122274,kntrie_uint64_find:148.6700,kntrie_uint64_insert:416.5801,kntrie_uint64_erase:158.6017,kntrie_uint64_mem:27146000,umap_uint64_find:64.2112,umap_uint64_insert:188.4686,umap_uint64_erase:123.4127,umap_uint64_mem:36077144},
  {pattern:"random",N:1683111,kntrie_int32_find:247.9771,kntrie_int32_insert:508.7834,kntrie_int32_erase:201.7490,kntrie_int32_mem:23942784,umap_int32_find:121.1868,umap_int32_insert:368.9324,umap_int32_erase:196.6673,umap_int32_mem:53945536},
  {pattern:"random",N:1683411,kntrie_uint64_find:256.6067,kntrie_uint64_insert:581.1495,kntrie_uint64_erase:236.6959,kntrie_uint64_mem:37514256,umap_uint64_find:120.2146,umap_uint64_insert:361.5424,umap_uint64_erase:221.3213,umap_uint64_mem:53952736},
  {pattern:"random",N:2524384,kntrie_int32_find:498.7815,kntrie_int32_insert:749.6089,kntrie_int32_erase:332.2238,kntrie_int32_mem:39793104,umap_int32_find:185.1966,umap_int32_insert:541.3229,umap_int32_erase:324.2112,umap_int32_mem:82315208},
  {pattern:"random",N:2525116,kntrie_uint64_find:509.9218,kntrie_uint64_insert:945.0776,kntrie_uint64_erase:408.0830,kntrie_uint64_mem:62881040,umap_uint64_find:193.0383,umap_uint64_insert:557.4458,umap_uint64_erase:337.9349,umap_uint64_mem:82332776},
  {pattern:"sequential",N:100,kntrie_int32_find:0.0007,kntrie_int32_insert:0.0058,kntrie_int32_erase:0.0029,kntrie_int32_mem:1544,kntrie_uint64_find:0.0007,kntrie_uint64_insert:0.0064,kntrie_uint64_erase:0.0036,kntrie_uint64_mem:2056,map_int32_find:0.0013,map_int32_insert:0.0078,map_int32_erase:0.0048,map_int32_mem:4800,map_uint64_find:0.0012,map_uint64_insert:0.0084,map_uint64_erase:0.0057,map_uint64_mem:4800,umap_int32_find:0.0003,umap_int32_insert:0.0013,umap_int32_erase:0.0010,umap_int32_mem:3224,umap_uint64_find:0.0003,umap_uint64_insert:0.0015,umap_uint64_erase:0.0011,umap_uint64_mem:3224},
  {pattern:"sequential",N:150,kntrie_int32_find:0.0011,kntrie_int32_insert:0.0090,kntrie_int32_erase:0.0042,kntrie_int32_mem:3080,kntrie_uint64_find:0.0011,kntrie_uint64_insert:0.0096,kntrie_uint64_erase:0.0049,kntrie_uint64_mem:4104,map_int32_find:0.0024,map_int32_insert:0.0128,map_int32_erase:0.0081,map_int32_mem:7200,map_uint64_find:0.0024,map_uint64_insert:0.0135,map_uint64_erase:0.0090,map_uint64_mem:7200,umap_int32_find:0.0005,umap_int32_insert:0.0036,umap_int32_erase:0.0016,umap_int32_mem:4856,umap_uint64_find:0.0005,umap_uint64_insert:0.0037,umap_uint64_erase:0.0018,umap_uint64_mem:4856},
  {pattern:"sequential",N:225,kntrie_int32_find:0.0017,kntrie_int32_insert:0.0135,kntrie_int32_erase:0.0044,kntrie_int32_mem:3080,kntrie_uint64_find:0.0016,kntrie_uint64_insert:0.0135,kntrie_uint64_erase:0.0054,kntrie_uint64_mem:4104,map_int32_find:0.0037,map_int32_insert:0.0185,map_int32_erase:0.0102,map_int32_mem:10800,map_uint64_find:0.0034,map_uint64_insert:0.0178,map_uint64_erase:0.0108,map_uint64_mem:10800,umap_int32_find:0.0007,umap_int32_insert:0.0049,umap_int32_erase:0.0012,umap_int32_mem:7216,umap_uint64_find:0.0007,umap_uint64_insert:0.0048,umap_uint64_erase:0.0013,umap_uint64_mem:7216},
  {pattern:"sequential",N:337,kntrie_int32_find:0.0027,kntrie_int32_insert:0.0202,kntrie_int32_erase:0.0080,kntrie_int32_mem:6152,kntrie_uint64_find:0.0026,kntrie_uint64_insert:0.0196,kntrie_uint64_erase:0.0090,kntrie_uint64_mem:8200,map_int32_find:0.0065,map_int32_insert:0.0294,map_int32_erase:0.0161,map_int32_mem:16176,map_uint64_find:0.0064,map_uint64_insert:0.0291,map_uint64_erase:0.0172,map_uint64_mem:16176,umap_int32_find:0.0010,umap_int32_insert:0.0069,umap_int32_erase:0.0021,umap_int32_mem:10784,umap_uint64_find:0.0010,umap_uint64_insert:0.0074,umap_uint64_erase:0.0022,umap_uint64_mem:10784},
  {pattern:"sequential",N:506,kntrie_int32_find:0.0042,kntrie_int32_insert:0.0325,kntrie_int32_erase:0.0113,kntrie_int32_mem:6152,kntrie_uint64_find:0.0040,kntrie_uint64_insert:0.0349,kntrie_uint64_erase:0.0134,kntrie_uint64_mem:8200,map_int32_find:0.0107,map_int32_insert:0.0471,map_int32_erase:0.0269,map_int32_mem:24288,map_uint64_find:0.0097,map_uint64_insert:0.0417,map_uint64_erase:0.0264,map_uint64_mem:24288,umap_int32_find:0.0015,umap_int32_insert:0.0096,umap_int32_erase:0.0028,umap_int32_mem:16472,umap_uint64_find:0.0016,umap_uint64_insert:0.0107,umap_uint64_erase:0.0042,umap_uint64_mem:16472},
  {pattern:"sequential",N:759,kntrie_int32_find:0.0068,kntrie_int32_insert:0.0439,kntrie_int32_erase:0.0178,kntrie_int32_mem:12296,kntrie_uint64_find:0.0069,kntrie_uint64_insert:0.0444,kntrie_uint64_erase:0.0221,kntrie_uint64_mem:16392,map_int32_find:0.0174,map_int32_insert:0.0692,map_int32_erase:0.0382,map_int32_mem:36432,map_uint64_find:0.0158,map_uint64_insert:0.0651,map_uint64_erase:0.0407,map_uint64_mem:36432,umap_int32_find:0.0023,umap_int32_insert:0.0147,umap_int32_erase:0.0053,umap_int32_mem:24304,umap_uint64_find:0.0024,umap_uint64_insert:0.0148,umap_uint64_erase:0.0051,umap_uint64_mem:24304},
  {pattern:"sequential",N:1139,kntrie_int32_find:0.0112,kntrie_int32_insert:0.0773,kntrie_int32_erase:0.0192,kntrie_int32_mem:24584,kntrie_uint64_find:0.0112,kntrie_uint64_insert:0.0810,kntrie_uint64_erase:0.0261,kntrie_uint64_mem:32776,map_int32_find:0.0282,map_int32_insert:0.1059,map_int32_erase:0.0586,map_int32_mem:54672,map_uint64_find:0.0273,map_uint64_insert:0.1023,map_uint64_erase:0.0599,map_uint64_mem:54672,umap_int32_find:0.0035,umap_int32_insert:0.0210,umap_int32_erase:0.0063,umap_int32_mem:36880,umap_uint64_find:0.0035,umap_uint64_insert:0.0202,umap_uint64_erase:0.0062,umap_uint64_mem:36880},
  {pattern:"sequential",N:1708,kntrie_int32_find:0.0174,kntrie_int32_insert:0.1001,kntrie_int32_erase:0.0359,kntrie_int32_mem:24584,kntrie_uint64_find:0.0170,kntrie_uint64_insert:0.1192,kntrie_uint64_erase:0.0441,kntrie_uint64_mem:32776,map_int32_find:0.0477,map_int32_insert:0.1733,map_int32_erase:0.0942,map_int32_mem:81984,map_uint64_find:0.0435,map_uint64_insert:0.1693,map_uint64_erase:0.0943,map_uint64_mem:81984,umap_int32_find:0.0052,umap_int32_insert:0.0292,umap_int32_erase:0.0100,umap_int32_mem:54920,umap_uint64_find:0.0052,umap_uint64_insert:0.0302,umap_uint64_erase:0.0097,umap_uint64_mem:54920},
  {pattern:"sequential",N:2562,kntrie_int32_find:0.0295,kntrie_int32_insert:0.1684,kntrie_int32_erase:0.0506,kntrie_int32_mem:49160,kntrie_uint64_find:0.0317,kntrie_uint64_insert:0.1820,kntrie_uint64_erase:0.0692,kntrie_uint64_mem:65544,map_int32_find:0.0758,map_int32_insert:0.2898,map_int32_erase:0.1486,map_int32_mem:122976,map_uint64_find:0.0718,map_uint64_insert:0.2661,map_uint64_erase:0.1449,map_uint64_mem:122976,umap_int32_find:0.0079,umap_int32_insert:0.0434,umap_int32_erase:0.0155,umap_int32_mem:83512,umap_uint64_find:0.0078,umap_uint64_insert:0.0425,umap_uint64_erase:0.0158,umap_uint64_mem:83512},
  {pattern:"sequential",N:3844,kntrie_int32_find:0.0452,kntrie_int32_insert:0.2597,kntrie_int32_erase:0.0785,kntrie_int32_mem:49160,kntrie_uint64_find:0.0484,kntrie_uint64_insert:0.2808,kntrie_uint64_erase:0.1100,kntrie_uint64_mem:65544,map_int32_find:0.1311,map_int32_insert:0.4624,map_int32_erase:0.2395,map_int32_mem:184512,map_uint64_find:0.1272,map_uint64_insert:0.4165,map_uint64_erase:0.2339,map_uint64_mem:184512,umap_int32_find:0.0119,umap_int32_insert:0.0638,umap_int32_erase:0.0250,umap_int32_mem:124472,umap_uint64_find:0.0123,umap_uint64_insert:0.0662,umap_uint64_erase:0.0259,umap_uint64_mem:124472},
  {pattern:"sequential",N:5766,kntrie_int32_find:0.0449,kntrie_int32_insert:0.4282,kntrie_int32_erase:0.0994,kntrie_int32_mem:69752,kntrie_uint64_find:0.0565,kntrie_uint64_insert:0.4926,kntrie_uint64_erase:0.1101,kntrie_uint64_mem:69752,map_int32_find:0.2171,map_int32_insert:0.7356,map_int32_erase:0.3863,map_int32_mem:276768,map_uint64_find:0.2064,map_uint64_insert:0.6992,map_uint64_erase:0.3863,map_uint64_mem:276768,umap_int32_find:0.0180,umap_int32_insert:0.0928,umap_int32_erase:0.0393,umap_int32_mem:186008,umap_uint64_find:0.0181,umap_uint64_insert:0.0925,umap_uint64_erase:0.0387,umap_uint64_mem:186008},
  {pattern:"sequential",N:8649,kntrie_int32_find:0.0727,kntrie_int32_insert:0.5748,kntrie_int32_erase:0.1540,kntrie_int32_mem:104360,kntrie_uint64_find:0.0883,kntrie_uint64_insert:0.5959,kntrie_uint64_erase:0.1693,kntrie_uint64_mem:104360,map_int32_find:0.3866,map_int32_insert:1.2368,map_int32_erase:0.7140,map_int32_mem:415152,map_uint64_find:0.3435,map_uint64_insert:1.1583,map_uint64_erase:0.6370,map_uint64_mem:415152,umap_int32_find:0.0320,umap_int32_insert:0.2031,umap_int32_erase:0.1028,umap_int32_mem:277840,umap_uint64_find:0.0286,umap_uint64_insert:0.1452,umap_uint64_erase:0.0606,umap_uint64_mem:277840},
  {pattern:"sequential",N:12974,kntrie_int32_find:0.1511,kntrie_int32_insert:0.8322,kntrie_int32_erase:0.2571,kntrie_int32_mem:156472,kntrie_uint64_find:0.1285,kntrie_uint64_insert:0.8015,kntrie_uint64_erase:0.2608,kntrie_uint64_mem:156472,map_int32_find:0.6806,map_int32_insert:2.2595,map_int32_erase:1.1336,map_int32_mem:622752,map_uint64_find:0.5854,map_uint64_insert:1.8487,map_uint64_erase:1.0565,map_uint64_mem:622752,umap_int32_find:0.0514,umap_int32_insert:0.3169,umap_int32_erase:0.1565,umap_int32_mem:415240,umap_uint64_find:0.0413,umap_uint64_insert:0.2158,umap_uint64_erase:0.0900,umap_uint64_mem:415240},
  {pattern:"sequential",N:19461,kntrie_int32_find:0.1614,kntrie_int32_insert:1.0224,kntrie_int32_erase:0.3668,kntrie_int32_mem:235576,kntrie_uint64_find:0.2020,kntrie_uint64_insert:1.1257,kntrie_uint64_erase:0.4115,kntrie_uint64_mem:235576,map_int32_find:0.9289,map_int32_insert:2.9939,map_int32_erase:1.6189,map_int32_mem:934128,map_uint64_find:0.9798,map_uint64_insert:2.9671,map_uint64_erase:1.7162,map_uint64_mem:934128,umap_int32_find:0.0593,umap_int32_insert:0.2934,umap_int32_erase:0.1528,umap_int32_mem:633088,umap_uint64_find:0.0655,umap_uint64_insert:0.3046,umap_uint64_erase:0.1399,umap_uint64_mem:633088},
  {pattern:"sequential",N:29192,kntrie_int32_find:0.2525,kntrie_int32_insert:1.4306,kntrie_int32_erase:0.5783,kntrie_int32_mem:353176,kntrie_uint64_find:0.3105,kntrie_uint64_insert:1.5395,kntrie_uint64_erase:0.6510,kntrie_uint64_mem:353176,map_int32_find:1.6754,map_int32_insert:4.8915,map_int32_erase:2.7534,map_int32_mem:1401216,map_uint64_find:1.8011,map_uint64_insert:4.9561,map_uint64_erase:3.0098,map_uint64_mem:1401216,umap_int32_find:0.1107,umap_int32_insert:0.4576,umap_int32_erase:0.2325,umap_int32_mem:946424,umap_uint64_find:0.1078,umap_uint64_insert:0.4628,umap_uint64_erase:0.2246,umap_uint64_mem:946424},
  {pattern:"sequential",N:43789,kntrie_int32_find:0.4031,kntrie_int32_insert:2.0952,kntrie_int32_erase:0.9066,kntrie_int32_mem:529816,kntrie_uint64_find:0.6064,kntrie_uint64_insert:2.8131,kntrie_uint64_erase:1.0194,kntrie_uint64_mem:529816,map_int32_find:3.3505,map_int32_insert:8.3555,map_int32_erase:5.2944,map_int32_mem:2101872,map_uint64_find:3.4213,map_uint64_insert:9.4407,map_uint64_erase:5.4350,map_uint64_mem:2101872,umap_int32_find:0.2364,umap_int32_insert:0.6550,umap_int32_erase:0.4948,umap_int32_mem:1414784,umap_uint64_find:0.2423,umap_uint64_insert:0.6801,umap_uint64_erase:0.4705,umap_uint64_mem:1414784},
  {pattern:"sequential",N:65684,kntrie_int32_find:0.9793,kntrie_int32_insert:3.5586,kntrie_int32_erase:1.6502,kntrie_int32_mem:796256,kntrie_uint64_find:1.1878,kntrie_uint64_insert:3.9511,kntrie_uint64_erase:1.8596,kntrie_uint64_mem:796256,map_int32_find:6.5581,map_int32_insert:14.8726,map_int32_erase:10.2051,map_int32_mem:3152832,map_uint64_find:6.2015,map_uint64_insert:15.9823,map_uint64_erase:9.7319,map_uint64_mem:3152832,umap_int32_find:0.5044,umap_int32_insert:1.0548,umap_int32_erase:1.0685,umap_int32_mem:2114872,umap_uint64_find:0.5724,umap_uint64_insert:1.0649,umap_uint64_erase:1.2364,umap_uint64_mem:2114872},
  {pattern:"sequential",N:98526,kntrie_int32_find:1.5568,kntrie_int32_insert:5.7729,kntrie_int32_erase:2.5670,kntrie_int32_mem:1192552,kntrie_uint64_find:1.7824,kntrie_uint64_insert:5.9974,kntrie_uint64_erase:2.7998,kntrie_uint64_mem:1192552,map_int32_find:13.5522,map_int32_insert:29.9774,map_int32_erase:18.4997,map_int32_mem:4729248,map_uint64_find:11.0712,map_uint64_insert:26.2769,map_uint64_erase:17.7771,map_uint64_mem:4729248,umap_int32_find:0.8994,umap_int32_insert:1.8184,umap_int32_erase:2.1005,umap_int32_mem:3162488,umap_uint64_find:1.0239,umap_uint64_insert:1.9009,umap_uint64_erase:2.0724,umap_uint64_mem:3162488},
  {pattern:"sequential",N:147789,kntrie_int32_find:2.6752,kntrie_int32_insert:8.8533,kntrie_int32_erase:3.9872,kntrie_int32_mem:1789624,kntrie_uint64_find:2.9222,kntrie_uint64_insert:9.2179,kntrie_uint64_erase:4.3092,kntrie_uint64_mem:1789624,map_int32_find:24.0796,map_int32_insert:53.4058,map_int32_erase:37.4284,map_int32_mem:7093872,map_uint64_find:26.8383,map_uint64_insert:58.3780,map_uint64_erase:39.8112,map_uint64_mem:7093872,umap_int32_find:1.6735,umap_int32_insert:3.3706,umap_int32_erase:3.2797,umap_int32_mem:4729280,umap_uint64_find:1.8828,umap_uint64_insert:3.4259,umap_uint64_erase:3.7218,umap_uint64_mem:4729280},
  {pattern:"sequential",N:221683,kntrie_int32_find:4.9386,kntrie_int32_insert:13.9614,kntrie_int32_erase:6.3379,kntrie_int32_mem:2683560,kntrie_uint64_find:5.4536,kntrie_uint64_insert:14.5105,kntrie_uint64_erase:6.9304,kntrie_uint64_mem:2683560,map_int32_find:51.6329,map_int32_insert:99.4645,map_int32_erase:73.8118,map_int32_mem:10640784,map_uint64_find:54.6335,map_uint64_insert:108.0553,map_uint64_erase:75.9445,map_uint64_mem:10640784,umap_int32_find:3.0619,umap_int32_insert:6.3262,umap_int32_erase:6.5178,umap_int32_mem:7215568,umap_uint64_find:3.3535,umap_uint64_insert:6.2231,umap_uint64_erase:5.6016,umap_uint64_mem:7215568},
  {pattern:"sequential",N:332525,kntrie_int32_find:8.8804,kntrie_int32_insert:22.4201,kntrie_int32_erase:11.2476,kntrie_int32_mem:4026040,kntrie_uint64_find:10.3370,kntrie_uint64_insert:22.9878,kntrie_uint64_erase:11.7778,kntrie_uint64_mem:4026040,map_int32_find:105.8230,map_int32_insert:206.7418,map_int32_erase:140.6460,map_int32_mem:15961200,map_uint64_find:101.1646,map_uint64_insert:200.4659,map_uint64_erase:145.9453,map_uint64_mem:15961200,umap_int32_find:5.3718,umap_int32_insert:10.3929,umap_int32_erase:10.5707,umap_int32_mem:10789088,umap_uint64_find:6.9382,umap_uint64_insert:13.1980,umap_uint64_erase:12.7484,umap_uint64_mem:10789088},
  {pattern:"sequential",N:498788,kntrie_int32_find:15.3229,kntrie_int32_insert:36.9334,kntrie_int32_erase:20.7737,kntrie_int32_mem:6039736,kntrie_uint64_find:19.4531,kntrie_uint64_insert:40.4313,kntrie_uint64_erase:24.1076,kntrie_uint64_mem:6039736,map_int32_find:182.6998,map_int32_insert:415.9033,map_int32_erase:292.6426,map_int32_mem:23941824,map_uint64_find:188.9760,map_uint64_insert:422.0904,map_uint64_erase:285.8583,map_uint64_mem:23941824,umap_int32_find:11.2876,umap_int32_insert:19.1329,umap_int32_erase:21.7419,umap_int32_mem:16132840,umap_uint64_find:11.4252,umap_uint64_insert:20.7118,umap_uint64_erase:21.5903,umap_uint64_mem:16132840},
  {pattern:"sequential",N:748182,kntrie_int32_find:28.6015,kntrie_int32_insert:68.1562,kntrie_int32_erase:43.3716,kntrie_int32_mem:9059896,kntrie_uint64_find:41.2126,kntrie_uint64_insert:70.3051,kntrie_uint64_erase:48.1977,kntrie_uint64_mem:9059896,map_int32_find:367.3276,map_int32_insert:776.9873,map_int32_erase:551.4481,map_int32_mem:35912736,map_uint64_find:406.5954,map_uint64_insert:854.0626,map_uint64_erase:563.6290,map_uint64_mem:35912736,umap_int32_find:21.0180,umap_int32_insert:36.3857,umap_int32_erase:42.7021,umap_int32_mem:24124760,umap_uint64_find:25.9855,umap_uint64_insert:42.2807,umap_uint64_erase:41.0154,umap_uint64_mem:24124760},
  {pattern:"sequential",N:1122274,kntrie_int32_find:64.2562,kntrie_int32_insert:128.5660,kntrie_int32_erase:88.1427,kntrie_int32_mem:13589864,kntrie_uint64_find:86.7294,kntrie_uint64_insert:136.2878,kntrie_uint64_erase:92.4362,kntrie_uint64_mem:13589864,umap_int32_find:35.1633,umap_int32_insert:60.6295,umap_int32_erase:70.3734,umap_int32_mem:36077144,umap_uint64_find:40.9548,umap_uint64_insert:79.0462,umap_uint64_erase:89.4201,umap_uint64_mem:36077144},
  {pattern:"sequential",N:1683411,kntrie_int32_find:129.7462,kntrie_int32_insert:236.9357,kntrie_int32_erase:156.9949,kntrie_int32_mem:20384664,kntrie_uint64_find:152.6491,kntrie_uint64_insert:243.9922,kntrie_uint64_erase:158.0888,kntrie_uint64_mem:20384664,umap_int32_find:67.8858,umap_int32_insert:135.3838,umap_int32_erase:138.4360,umap_int32_mem:53952736,umap_uint64_find:72.4469,umap_uint64_insert:142.8841,umap_uint64_erase:143.5484,umap_uint64_mem:53952736},
  {pattern:"sequential",N:2525116,kntrie_int32_find:213.3708,kntrie_int32_insert:397.3517,kntrie_int32_erase:268.1945,kntrie_int32_mem:30577800,kntrie_uint64_find:296.1918,kntrie_uint64_insert:494.5884,kntrie_uint64_erase:347.7298,kntrie_uint64_mem:30577800,umap_int32_find:108.1378,umap_int32_insert:236.4587,umap_int32_erase:214.8922,umap_int32_mem:82332776,umap_uint64_find:120.9445,umap_uint64_insert:258.5509,umap_uint64_erase:231.5494,umap_uint64_mem:82332776},
];


const LINES = [
  { key: "kntrie_int32", color: "#3b82f6", dash: [], width: 2.5, label: "kntrie i32" },
  { key: "kntrie_uint64", color: "#93c5fd", dash: [6,3], width: 1.5, label: "kntrie u64" },
  { key: "map_int32", color: "#ef4444", dash: [], width: 2.5, label: "map i32" },
  { key: "map_uint64", color: "#fca5a5", dash: [6,3], width: 1.5, label: "map u64" },
  { key: "umap_int32", color: "#22c55e", dash: [], width: 2.5, label: "umap i32" },
  { key: "umap_uint64", color: "#86efac", dash: [6,3], width: 1.5, label: "umap u64" },
];

const MEM_LINES = [
  ...LINES,
  { key: "raw_int32", color: "#888", dash: [], width: 1, label: "raw i32" },
  { key: "raw_uint64", color: "#555", dash: [3,3], width: 1, label: "raw u64" },
];

const METRICS = [
  { id: "find", suffix: "find", convert: (ms, n) => (ms * 1e6) / n },
  { id: "insert", suffix: "insert", convert: (ms, n) => (ms * 1e6) / n },
  { id: "erase", suffix: "erase", convert: (ms, n) => (ms * 1e6) / (n / 2) },
  { id: "mem", suffix: "mem", convert: (b, n) => b / n },
];

function buildData(pattern, metric) {
  const lines = metric.id === "mem" ? MEM_LINES : LINES;
  return RAW_DATA
    .filter(r => r.pattern === pattern)
    .map(r => {
      const pt = { N: r.N };
      for (const l of lines) {
        if (l.key === "raw_int32") { pt[l.key] = 12; continue; }
        if (l.key === "raw_uint64") { pt[l.key] = 16; continue; }
        const raw = r[l.key + "_" + metric.suffix];
        if (raw != null) pt[l.key] = metric.convert(raw, r.N);
      }
      return pt;
    });
}

const charts = {};

function makeChart(canvasId, metric) {
  const ctx = document.getElementById(canvasId).getContext("2d");
  const lines = metric.id === "mem" ? MEM_LINES : LINES;
  const data = buildData("random", metric);

  charts[canvasId] = new Chart(ctx, {
    type: "line",
    data: {
      labels: data.map(d => d.N),
      datasets: lines.map(l => ({
        label: l.label,
        data: data.map(d => d[l.key] ?? null),
        borderColor: l.color,
        backgroundColor: l.color + "33",
        borderWidth: l.width,
        borderDash: l.dash,
        pointRadius: 0,
        pointHitRadius: 8,
        tension: 0.2,
        spanGaps: true,
      })),
    },
    options: {
      responsive: true,
      interaction: { mode: "index", intersect: false },
      plugins: {
        legend: { display: true, labels: { color: "#bbb", font: { size: 11 }, boxWidth: 20, padding: 10 } },
        tooltip: {
          backgroundColor: "#1a1a2e",
          borderColor: "#444",
          borderWidth: 1,
          titleColor: "#aaa",
          bodyColor: "#ddd",
          callbacks: {
            title: (items) => {
              const v = items[0].parsed.x;
              if (v >= 1e6) return "N = " + (v/1e6).toFixed(1) + "M";
              if (v >= 1e3) return "N = " + (v/1e3).toFixed(1) + "K";
              return "N = " + v;
            },
            label: (item) => {
              const v = item.parsed.y;
              if (v == null) return null;
              const s = v < 0.1 ? v.toFixed(3) : v < 10 ? v.toFixed(2) : v < 1000 ? v.toFixed(1) : v.toFixed(0);
              return " " + item.dataset.label + ": " + s;
            },
          },
        },
      },
      scales: {
        x: {
          type: "logarithmic",
          title: { display: false },
          ticks: { color: "#888", font: { size: 11 },
            callback: (v) => v >= 1e6 ? (v/1e6)+"M" : v >= 1e3 ? (v/1e3)+"K" : v },
          grid: { color: "#2a2a3e" },
        },
        y: {
          type: "logarithmic",
          ticks: { color: "#888", font: { size: 10 },
            callback: (v) => v < 0.1 ? v.toFixed(2) : v < 10 ? v.toFixed(1) : v >= 1000 ? v.toFixed(0) : v.toFixed(1) },
          grid: { color: "#2a2a3e" },
        },
      },
    },
  });
  charts[canvasId]._metric = metric;
}

METRICS.forEach(m => makeChart("c_" + m.id, m));

function show(pattern) {
  document.querySelectorAll(".btns button").forEach(b => b.classList.remove("active"));
  event.target.classList.add("active");
  for (const [id, chart] of Object.entries(charts)) {
    const m = chart._metric;
    const lines = m.id === "mem" ? MEM_LINES : LINES;
    const data = buildData(pattern, m);
    chart.data.labels = data.map(d => d.N);
    lines.forEach((l, i) => {
      chart.data.datasets[i].data = data.map(d => d[l.key] ?? null);
    });
    chart.update("none");
  }
}
</script>
</body>
</html>
