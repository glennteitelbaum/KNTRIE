<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>kntrie Benchmark</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
<style>
  body { margin:0; background:#0f0f1a; color:#ddd; font-family:system-ui,sans-serif; }
  .wrap { max-width:700px; margin:0 auto; padding:16px 12px; }
  h2 { margin:0 0 4px; font-size:18px; font-weight:700; text-align:center; }
  .sub { text-align:center; color:#777; font-size:12px; margin:0 0 12px; }
  .btns { display:flex; justify-content:center; gap:8px; margin-bottom:16px; }
  .btns button { padding:6px 16px; border-radius:6px; border:1px solid #444;
    background:#1a1a2e; color:#aaa; cursor:pointer; font-size:13px; font-weight:600; }
  .btns button.active { background:#3b82f6; color:#fff; }
  .chart-box { margin-bottom:24px; }
  .chart-box h3 { margin:0 0 6px; font-size:14px; font-weight:600; text-align:center; }
  canvas { background:#12122a; border-radius:8px; }
</style>
</head>
<body>
<div class="wrap">
  <h2>kntrie Benchmark</h2>
  <p class="sub">Log-log · Per-entry · Lower is better · Solid = i32, Dashed = u64</p>
  <div class="btns">
    <button class="active" onclick="show('random')">random</button>
    <button onclick="show('sequential')">sequential</button>
  </div>
  <div class="chart-box"><h3>Find (ns/entry)</h3><canvas id="c_find"></canvas></div>
  <div class="chart-box"><h3>Insert (ns/entry)</h3><canvas id="c_insert"></canvas></div>
  <div class="chart-box"><h3>Erase N/2 (ns/entry)</h3><canvas id="c_erase"></canvas></div>
  <div class="chart-box"><h3>Memory (B/entry)</h3><canvas id="c_mem"></canvas></div>
</div>
<script>
const RAW_DATA = [
  {pattern:"random",N:100,kntrie_int32_find:0.0010,kntrie_int32_insert:0.0039,kntrie_int32_erase:0.0014,kntrie_int32_mem:1288,kntrie_uint64_find:0.0012,kntrie_uint64_insert:0.0066,kntrie_uint64_erase:0.0025,kntrie_uint64_mem:1800,map_int32_find:0.0005,map_int32_insert:0.0040,map_int32_erase:0.0024,map_int32_mem:4800,map_uint64_find:0.0006,map_uint64_insert:0.0038,map_uint64_erase:0.0025,map_uint64_mem:4800,umap_int32_find:0.0005,umap_int32_insert:0.0018,umap_int32_erase:0.0008,umap_int32_mem:3224,umap_uint64_find:0.0005,umap_uint64_insert:0.0015,umap_uint64_erase:0.0009,umap_uint64_mem:3224},
  {pattern:"random",N:150,kntrie_int32_find:0.0015,kntrie_int32_insert:0.0056,kntrie_int32_erase:0.0025,kntrie_int32_mem:2056,kntrie_uint64_find:0.0017,kntrie_uint64_insert:0.0058,kntrie_uint64_erase:0.0032,kntrie_uint64_mem:2568,map_int32_find:0.0008,map_int32_insert:0.0063,map_int32_erase:0.0036,map_int32_mem:7200,map_uint64_find:0.0010,map_uint64_insert:0.0065,map_uint64_erase:0.0040,map_uint64_mem:7200,umap_int32_find:0.0008,umap_int32_insert:0.0055,umap_int32_erase:0.0015,umap_int32_mem:4856,umap_uint64_find:0.0007,umap_uint64_insert:0.0044,umap_uint64_erase:0.0023,umap_uint64_mem:4856},
  {pattern:"random",N:225,kntrie_int32_find:0.0024,kntrie_int32_insert:0.0088,kntrie_int32_erase:0.0039,kntrie_int32_mem:3080,kntrie_uint64_find:0.0025,kntrie_uint64_insert:0.0075,kntrie_uint64_erase:0.0039,kntrie_uint64_mem:4104,map_int32_find:0.0014,map_int32_insert:0.0121,map_int32_erase:0.0065,map_int32_mem:10800,map_uint64_find:0.0017,map_uint64_insert:0.0132,map_uint64_erase:0.0107,map_uint64_mem:10800,umap_int32_find:0.0012,umap_int32_insert:0.0081,umap_int32_erase:0.0025,umap_int32_mem:7216,umap_uint64_find:0.0012,umap_uint64_insert:0.0103,umap_uint64_erase:0.0037,umap_uint64_mem:7216},
  {pattern:"random",N:337,kntrie_int32_find:0.0038,kntrie_int32_insert:0.0193,kntrie_int32_erase:0.0075,kntrie_int32_mem:4104,kntrie_uint64_find:0.0045,kntrie_uint64_insert:0.0235,kntrie_uint64_erase:0.0080,kntrie_uint64_mem:6152,map_int32_find:0.0031,map_int32_insert:0.0230,map_int32_erase:0.0134,map_int32_mem:16176,map_uint64_find:0.0025,map_uint64_insert:0.0195,map_uint64_erase:0.0111,map_uint64_mem:16176,umap_int32_find:0.0017,umap_int32_insert:0.0103,umap_int32_erase:0.0037,umap_int32_mem:10784,umap_uint64_find:0.0016,umap_uint64_insert:0.0091,umap_uint64_erase:0.0030,umap_uint64_mem:10784},
  {pattern:"random",N:506,kntrie_int32_find:0.0063,kntrie_int32_insert:0.0444,kntrie_int32_erase:0.0144,kntrie_int32_mem:6152,kntrie_uint64_find:0.0073,kntrie_uint64_insert:0.0589,kntrie_uint64_erase:0.0176,kntrie_uint64_mem:8200,map_int32_find:0.0041,map_int32_insert:0.0420,map_int32_erase:0.0237,map_int32_mem:24288,map_uint64_find:0.0041,map_uint64_insert:0.0382,map_uint64_erase:0.0272,map_uint64_mem:24288,umap_int32_find:0.0025,umap_int32_insert:0.0144,umap_int32_erase:0.0047,umap_int32_mem:16472,umap_uint64_find:0.0024,umap_uint64_insert:0.0146,umap_uint64_erase:0.0047,umap_uint64_mem:16472},
  {pattern:"random",N:759,kntrie_int32_find:0.0097,kntrie_int32_insert:0.0701,kntrie_int32_erase:0.0233,kntrie_int32_mem:10248,kntrie_uint64_find:0.0106,kntrie_uint64_insert:0.0665,kntrie_uint64_erase:0.0206,kntrie_uint64_mem:12296,map_int32_find:0.0070,map_int32_insert:0.0690,map_int32_erase:0.0377,map_int32_mem:36432,map_uint64_find:0.0070,map_uint64_insert:0.0615,map_uint64_erase:0.0381,map_uint64_mem:36432,umap_int32_find:0.0039,umap_int32_insert:0.0237,umap_int32_erase:0.0075,umap_int32_mem:24304,umap_uint64_find:0.0037,umap_uint64_insert:0.0207,umap_uint64_erase:0.0073,umap_uint64_mem:24304},
  {pattern:"random",N:1139,kntrie_int32_find:0.0172,kntrie_int32_insert:0.1219,kntrie_int32_erase:0.0343,kntrie_int32_mem:14344,kntrie_uint64_find:0.0204,kntrie_uint64_insert:0.1146,kntrie_uint64_erase:0.0351,kntrie_uint64_mem:20488,map_int32_find:0.0170,map_int32_insert:0.1166,map_int32_erase:0.0647,map_int32_mem:54672,map_uint64_find:0.0171,map_uint64_insert:0.1055,map_uint64_erase:0.0610,map_uint64_mem:54672,umap_int32_find:0.0057,umap_int32_insert:0.0349,umap_int32_erase:0.0115,umap_int32_mem:36880,umap_uint64_find:0.0055,umap_uint64_insert:0.0295,umap_uint64_erase:0.0098,umap_uint64_mem:36880},
  {pattern:"random",N:1708,kntrie_int32_find:0.0429,kntrie_int32_insert:0.2099,kntrie_int32_erase:0.0564,kntrie_int32_mem:24584,kntrie_uint64_find:0.0461,kntrie_uint64_insert:0.1819,kntrie_uint64_erase:0.0513,kntrie_uint64_mem:28680,map_int32_find:0.0355,map_int32_insert:0.1950,map_int32_erase:0.1099,map_int32_mem:81984,map_uint64_find:0.0349,map_uint64_insert:0.1572,map_uint64_erase:0.1002,map_uint64_mem:81984,umap_int32_find:0.0100,umap_int32_insert:0.0675,umap_int32_erase:0.0231,umap_int32_mem:54920,umap_uint64_find:0.0088,umap_uint64_insert:0.0495,umap_uint64_erase:0.0177,umap_uint64_mem:54920},
  {pattern:"random",N:2562,kntrie_int32_find:0.0852,kntrie_int32_insert:0.3144,kntrie_int32_erase:0.0805,kntrie_int32_mem:32776,kntrie_uint64_find:0.0885,kntrie_uint64_insert:0.3059,kntrie_uint64_erase:0.0819,kntrie_uint64_mem:49160,map_int32_find:0.0601,map_int32_insert:0.2888,map_int32_erase:0.1559,map_int32_mem:122976,map_uint64_find:0.0729,map_uint64_insert:0.2776,map_uint64_erase:0.1707,map_uint64_mem:122976,umap_int32_find:0.0135,umap_int32_insert:0.0731,umap_int32_erase:0.0287,umap_int32_mem:83512,umap_uint64_find:0.0135,umap_uint64_insert:0.0707,umap_uint64_erase:0.0296,umap_uint64_mem:83512},
  {pattern:"random",N:3844,kntrie_int32_find:0.1522,kntrie_int32_insert:0.4628,kntrie_int32_erase:0.1282,kntrie_int32_mem:49160,kntrie_uint64_find:0.1716,kntrie_uint64_insert:0.6120,kntrie_uint64_erase:0.2320,kntrie_uint64_mem:65544,map_int32_find:0.1116,map_int32_insert:0.4762,map_int32_erase:0.2587,map_int32_mem:184512,map_uint64_find:0.1231,map_uint64_insert:0.4427,map_uint64_erase:0.2657,map_uint64_mem:184512,umap_int32_find:0.0234,umap_int32_insert:0.1164,umap_int32_erase:0.0548,umap_int32_mem:124472,umap_uint64_find:0.0200,umap_uint64_insert:0.1067,umap_uint64_erase:0.0532,umap_uint64_mem:124472},
  {pattern:"random",N:5766,kntrie_int32_find:0.1513,kntrie_int32_insert:0.8333,kntrie_int32_erase:0.1699,kntrie_int32_mem:82856,kntrie_uint64_find:0.1623,kntrie_uint64_insert:1.0779,kntrie_uint64_erase:0.1636,kntrie_uint64_mem:105352,map_int32_find:0.1995,map_int32_insert:0.7647,map_int32_erase:0.4213,map_int32_mem:276768,map_uint64_find:0.2161,map_uint64_insert:0.7303,map_uint64_erase:0.4233,map_uint64_mem:276768,umap_int32_find:0.0408,umap_int32_insert:0.1833,umap_int32_erase:0.0817,umap_int32_mem:186008,umap_uint64_find:0.0324,umap_uint64_insert:0.1883,umap_uint64_erase:0.0882,umap_uint64_mem:186008},
  {pattern:"random",N:8649,kntrie_int32_find:0.2812,kntrie_int32_insert:0.9868,kntrie_int32_erase:0.2454,kntrie_int32_mem:119112,kntrie_uint64_find:0.2969,kntrie_uint64_insert:0.9455,kntrie_uint64_erase:0.2464,kntrie_uint64_mem:156936,map_int32_find:0.3542,map_int32_insert:1.2504,map_int32_erase:0.6974,map_int32_mem:415152,map_uint64_find:0.3885,map_uint64_insert:1.2467,map_uint64_erase:0.7884,map_uint64_mem:415152,umap_int32_find:0.0777,umap_int32_insert:0.2750,umap_int32_erase:0.1324,umap_int32_mem:277840,umap_uint64_find:0.0708,umap_uint64_insert:0.2790,umap_uint64_erase:0.1358,umap_uint64_mem:277840},
  {pattern:"random",N:12974,kntrie_int32_find:0.4599,kntrie_int32_insert:1.2697,kntrie_int32_erase:0.3723,kntrie_int32_mem:178504,kntrie_uint64_find:0.4753,kntrie_uint64_insert:1.4318,kntrie_uint64_erase:0.4103,kntrie_uint64_mem:229128,map_int32_find:0.6265,map_int32_insert:2.1081,map_int32_erase:1.1617,map_int32_mem:622752,map_uint64_find:0.6531,map_uint64_insert:2.0314,map_uint64_erase:1.0902,map_uint64_mem:622752,umap_int32_find:0.1753,umap_int32_insert:0.4223,umap_int32_erase:0.2094,umap_int32_mem:415240,umap_uint64_find:0.1604,umap_uint64_insert:0.3988,umap_uint64_erase:0.1995,umap_uint64_mem:415240},
  {pattern:"random",N:19461,kntrie_int32_find:0.7328,kntrie_int32_insert:1.8129,kntrie_int32_erase:0.5944,kntrie_int32_mem:261256,kntrie_uint64_find:0.7586,kntrie_uint64_insert:1.6726,kntrie_uint64_erase:0.5880,kntrie_uint64_mem:349448,map_int32_find:1.0459,map_int32_insert:3.3890,map_int32_erase:1.8542,map_int32_mem:934128,map_uint64_find:1.0341,map_uint64_insert:3.2218,map_uint64_erase:1.7716,map_uint64_mem:934128,umap_int32_find:0.2899,umap_int32_insert:0.6180,umap_int32_erase:0.3075,umap_int32_mem:633088,umap_uint64_find:0.2689,umap_uint64_insert:0.5902,umap_uint64_erase:0.3012,umap_uint64_mem:633088},
  {pattern:"random",N:29192,kntrie_int32_find:1.1279,kntrie_int32_insert:2.5025,kntrie_int32_erase:0.9488,kntrie_int32_mem:392456,kntrie_uint64_find:1.2272,kntrie_uint64_insert:2.4380,kntrie_uint64_erase:0.9719,kntrie_uint64_mem:512008,map_int32_find:1.7405,map_int32_insert:5.4903,map_int32_erase:2.9482,map_int32_mem:1401216,map_uint64_find:1.7448,map_uint64_insert:5.0213,map_uint64_erase:2.8724,map_uint64_mem:1401216,umap_int32_find:0.4579,umap_int32_insert:0.9101,umap_int32_erase:0.4554,umap_int32_mem:946424,umap_uint64_find:0.4618,umap_uint64_insert:0.8933,umap_uint64_erase:0.4664,umap_uint64_mem:946424},
  {pattern:"random",N:43789,kntrie_int32_find:1.8257,kntrie_int32_insert:3.6387,kntrie_int32_erase:1.4927,kntrie_int32_mem:594952,kntrie_uint64_find:1.9815,kntrie_uint64_insert:3.6982,kntrie_uint64_erase:1.6093,kntrie_uint64_mem:773640,map_int32_find:2.9569,map_int32_insert:9.0899,map_int32_erase:5.0115,map_int32_mem:2101872,map_uint64_find:3.2918,map_uint64_insert:9.2876,map_uint64_erase:5.2970,map_uint64_mem:2101872,umap_int32_find:0.7476,umap_int32_insert:1.4151,umap_int32_erase:0.7488,umap_int32_mem:1414784,umap_uint64_find:0.7762,umap_uint64_insert:1.4528,umap_uint64_erase:0.7927,umap_uint64_mem:1414784},
  {pattern:"random",N:65684,kntrie_int32_find:3.4613,kntrie_int32_insert:5.5312,kntrie_int32_erase:2.5424,kntrie_int32_mem:857096,kntrie_uint64_find:3.7976,kntrie_uint64_insert:6.0247,kntrie_uint64_erase:2.8238,kntrie_uint64_mem:1186312,map_int32_find:5.2734,map_int32_insert:15.6662,map_int32_erase:8.8413,map_int32_mem:3152832,map_uint64_find:5.7944,map_uint64_insert:14.9770,map_uint64_erase:9.0384,map_uint64_mem:3152832,umap_int32_find:1.3026,umap_int32_insert:2.3358,umap_int32_erase:1.2853,umap_int32_mem:2114872,umap_uint64_find:1.2896,umap_uint64_insert:2.3301,umap_uint64_erase:1.3296,umap_uint64_mem:2114872},
  {pattern:"random",N:98523,kntrie_int32_find:4.9655,kntrie_int32_insert:9.2855,kntrie_int32_erase:4.1139,kntrie_int32_mem:1316360,map_int32_find:9.5109,map_int32_insert:26.5369,map_int32_erase:14.8877,map_int32_mem:4729104,umap_int32_find:2.1626,umap_int32_insert:3.8702,umap_int32_erase:2.2329,umap_int32_mem:3162416},
  {pattern:"random",N:98526,kntrie_uint64_find:5.4940,kntrie_uint64_insert:9.8907,kntrie_uint64_erase:4.3350,kntrie_uint64_mem:1712648,map_uint64_find:9.8491,map_uint64_insert:25.9182,map_uint64_erase:15.3946,map_uint64_mem:4729248,umap_uint64_find:2.2254,umap_uint64_insert:3.9361,umap_uint64_erase:2.3387,umap_uint64_mem:3162488},
  {pattern:"random",N:147785,kntrie_int32_find:7.8961,kntrie_int32_insert:15.6653,kntrie_int32_erase:5.7398,kntrie_int32_mem:1890824,map_int32_find:17.1819,map_int32_insert:49.3755,map_int32_erase:27.7120,map_int32_mem:7093680,umap_int32_find:3.4317,umap_int32_insert:6.6640,umap_int32_erase:3.6383,umap_int32_mem:4729184},
  {pattern:"random",N:147789,kntrie_uint64_find:8.8203,kntrie_uint64_insert:16.9838,kntrie_uint64_erase:6.0890,kntrie_uint64_mem:2624008,map_uint64_find:16.8670,map_uint64_insert:43.7714,map_uint64_erase:26.0873,map_uint64_mem:7093872,umap_uint64_find:3.5310,umap_uint64_insert:6.6581,umap_uint64_erase:3.7259,umap_uint64_mem:4729280},
  {pattern:"random",N:221675,kntrie_int32_find:12.6241,kntrie_int32_insert:26.8320,kntrie_int32_erase:9.3521,kntrie_int32_mem:2986504,map_int32_find:33.7307,map_int32_insert:90.9370,map_int32_erase:49.2340,map_int32_mem:10640400,umap_int32_find:5.6533,umap_int32_insert:11.9381,umap_int32_erase:6.4621,umap_int32_mem:7215376},
  {pattern:"random",N:221683,kntrie_uint64_find:14.3200,kntrie_uint64_insert:27.7920,kntrie_uint64_erase:9.6908,kntrie_uint64_mem:3756552,map_uint64_find:31.5988,map_uint64_insert:78.7400,map_uint64_erase:46.2377,map_uint64_mem:10640784,umap_uint64_find:5.4424,umap_uint64_insert:10.9173,umap_uint64_erase:6.0321,umap_uint64_mem:7215568},
  {pattern:"random",N:332509,kntrie_int32_find:19.5666,kntrie_int32_insert:43.6034,kntrie_int32_erase:13.7140,kntrie_int32_mem:4248072,map_int32_find:57.0047,map_int32_insert:156.6402,map_int32_erase:83.8993,map_int32_mem:15960432,umap_int32_find:9.2047,umap_int32_insert:18.9712,umap_int32_erase:10.1218,umap_int32_mem:10788704},
  {pattern:"random",N:332525,kntrie_uint64_find:25.7881,kntrie_uint64_insert:47.2041,kntrie_uint64_erase:16.9093,kntrie_uint64_mem:5982728,map_uint64_find:59.4575,map_uint64_insert:148.5526,map_uint64_erase:83.4964,map_uint64_mem:15961200,umap_uint64_find:9.3770,umap_uint64_insert:18.9025,umap_uint64_erase:12.0801,umap_uint64_mem:10789088},
  {pattern:"random",N:498753,kntrie_int32_find:33.3509,kntrie_int32_insert:72.2651,kntrie_int32_erase:23.3705,kntrie_int32_mem:6318600,map_int32_find:95.3589,map_int32_insert:251.3463,map_int32_erase:138.8057,map_int32_mem:23940144,umap_int32_find:14.6792,umap_int32_insert:29.8048,umap_int32_erase:16.1166,umap_int32_mem:16132000},
  {pattern:"random",N:498788,kntrie_uint64_find:45.6822,kntrie_uint64_insert:81.3473,kntrie_uint64_erase:28.2788,kntrie_uint64_mem:8423944,map_uint64_find:97.6112,map_uint64_insert:239.4858,map_uint64_erase:136.6072,map_uint64_mem:23941824,umap_uint64_find:14.5396,umap_uint64_insert:29.5319,umap_uint64_erase:15.6524,umap_uint64_mem:16132840},
  {pattern:"random",N:748117,kntrie_int32_find:63.3091,kntrie_int32_insert:127.2731,kntrie_int32_erase:39.5147,kntrie_int32_mem:10488328,map_int32_find:162.5264,map_int32_insert:430.9251,map_int32_erase:230.9748,map_int32_mem:35909616,umap_int32_find:23.0450,umap_int32_insert:48.5194,umap_int32_erase:25.2513,umap_int32_mem:24123200},
  {pattern:"random",N:748182,kntrie_uint64_find:79.7445,kntrie_uint64_insert:134.1791,kntrie_uint64_erase:47.9047,kntrie_uint64_mem:12585480,map_uint64_find:167.6763,map_uint64_insert:415.8908,map_uint64_erase:226.2605,map_uint64_mem:35912736,umap_uint64_find:22.7619,umap_uint64_insert:47.7841,umap_uint64_erase:24.5361,umap_uint64_mem:24124760},
  {pattern:"random",N:1122145,kntrie_int32_find:85.0313,kntrie_int32_insert:228.6937,kntrie_int32_erase:65.5186,kntrie_int32_mem:14016976,umap_int32_find:36.5355,umap_int32_insert:75.8708,umap_int32_erase:39.6348,umap_int32_mem:36074048},
  {pattern:"random",N:1122274,kntrie_uint64_find:89.2617,kntrie_uint64_insert:248.0191,kntrie_uint64_erase:69.5810,kntrie_uint64_mem:20960600,umap_uint64_find:37.2189,umap_uint64_insert:78.6699,umap_uint64_erase:43.0111,umap_uint64_mem:36077144},
  {pattern:"random",N:1683111,kntrie_int32_find:129.1506,kntrie_int32_insert:313.8319,kntrie_int32_erase:109.7006,kntrie_int32_mem:20232840,umap_int32_find:58.7018,umap_int32_insert:122.3644,umap_int32_erase:62.5238,umap_int32_mem:53945536},
  {pattern:"random",N:1683411,kntrie_uint64_find:143.2248,kntrie_uint64_insert:346.4040,kntrie_uint64_erase:119.8525,kntrie_uint64_mem:30631304,umap_uint64_find:58.7161,umap_uint64_insert:121.0439,umap_uint64_erase:62.5845,umap_uint64_mem:53952736},
  {pattern:"random",N:2524384,kntrie_int32_find:209.5697,kntrie_int32_insert:431.5091,kntrie_int32_erase:179.0469,kntrie_int32_mem:29209640,umap_int32_find:92.2470,umap_int32_insert:188.6297,umap_int32_erase:96.2707,umap_int32_mem:82315208},
  {pattern:"random",N:2525116,kntrie_uint64_find:245.4437,kntrie_uint64_insert:470.9691,kntrie_uint64_erase:196.0777,kntrie_uint64_mem:45664136,umap_uint64_find:90.3164,umap_uint64_insert:189.1697,umap_uint64_erase:95.5037,umap_uint64_mem:82332776},
  {pattern:"random",N:3786033,kntrie_int32_find:341.3090,kntrie_int32_insert:647.3966,kntrie_int32_erase:295.8505,kntrie_int32_mem:43642184,umap_int32_find:147.4510,umap_int32_insert:287.3919,umap_int32_erase:156.3846,umap_int32_mem:123073040},
  {pattern:"random",N:3787675,kntrie_uint64_find:415.3791,kntrie_uint64_insert:694.8190,kntrie_uint64_erase:329.7232,kntrie_uint64_mem:67563080,umap_uint64_find:145.2465,umap_uint64_insert:315.3684,umap_uint64_erase:170.2588,umap_uint64_mem:123112448},
  {pattern:"random",N:5677748,kntrie_int32_find:560.4415,kntrie_int32_insert:990.3806,kntrie_int32_erase:487.9353,kntrie_int32_mem:63048200,umap_int32_find:264.6848,umap_int32_insert:564.0599,umap_int32_erase:278.3284,umap_int32_mem:184004728},
  {pattern:"random",N:5681512,kntrie_uint64_find:685.7881,kntrie_uint64_insert:1105.1236,kntrie_uint64_erase:550.2784,kntrie_uint64_mem:100474632,umap_uint64_find:251.8141,umap_uint64_insert:550.7375,umap_uint64_erase:303.5906,umap_uint64_mem:184095064},
  {pattern:"sequential",N:100,kntrie_int32_find:0.0010,kntrie_int32_insert:0.0043,kntrie_int32_erase:0.0018,kntrie_int32_mem:1288,kntrie_uint64_find:0.0011,kntrie_uint64_insert:0.0038,kntrie_uint64_erase:0.0014,kntrie_uint64_mem:1800,map_int32_find:0.0006,map_int32_insert:0.0067,map_int32_erase:0.0042,map_int32_mem:4800,map_uint64_find:0.0007,map_uint64_insert:0.0031,map_uint64_erase:0.0019,map_uint64_mem:4800,umap_int32_find:0.0003,umap_int32_insert:0.0013,umap_int32_erase:0.0007,umap_int32_mem:3224,umap_uint64_find:0.0003,umap_uint64_insert:0.0013,umap_uint64_erase:0.0007,umap_uint64_mem:3224},
  {pattern:"sequential",N:150,kntrie_int32_find:0.0015,kntrie_int32_insert:0.0067,kntrie_int32_erase:0.0025,kntrie_int32_mem:2056,kntrie_uint64_find:0.0017,kntrie_uint64_insert:0.0053,kntrie_uint64_erase:0.0022,kntrie_uint64_mem:2568,map_int32_find:0.0009,map_int32_insert:0.0069,map_int32_erase:0.0034,map_int32_mem:7200,map_uint64_find:0.0009,map_uint64_insert:0.0053,map_uint64_erase:0.0046,map_uint64_mem:7200,umap_int32_find:0.0005,umap_int32_insert:0.0038,umap_int32_erase:0.0013,umap_int32_mem:4856,umap_uint64_find:0.0005,umap_uint64_insert:0.0035,umap_uint64_erase:0.0010,umap_uint64_mem:4856},
  {pattern:"sequential",N:225,kntrie_int32_find:0.0025,kntrie_int32_insert:0.0094,kntrie_int32_erase:0.0042,kntrie_int32_mem:3080,kntrie_uint64_find:0.0027,kntrie_uint64_insert:0.0089,kntrie_uint64_erase:0.0040,kntrie_uint64_mem:4104,map_int32_find:0.0015,map_int32_insert:0.0105,map_int32_erase:0.0065,map_int32_mem:10800,map_uint64_find:0.0014,map_uint64_insert:0.0094,map_uint64_erase:0.0050,map_uint64_mem:10800,umap_int32_find:0.0007,umap_int32_insert:0.0052,umap_int32_erase:0.0017,umap_int32_mem:7216,umap_uint64_find:0.0007,umap_uint64_insert:0.0052,umap_uint64_erase:0.0016,umap_uint64_mem:7216},
  {pattern:"sequential",N:337,kntrie_int32_find:0.0038,kntrie_int32_insert:0.0206,kntrie_int32_erase:0.0073,kntrie_int32_mem:4104,kntrie_uint64_find:0.0043,kntrie_uint64_insert:0.0182,kntrie_uint64_erase:0.0069,kntrie_uint64_mem:6152,map_int32_find:0.0027,map_int32_insert:0.0245,map_int32_erase:0.0132,map_int32_mem:16176,map_uint64_find:0.0024,map_uint64_insert:0.0185,map_uint64_erase:0.0103,map_uint64_mem:16176,umap_int32_find:0.0011,umap_int32_insert:0.0077,umap_int32_erase:0.0021,umap_int32_mem:10784,umap_uint64_find:0.0011,umap_uint64_insert:0.0073,umap_uint64_erase:0.0024,umap_uint64_mem:10784},
  {pattern:"sequential",N:506,kntrie_int32_find:0.0063,kntrie_int32_insert:0.0362,kntrie_int32_erase:0.0142,kntrie_int32_mem:6152,kntrie_uint64_find:0.0068,kntrie_uint64_insert:0.0381,kntrie_uint64_erase:0.0136,kntrie_uint64_mem:8200,map_int32_find:0.0042,map_int32_insert:0.0363,map_int32_erase:0.0186,map_int32_mem:24288,map_uint64_find:0.0042,map_uint64_insert:0.0309,map_uint64_erase:0.0176,map_uint64_mem:24288,umap_int32_find:0.0017,umap_int32_insert:0.0111,umap_int32_erase:0.0031,umap_int32_mem:16472,umap_uint64_find:0.0017,umap_uint64_insert:0.0106,umap_uint64_erase:0.0032,umap_uint64_mem:16472},
  {pattern:"sequential",N:759,kntrie_int32_find:0.0099,kntrie_int32_insert:0.0704,kntrie_int32_erase:0.0240,kntrie_int32_mem:10248,kntrie_uint64_find:0.0108,kntrie_uint64_insert:0.0705,kntrie_uint64_erase:0.0188,kntrie_uint64_mem:12296,map_int32_find:0.0071,map_int32_insert:0.0666,map_int32_erase:0.0401,map_int32_mem:36432,map_uint64_find:0.0074,map_uint64_insert:0.0540,map_uint64_erase:0.0299,map_uint64_mem:36432,umap_int32_find:0.0026,umap_int32_insert:0.0167,umap_int32_erase:0.0044,umap_int32_mem:24304,umap_uint64_find:0.0025,umap_uint64_insert:0.0154,umap_uint64_erase:0.0043,umap_uint64_mem:24304},
  {pattern:"sequential",N:1139,kntrie_int32_find:0.0181,kntrie_int32_insert:0.1136,kntrie_int32_erase:0.0355,kntrie_int32_mem:14344,kntrie_uint64_find:0.0190,kntrie_uint64_insert:0.1108,kntrie_uint64_erase:0.0328,kntrie_uint64_mem:20488,map_int32_find:0.0174,map_int32_insert:0.1169,map_int32_erase:0.0638,map_int32_mem:54672,map_uint64_find:0.0184,map_uint64_insert:0.1024,map_uint64_erase:0.0619,map_uint64_mem:54672,umap_int32_find:0.0039,umap_int32_insert:0.0248,umap_int32_erase:0.0071,umap_int32_mem:36880,umap_uint64_find:0.0037,umap_uint64_insert:0.0219,umap_uint64_erase:0.0062,umap_uint64_mem:36880},
  {pattern:"sequential",N:1708,kntrie_int32_find:0.0418,kntrie_int32_insert:0.2191,kntrie_int32_erase:0.0536,kntrie_int32_mem:24584,kntrie_uint64_find:0.0449,kntrie_uint64_insert:0.1884,kntrie_uint64_erase:0.0525,kntrie_uint64_mem:28680,map_int32_find:0.0366,map_int32_insert:0.1954,map_int32_erase:0.1036,map_int32_mem:81984,map_uint64_find:0.0338,map_uint64_insert:0.1591,map_uint64_erase:0.0973,map_uint64_mem:81984,umap_int32_find:0.0057,umap_int32_insert:0.0350,umap_int32_erase:0.0103,umap_int32_mem:54920,umap_uint64_find:0.0057,umap_uint64_insert:0.0328,umap_uint64_erase:0.0098,umap_uint64_mem:54920},
  {pattern:"sequential",N:2562,kntrie_int32_find:0.0837,kntrie_int32_insert:0.3471,kntrie_int32_erase:0.0811,kntrie_int32_mem:32776,kntrie_uint64_find:0.0882,kntrie_uint64_insert:0.3308,kntrie_uint64_erase:0.0806,kntrie_uint64_mem:49160,map_int32_find:0.0649,map_int32_insert:0.3003,map_int32_erase:0.1669,map_int32_mem:122976,map_uint64_find:0.0678,map_uint64_insert:0.2622,map_uint64_erase:0.1548,map_uint64_mem:122976,umap_int32_find:0.0085,umap_int32_insert:0.0491,umap_int32_erase:0.0153,umap_int32_mem:83512,umap_uint64_find:0.0084,umap_uint64_insert:0.0478,umap_uint64_erase:0.0155,umap_uint64_mem:83512},
  {pattern:"sequential",N:3844,kntrie_int32_find:0.1485,kntrie_int32_insert:0.5076,kntrie_int32_erase:0.1260,kntrie_int32_mem:49160,kntrie_uint64_find:0.1523,kntrie_uint64_insert:0.4804,kntrie_uint64_erase:0.1203,kntrie_uint64_mem:65544,map_int32_find:0.1176,map_int32_insert:0.4919,map_int32_erase:0.2715,map_int32_mem:184512,map_uint64_find:0.1104,map_uint64_insert:0.4321,map_uint64_erase:0.2393,map_uint64_mem:184512,umap_int32_find:0.0129,umap_int32_insert:0.0772,umap_int32_erase:0.0241,umap_int32_mem:124472,umap_uint64_find:0.0125,umap_uint64_insert:0.0665,umap_uint64_erase:0.0220,umap_uint64_mem:124472},
  {pattern:"sequential",N:5766,kntrie_int32_find:0.0474,kntrie_int32_insert:0.7650,kntrie_int32_erase:0.1062,kntrie_int32_mem:57864,kntrie_uint64_find:0.0548,kntrie_uint64_insert:0.7116,kntrie_uint64_erase:0.1130,kntrie_uint64_mem:57864,map_int32_find:0.2129,map_int32_insert:0.8041,map_int32_erase:0.4333,map_int32_mem:276768,map_uint64_find:0.2251,map_uint64_insert:0.7241,map_uint64_erase:0.4316,map_uint64_mem:276768,umap_int32_find:0.0195,umap_int32_insert:0.1081,umap_int32_erase:0.0354,umap_int32_mem:186008,umap_uint64_find:0.0197,umap_uint64_insert:0.1070,umap_uint64_erase:0.0354,umap_uint64_mem:186008},
  {pattern:"sequential",N:8649,kntrie_int32_find:0.0665,kntrie_int32_insert:0.8491,kntrie_int32_erase:0.1611,kntrie_int32_mem:86664,kntrie_uint64_find:0.0878,kntrie_uint64_insert:0.8569,kntrie_uint64_erase:0.1757,kntrie_uint64_mem:86664,map_int32_find:0.3506,map_int32_insert:1.2763,map_int32_erase:0.7068,map_int32_mem:415152,map_uint64_find:0.3836,map_uint64_insert:1.2645,map_uint64_erase:0.7357,map_uint64_mem:415152,umap_int32_find:0.0292,umap_int32_insert:0.1609,umap_int32_erase:0.0546,umap_int32_mem:277840,umap_uint64_find:0.0294,umap_uint64_insert:0.1542,umap_uint64_erase:0.0536,umap_uint64_mem:277840},
  {pattern:"sequential",N:12974,kntrie_int32_find:0.1062,kntrie_int32_insert:1.0688,kntrie_int32_erase:0.2447,kntrie_int32_mem:130056,kntrie_uint64_find:0.1237,kntrie_uint64_insert:1.0437,kntrie_uint64_erase:0.2763,kntrie_uint64_mem:130056,map_int32_find:0.6142,map_int32_insert:2.1807,map_int32_erase:1.1564,map_int32_mem:622752,map_uint64_find:0.6171,map_uint64_insert:1.9482,map_uint64_erase:1.1272,map_uint64_mem:622752,umap_int32_find:0.0433,umap_int32_insert:0.2384,umap_int32_erase:0.0816,umap_int32_mem:415240,umap_uint64_find:0.0443,umap_uint64_insert:0.2271,umap_uint64_erase:0.0788,umap_uint64_mem:415240},
  {pattern:"sequential",N:19461,kntrie_int32_find:0.1701,kntrie_int32_insert:1.3207,kntrie_int32_erase:0.3947,kntrie_int32_mem:195432,kntrie_uint64_find:0.1990,kntrie_uint64_insert:1.3953,kntrie_uint64_erase:0.4448,kntrie_uint64_mem:195432,map_int32_find:1.0085,map_int32_insert:3.4192,map_int32_erase:1.8137,map_int32_mem:934128,map_uint64_find:1.0516,map_uint64_insert:3.2575,map_uint64_erase:1.8356,map_uint64_mem:934128,umap_int32_find:0.0640,umap_int32_insert:0.3495,umap_int32_erase:0.1184,umap_int32_mem:633088,umap_uint64_find:0.0668,umap_uint64_insert:0.3474,umap_uint64_erase:0.1358,umap_uint64_mem:633088},
  {pattern:"sequential",N:29192,kntrie_int32_find:0.2350,kntrie_int32_insert:1.8532,kntrie_int32_erase:0.5920,kntrie_int32_mem:292984,kntrie_uint64_find:0.3054,kntrie_uint64_insert:1.8782,kntrie_uint64_erase:0.6665,kntrie_uint64_mem:292984,map_int32_find:1.7733,map_int32_insert:5.5826,map_int32_erase:3.0264,map_int32_mem:1401216,map_uint64_find:1.8131,map_uint64_insert:5.2607,map_uint64_erase:2.9631,map_uint64_mem:1401216,umap_int32_find:0.1046,umap_int32_insert:0.5368,umap_int32_erase:0.1821,umap_int32_mem:946424,umap_uint64_find:0.1082,umap_uint64_insert:0.4779,umap_uint64_erase:0.1844,umap_uint64_mem:946424},
  {pattern:"sequential",N:43789,kntrie_int32_find:0.3739,kntrie_int32_insert:2.5151,kntrie_int32_erase:0.9338,kntrie_int32_mem:439464,kntrie_uint64_find:0.4772,kntrie_uint64_insert:2.6824,kntrie_uint64_erase:1.0384,kntrie_uint64_mem:439464,map_int32_find:3.0230,map_int32_insert:9.0846,map_int32_erase:5.1902,map_int32_mem:2101872,map_uint64_find:3.1918,map_uint64_insert:8.9140,map_uint64_erase:5.0983,map_uint64_mem:2101872,umap_int32_find:0.1906,umap_int32_insert:0.8020,umap_int32_erase:0.2798,umap_int32_mem:1414784,umap_uint64_find:0.1899,umap_uint64_insert:0.7410,umap_uint64_erase:0.2725,umap_uint64_mem:1414784},
  {pattern:"sequential",N:65684,kntrie_int32_find:0.8353,kntrie_int32_insert:4.1194,kntrie_int32_erase:1.6985,kntrie_int32_mem:659544,kntrie_uint64_find:0.9891,kntrie_uint64_insert:4.3635,kntrie_uint64_erase:1.8084,kntrie_uint64_mem:659544,map_int32_find:5.4622,map_int32_insert:15.7299,map_int32_erase:8.9265,map_int32_mem:3152832,map_uint64_find:5.6692,map_uint64_insert:15.3106,map_uint64_erase:8.8506,map_uint64_mem:3152832,umap_int32_find:0.3744,umap_int32_insert:1.1567,umap_int32_erase:0.4371,umap_int32_mem:2114872,umap_uint64_find:0.4136,umap_uint64_insert:1.2337,umap_uint64_erase:0.4779,umap_uint64_mem:2114872},
  {pattern:"sequential",N:98526,kntrie_int32_find:1.3078,kntrie_int32_insert:6.5681,kntrie_int32_erase:2.6844,kntrie_int32_mem:989016,kntrie_uint64_find:1.6888,kntrie_uint64_insert:7.2546,kntrie_uint64_erase:2.8883,kntrie_uint64_mem:989016,map_int32_find:9.5561,map_int32_insert:27.3716,map_int32_erase:15.1128,map_int32_mem:4729248,map_uint64_find:9.8653,map_uint64_insert:25.9315,map_uint64_erase:15.4071,map_uint64_mem:4729248,umap_int32_find:0.6601,umap_int32_insert:1.7821,umap_int32_erase:0.7595,umap_int32_mem:3162488,umap_uint64_find:0.6960,umap_uint64_insert:1.8586,umap_uint64_erase:0.7972,umap_uint64_mem:3162488},
  {pattern:"sequential",N:147789,kntrie_int32_find:2.1280,kntrie_int32_insert:10.0132,kntrie_int32_erase:4.1552,kntrie_int32_mem:1483736,kntrie_uint64_find:2.8309,kntrie_uint64_insert:10.5497,kntrie_uint64_erase:4.3703,kntrie_uint64_mem:1483736,map_int32_find:17.6508,map_int32_insert:50.5468,map_int32_erase:28.0222,map_int32_mem:7093872,map_uint64_find:18.0210,map_uint64_insert:49.7183,map_uint64_erase:27.8912,map_uint64_mem:7093872,umap_int32_find:1.1328,umap_int32_insert:2.9897,umap_int32_erase:1.3147,umap_int32_mem:4729280,umap_uint64_find:1.1622,umap_uint64_insert:3.1549,umap_uint64_erase:1.4840,umap_uint64_mem:4729280},
  {pattern:"sequential",N:221683,kntrie_int32_find:3.8196,kntrie_int32_insert:15.5131,kntrie_int32_erase:6.5345,kntrie_int32_mem:2225128,kntrie_uint64_find:4.8212,kntrie_uint64_insert:16.1587,kntrie_uint64_erase:6.8165,kntrie_uint64_mem:2225128,map_int32_find:34.3029,map_int32_insert:91.8101,map_int32_erase:50.1511,map_int32_mem:10640784,map_uint64_find:33.4736,map_uint64_insert:86.0453,map_uint64_erase:48.6594,map_uint64_mem:10640784,umap_int32_find:1.9571,umap_int32_insert:5.1659,umap_int32_erase:2.2527,umap_int32_mem:7215568,umap_uint64_find:1.8213,umap_uint64_insert:5.0504,umap_uint64_erase:2.2003,umap_uint64_mem:7215568},
  {pattern:"sequential",N:332525,kntrie_int32_find:6.6165,kntrie_int32_insert:24.0064,kntrie_int32_erase:10.3765,kntrie_int32_mem:3338072,kntrie_uint64_find:7.6154,kntrie_uint64_insert:26.0783,kntrie_uint64_erase:11.1154,kntrie_uint64_mem:3338072,map_int32_find:59.1105,map_int32_insert:157.2820,map_int32_erase:86.3496,map_int32_mem:15961200,map_uint64_find:59.5284,map_uint64_insert:151.4958,map_uint64_erase:82.9236,map_uint64_mem:15961200,umap_int32_find:3.2218,umap_int32_insert:8.2003,umap_int32_erase:3.5358,umap_int32_mem:10789088,umap_uint64_find:3.1220,umap_uint64_insert:7.9430,umap_uint64_erase:3.4438,umap_uint64_mem:10789088},
  {pattern:"sequential",N:498788,kntrie_int32_find:10.7099,kntrie_int32_insert:37.6867,kntrie_int32_erase:17.5686,kntrie_int32_mem:5007368,kntrie_uint64_find:11.9165,kntrie_uint64_insert:39.7035,kntrie_uint64_erase:18.0854,kntrie_uint64_mem:5007368,map_int32_find:101.7487,map_int32_insert:262.5598,map_int32_erase:142.3541,map_int32_mem:23941824,map_uint64_find:101.6378,map_uint64_insert:258.2584,map_uint64_erase:139.8175,map_uint64_mem:23941824,umap_int32_find:5.1749,umap_int32_insert:12.7013,umap_int32_erase:5.5205,umap_int32_mem:16132840,umap_uint64_find:4.9720,umap_uint64_insert:12.2108,umap_uint64_erase:5.2622,umap_uint64_mem:16132840},
  {pattern:"sequential",N:748182,kntrie_int32_find:18.2510,kntrie_int32_insert:62.2442,kntrie_int32_erase:30.7044,kntrie_int32_mem:7510952,kntrie_uint64_find:19.5090,kntrie_uint64_insert:63.0964,kntrie_uint64_erase:31.3095,kntrie_uint64_mem:7510952,map_int32_find:169.8697,map_int32_insert:435.8913,map_int32_erase:232.9332,map_int32_mem:35912736,map_uint64_find:167.0643,map_uint64_insert:434.1543,map_uint64_erase:232.6801,map_uint64_mem:35912736,umap_int32_find:8.5815,umap_int32_insert:19.2957,umap_int32_erase:8.4797,umap_int32_mem:24124760,umap_uint64_find:8.6912,umap_uint64_insert:20.3969,umap_uint64_erase:8.8012,umap_uint64_mem:24124760},
  {pattern:"sequential",N:1122274,kntrie_int32_find:30.2374,kntrie_int32_insert:101.6267,kntrie_int32_erase:54.8797,kntrie_int32_mem:11266600,kntrie_uint64_find:34.1628,kntrie_uint64_insert:106.3576,kntrie_uint64_erase:57.1995,kntrie_uint64_mem:11266600,umap_int32_find:14.1670,umap_int32_insert:33.6435,umap_int32_erase:13.7572,umap_int32_mem:36077144,umap_uint64_find:14.5008,umap_uint64_insert:32.8162,umap_uint64_erase:13.8761,umap_uint64_mem:36077144},
  {pattern:"sequential",N:1683411,kntrie_int32_find:51.1383,kntrie_int32_insert:172.3661,kntrie_int32_erase:93.8183,kntrie_int32_mem:16899656,kntrie_uint64_find:56.3011,kntrie_uint64_insert:178.9897,kntrie_uint64_erase:93.2621,kntrie_uint64_mem:16899656,umap_int32_find:22.1114,umap_int32_insert:50.9068,umap_int32_erase:22.8020,umap_int32_mem:53952736,umap_uint64_find:24.8763,umap_uint64_insert:55.7090,umap_uint64_erase:26.5480,umap_uint64_mem:53952736},
  {pattern:"sequential",N:2525116,kntrie_int32_find:93.6989,kntrie_int32_insert:286.5795,kntrie_int32_erase:161.6090,kntrie_int32_mem:25350024,kntrie_uint64_find:96.1825,kntrie_uint64_insert:305.7109,kntrie_uint64_erase:164.2526,kntrie_uint64_mem:25350024,umap_int32_find:36.5662,umap_int32_insert:81.7212,umap_int32_erase:38.8880,umap_int32_mem:82332776,umap_uint64_find:39.1950,umap_uint64_insert:82.0179,umap_uint64_erase:39.5122,umap_uint64_mem:82332776},
  {pattern:"sequential",N:3787675,kntrie_int32_find:145.8787,kntrie_int32_insert:476.1640,kntrie_int32_erase:259.8500,kntrie_int32_mem:38025096,kntrie_uint64_find:155.0316,kntrie_uint64_insert:486.9208,kntrie_uint64_erase:271.8454,kntrie_uint64_mem:38025096,umap_int32_find:68.0954,umap_int32_insert:129.2046,umap_int32_erase:55.6674,umap_int32_mem:123112448,umap_uint64_find:63.3436,umap_uint64_insert:122.8567,umap_uint64_erase:55.8780,umap_uint64_mem:123112448},
  {pattern:"sequential",N:5681512,kntrie_int32_find:236.1595,kntrie_int32_insert:774.4711,kntrie_int32_erase:424.3945,kntrie_int32_mem:57037448,kntrie_uint64_find:268.9193,kntrie_uint64_insert:805.8148,kntrie_uint64_erase:444.2937,kntrie_uint64_mem:57037448,umap_int32_find:125.7718,umap_int32_insert:211.4675,umap_int32_erase:91.6127,umap_int32_mem:184095064,umap_uint64_find:129.1458,umap_uint64_insert:228.1964,umap_uint64_erase:104.1290,umap_uint64_mem:184095064},
];


const LINES = [
  { key: "kntrie_int32", color: "#3b82f6", dash: [], width: 2.5, label: "kntrie i32" },
  { key: "kntrie_uint64", color: "#93c5fd", dash: [6,3], width: 1.5, label: "kntrie u64" },
  { key: "map_int32", color: "#ef4444", dash: [], width: 2.5, label: "map i32" },
  { key: "map_uint64", color: "#fca5a5", dash: [6,3], width: 1.5, label: "map u64" },
  { key: "umap_int32", color: "#22c55e", dash: [], width: 2.5, label: "umap i32" },
  { key: "umap_uint64", color: "#86efac", dash: [6,3], width: 1.5, label: "umap u64" },
];

const MEM_LINES = [
  ...LINES,
  { key: "raw_int32", color: "#888", dash: [], width: 1, label: "raw i32" },
  { key: "raw_uint64", color: "#555", dash: [3,3], width: 1, label: "raw u64" },
];

const METRICS = [
  { id: "find", suffix: "find", convert: (ms, n) => (ms * 1e6) / n },
  { id: "insert", suffix: "insert", convert: (ms, n) => (ms * 1e6) / n },
  { id: "erase", suffix: "erase", convert: (ms, n) => (ms * 1e6) / (n / 2) },
  { id: "mem", suffix: "mem", convert: (b, n) => b / n },
];

function buildData(pattern, metric) {
  const lines = metric.id === "mem" ? MEM_LINES : LINES;
  return RAW_DATA
    .filter(r => r.pattern === pattern)
    .map(r => {
      const pt = { N: r.N };
      for (const l of lines) {
        if (l.key === "raw_int32") { pt[l.key] = 12; continue; }
        if (l.key === "raw_uint64") { pt[l.key] = 16; continue; }
        const raw = r[l.key + "_" + metric.suffix];
        if (raw != null) pt[l.key] = metric.convert(raw, r.N);
      }
      return pt;
    });
}

const charts = {};

function makeChart(canvasId, metric) {
  const ctx = document.getElementById(canvasId).getContext("2d");
  const lines = metric.id === "mem" ? MEM_LINES : LINES;
  const data = buildData("random", metric);

  charts[canvasId] = new Chart(ctx, {
    type: "line",
    data: {
      labels: data.map(d => d.N),
      datasets: lines.map(l => ({
        label: l.label,
        data: data.map(d => d[l.key] ?? null),
        borderColor: l.color,
        backgroundColor: l.color + "33",
        borderWidth: l.width,
        borderDash: l.dash,
        pointRadius: 0,
        pointHitRadius: 8,
        tension: 0.2,
        spanGaps: true,
      })),
    },
    options: {
      responsive: true,
      interaction: { mode: "index", intersect: false },
      plugins: {
        legend: { display: true, labels: { color: "#bbb", font: { size: 11 }, boxWidth: 20, padding: 10 } },
        tooltip: {
          backgroundColor: "#1a1a2e",
          borderColor: "#444",
          borderWidth: 1,
          titleColor: "#aaa",
          bodyColor: "#ddd",
          callbacks: {
            title: (items) => {
              const v = items[0].parsed.x;
              if (v >= 1e6) return "N = " + (v/1e6).toFixed(1) + "M";
              if (v >= 1e3) return "N = " + (v/1e3).toFixed(1) + "K";
              return "N = " + v;
            },
            label: (item) => {
              const v = item.parsed.y;
              if (v == null) return null;
              const s = v < 0.1 ? v.toFixed(3) : v < 10 ? v.toFixed(2) : v < 1000 ? v.toFixed(1) : v.toFixed(0);
              return " " + item.dataset.label + ": " + s;
            },
          },
        },
      },
      scales: {
        x: {
          type: "logarithmic",
          title: { display: false },
          ticks: { color: "#888", font: { size: 11 },
            callback: (v) => v >= 1e6 ? (v/1e6)+"M" : v >= 1e3 ? (v/1e3)+"K" : v },
          grid: { color: "#2a2a3e" },
        },
        y: {
          type: "logarithmic",
          ticks: { color: "#888", font: { size: 10 },
            callback: (v) => v < 0.1 ? v.toFixed(2) : v < 10 ? v.toFixed(1) : v >= 1000 ? v.toFixed(0) : v.toFixed(1) },
          grid: { color: "#2a2a3e" },
        },
      },
    },
  });
  charts[canvasId]._metric = metric;
}

METRICS.forEach(m => makeChart("c_" + m.id, m));

function show(pattern) {
  document.querySelectorAll(".btns button").forEach(b => b.classList.remove("active"));
  event.target.classList.add("active");
  for (const [id, chart] of Object.entries(charts)) {
    const m = chart._metric;
    const lines = m.id === "mem" ? MEM_LINES : LINES;
    const data = buildData(pattern, m);
    chart.data.labels = data.map(d => d.N);
    lines.forEach((l, i) => {
      chart.data.datasets[i].data = data.map(d => d[l.key] ?? null);
    });
    chart.update("none");
  }
}
</script>
</body>
</html>
