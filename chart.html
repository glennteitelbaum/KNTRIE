<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>kntrie Benchmark</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
<style>
  body { margin:0; background:#0f0f1a; color:#ddd; font-family:system-ui,sans-serif; }
  .wrap { max-width:700px; margin:0 auto; padding:16px 12px; }
  h2 { margin:0 0 4px; font-size:18px; font-weight:700; text-align:center; }
  .sub { text-align:center; color:#777; font-size:12px; margin:0 0 12px; }
  .btns { display:flex; justify-content:center; gap:8px; margin-bottom:16px; }
  .btns button { padding:6px 16px; border-radius:6px; border:1px solid #444;
    background:#1a1a2e; color:#aaa; cursor:pointer; font-size:13px; font-weight:600; }
  .btns button.active { background:#3b82f6; color:#fff; }
  .chart-box { margin-bottom:24px; }
  .chart-box h3 { margin:0 0 6px; font-size:14px; font-weight:600; text-align:center; }
  canvas { background:#12122a; border-radius:8px; }
</style>
</head>
<body>
<div class="wrap">
  <h2>kntrie Benchmark</h2>
  <p class="sub">Log-log · Per-entry · Lower is better · Solid = i32, Dashed = u64</p>
  <div class="btns">
    <button class="active" onclick="show('random')">random</button>
    <button onclick="show('sequential')">sequential</button>
  </div>
  <div class="chart-box"><h3>Find (ns/entry)</h3><canvas id="c_find"></canvas></div>
  <div class="chart-box"><h3>Insert (ns/entry)</h3><canvas id="c_insert"></canvas></div>
  <div class="chart-box"><h3>Erase N/2 (ns/entry)</h3><canvas id="c_erase"></canvas></div>
  <div class="chart-box"><h3>Memory (B/entry)</h3><canvas id="c_mem"></canvas></div>
</div>
<script>
const RAW_DATA = [
  {pattern:"random",N:100,kntrie_int32_find:0.0028,kntrie_int32_insert:0.0072,kntrie_int32_erase:0.0036,kntrie_int32_mem:1288,kntrie_uint64_find:0.0029,kntrie_uint64_insert:0.0072,kntrie_uint64_erase:0.0038,kntrie_uint64_mem:1800,map_int32_find:0.0036,map_int32_insert:0.0097,map_int32_erase:0.0067,map_int32_mem:4800,map_uint64_find:0.0016,map_uint64_insert:0.0097,map_uint64_erase:0.0065,map_uint64_mem:4800,umap_int32_find:0.0012,umap_int32_insert:0.0024,umap_int32_erase:0.0016,umap_int32_mem:3224,umap_uint64_find:0.0013,umap_uint64_insert:0.0029,umap_uint64_erase:0.0022,umap_uint64_mem:3224},
  {pattern:"random",N:150,kntrie_int32_find:0.0046,kntrie_int32_insert:0.0105,kntrie_int32_erase:0.0050,kntrie_int32_mem:2056,kntrie_uint64_find:0.0046,kntrie_uint64_insert:0.0116,kntrie_uint64_erase:0.0058,kntrie_uint64_mem:2568,map_int32_find:0.0056,map_int32_insert:0.0143,map_int32_erase:0.0087,map_int32_mem:7200,map_uint64_find:0.0026,map_uint64_insert:0.0141,map_uint64_erase:0.0089,map_uint64_mem:7200,umap_int32_find:0.0021,umap_int32_insert:0.0059,umap_int32_erase:0.0025,umap_int32_mem:4856,umap_uint64_find:0.0020,umap_uint64_insert:0.0080,umap_uint64_erase:0.0030,umap_uint64_mem:4856},
  {pattern:"random",N:225,kntrie_int32_find:0.0073,kntrie_int32_insert:0.0148,kntrie_int32_erase:0.0066,kntrie_int32_mem:3080,kntrie_uint64_find:0.0071,kntrie_uint64_insert:0.0154,kntrie_uint64_erase:0.0069,kntrie_uint64_mem:4104,map_int32_find:0.0088,map_int32_insert:0.0204,map_int32_erase:0.0119,map_int32_mem:10800,map_uint64_find:0.0041,map_uint64_insert:0.0205,map_uint64_erase:0.0112,map_uint64_mem:10800,umap_int32_find:0.0035,umap_int32_insert:0.0091,umap_int32_erase:0.0039,umap_int32_mem:7216,umap_uint64_find:0.0031,umap_uint64_insert:0.0077,umap_uint64_erase:0.0037,umap_uint64_mem:7216},
  {pattern:"random",N:337,kntrie_int32_find:0.0123,kntrie_int32_insert:0.0261,kntrie_int32_erase:0.0111,kntrie_int32_mem:4104,kntrie_uint64_find:0.0116,kntrie_uint64_insert:0.0304,kntrie_uint64_erase:0.0113,kntrie_uint64_mem:6152,map_int32_find:0.0145,map_int32_insert:0.0320,map_int32_erase:0.0183,map_int32_mem:16176,map_uint64_find:0.0066,map_uint64_insert:0.0317,map_uint64_erase:0.0176,map_uint64_mem:16176,umap_int32_find:0.0044,umap_int32_insert:0.0121,umap_int32_erase:0.0047,umap_int32_mem:10784,umap_uint64_find:0.0042,umap_uint64_insert:0.0113,umap_uint64_erase:0.0050,umap_uint64_mem:10784},
  {pattern:"random",N:506,kntrie_int32_find:0.0193,kntrie_int32_insert:0.0438,kntrie_int32_erase:0.0160,kntrie_int32_mem:6152,kntrie_uint64_find:0.0186,kntrie_uint64_insert:0.0543,kntrie_uint64_erase:0.0177,kntrie_uint64_mem:8200,map_int32_find:0.0242,map_int32_insert:0.0491,map_int32_erase:0.0270,map_int32_mem:24288,map_uint64_find:0.0104,map_uint64_insert:0.0493,map_uint64_erase:0.0278,map_uint64_mem:24288,umap_int32_find:0.0059,umap_int32_insert:0.0162,umap_int32_erase:0.0071,umap_int32_mem:16472,umap_uint64_find:0.0060,umap_uint64_insert:0.0158,umap_uint64_erase:0.0073,umap_uint64_mem:16472},
  {pattern:"random",N:759,kntrie_int32_find:0.0307,kntrie_int32_insert:0.0771,kntrie_int32_erase:0.0248,kntrie_int32_mem:10248,kntrie_uint64_find:0.0291,kntrie_uint64_insert:0.0823,kntrie_uint64_erase:0.0251,kntrie_uint64_mem:12296,map_int32_find:0.0400,map_int32_insert:0.0796,map_int32_erase:0.0431,map_int32_mem:36432,map_uint64_find:0.0169,map_uint64_insert:0.0756,map_uint64_erase:0.0422,map_uint64_mem:36432,umap_int32_find:0.0098,umap_int32_insert:0.0247,umap_int32_erase:0.0111,umap_int32_mem:24304,umap_uint64_find:0.0094,umap_uint64_insert:0.0236,umap_uint64_erase:0.0112,umap_uint64_mem:24304},
  {pattern:"random",N:1139,kntrie_int32_find:0.0472,kntrie_int32_insert:0.1189,kntrie_int32_erase:0.0362,kntrie_int32_mem:14344,kntrie_uint64_find:0.0462,kntrie_uint64_insert:0.1353,kntrie_uint64_erase:0.0363,kntrie_uint64_mem:20488,map_int32_find:0.0696,map_int32_insert:0.1146,map_int32_erase:0.0648,map_int32_mem:54672,map_uint64_find:0.0282,map_uint64_insert:0.1133,map_uint64_erase:0.0615,map_uint64_mem:54672,umap_int32_find:0.0144,umap_int32_insert:0.0332,umap_int32_erase:0.0160,umap_int32_mem:36880,umap_uint64_find:0.0139,umap_uint64_insert:0.0322,umap_uint64_erase:0.0152,umap_uint64_mem:36880},
  {pattern:"random",N:1708,kntrie_int32_find:0.0725,kntrie_int32_insert:0.1965,kntrie_int32_erase:0.0546,kntrie_int32_mem:24584,kntrie_uint64_find:0.0707,kntrie_uint64_insert:0.1775,kntrie_uint64_erase:0.0520,kntrie_uint64_mem:28680,map_int32_find:0.1175,map_int32_insert:0.1879,map_int32_erase:0.1134,map_int32_mem:81984,map_uint64_find:0.0463,map_uint64_insert:0.1868,map_uint64_erase:0.1030,map_uint64_mem:81984,umap_int32_find:0.0248,umap_int32_insert:0.0538,umap_int32_erase:0.0242,umap_int32_mem:54920,umap_uint64_find:0.0233,umap_uint64_insert:0.0470,umap_uint64_erase:0.0256,umap_uint64_mem:54920},
  {pattern:"random",N:2562,kntrie_int32_find:0.1139,kntrie_int32_insert:0.3025,kntrie_int32_erase:0.0798,kntrie_int32_mem:32776,kntrie_uint64_find:0.1140,kntrie_uint64_insert:0.3177,kntrie_uint64_erase:0.0825,kntrie_uint64_mem:49160,map_int32_find:0.1995,map_int32_insert:0.3045,map_int32_erase:0.1644,map_int32_mem:122976,map_uint64_find:0.0755,map_uint64_insert:0.2827,map_uint64_erase:0.1556,map_uint64_mem:122976,umap_int32_find:0.0361,umap_int32_insert:0.0767,umap_int32_erase:0.0396,umap_int32_mem:83512,umap_uint64_find:0.0345,umap_uint64_insert:0.0690,umap_uint64_erase:0.0379,umap_uint64_mem:83512},
  {pattern:"random",N:3844,kntrie_int32_find:0.1779,kntrie_int32_insert:0.4681,kntrie_int32_erase:0.1215,kntrie_int32_mem:49160,kntrie_uint64_find:0.1779,kntrie_uint64_insert:0.7435,kntrie_uint64_erase:0.2079,kntrie_uint64_mem:65544,map_int32_find:0.3227,map_int32_insert:0.4812,map_int32_erase:0.2738,map_int32_mem:184512,map_uint64_find:0.1293,map_uint64_insert:0.4724,map_uint64_erase:0.2490,map_uint64_mem:184512,umap_int32_find:0.0558,umap_int32_insert:0.1126,umap_int32_erase:0.0577,umap_int32_mem:124472,umap_uint64_find:0.0576,umap_uint64_insert:0.1103,umap_uint64_erase:0.0599,umap_uint64_mem:124472},
  {pattern:"random",N:5766,kntrie_int32_find:0.1704,kntrie_int32_insert:0.6985,kntrie_int32_erase:0.1593,kntrie_int32_mem:82856,kntrie_uint64_find:0.1719,kntrie_uint64_insert:1.0137,kntrie_uint64_erase:0.1531,kntrie_uint64_mem:105352,map_int32_find:0.5500,map_int32_insert:0.8082,map_int32_erase:0.4273,map_int32_mem:276768,map_uint64_find:0.2050,map_uint64_insert:0.7994,map_uint64_erase:0.4140,map_uint64_mem:276768,umap_int32_find:0.0884,umap_int32_insert:0.1769,umap_int32_erase:0.0923,umap_int32_mem:186008,umap_uint64_find:0.0876,umap_uint64_insert:0.1823,umap_uint64_erase:0.0908,umap_uint64_mem:186008},
  {pattern:"random",N:8649,kntrie_int32_find:0.2981,kntrie_int32_insert:0.9317,kntrie_int32_erase:0.2389,kntrie_int32_mem:119112,kntrie_uint64_find:0.2931,kntrie_uint64_insert:1.1080,kntrie_uint64_erase:0.2319,kntrie_uint64_mem:156936,map_int32_find:0.9111,map_int32_insert:1.2853,map_int32_erase:0.6858,map_int32_mem:415152,map_uint64_find:0.3674,map_uint64_insert:1.3033,map_uint64_erase:0.6926,map_uint64_mem:415152,umap_int32_find:0.1415,umap_int32_insert:0.2663,umap_int32_erase:0.1449,umap_int32_mem:277840,umap_uint64_find:0.1355,umap_uint64_insert:0.2584,umap_uint64_erase:0.1437,umap_uint64_mem:277840},
  {pattern:"random",N:12974,kntrie_int32_find:0.4526,kntrie_int32_insert:1.1781,kntrie_int32_erase:0.3666,kntrie_int32_mem:178504,kntrie_uint64_find:0.4613,kntrie_uint64_insert:1.2023,kntrie_uint64_erase:0.3734,kntrie_uint64_mem:229128,map_int32_find:1.5073,map_int32_insert:2.0540,map_int32_erase:1.0961,map_int32_mem:622752,map_uint64_find:0.6166,map_uint64_insert:2.0752,map_uint64_erase:1.1293,map_uint64_mem:622752,umap_int32_find:0.2290,umap_int32_insert:0.4205,umap_int32_erase:0.2268,umap_int32_mem:415240,umap_uint64_find:0.2079,umap_uint64_insert:0.3991,umap_uint64_erase:0.2112,umap_uint64_mem:415240},
  {pattern:"random",N:19461,kntrie_int32_find:0.7280,kntrie_int32_insert:1.7282,kntrie_int32_erase:0.5760,kntrie_int32_mem:261256,kntrie_uint64_find:0.7518,kntrie_uint64_insert:1.6971,kntrie_uint64_erase:0.5893,kntrie_uint64_mem:349448,map_int32_find:2.5073,map_int32_insert:3.2334,map_int32_erase:1.7403,map_int32_mem:934128,map_uint64_find:0.9778,map_uint64_insert:3.3872,map_uint64_erase:1.7553,map_uint64_mem:934128,umap_int32_find:0.3032,umap_int32_insert:0.5650,umap_int32_erase:0.3034,umap_int32_mem:633088,umap_uint64_find:0.3126,umap_uint64_insert:0.5813,umap_uint64_erase:0.3278,umap_uint64_mem:633088},
  {pattern:"random",N:29192,kntrie_int32_find:1.1364,kntrie_int32_insert:2.3983,kntrie_int32_erase:0.8929,kntrie_int32_mem:392456,kntrie_uint64_find:1.1863,kntrie_uint64_insert:2.4164,kntrie_uint64_erase:0.9283,kntrie_uint64_mem:512008,map_int32_find:4.3350,map_int32_insert:5.1908,map_int32_erase:2.8477,map_int32_mem:1401216,map_uint64_find:1.6280,map_uint64_insert:5.5058,map_uint64_erase:2.9125,map_uint64_mem:1401216,umap_int32_find:0.4905,umap_int32_insert:0.9166,umap_int32_erase:0.5148,umap_int32_mem:946424,umap_uint64_find:0.4850,umap_uint64_insert:0.9096,umap_uint64_erase:0.5242,umap_uint64_mem:946424},
  {pattern:"random",N:43789,kntrie_int32_find:1.8558,kntrie_int32_insert:3.5375,kntrie_int32_erase:1.4967,kntrie_int32_mem:594952,kntrie_uint64_find:1.9351,kntrie_uint64_insert:3.7029,kntrie_uint64_erase:1.5868,kntrie_uint64_mem:773640,map_int32_find:7.8335,map_int32_insert:8.4565,map_int32_erase:5.0150,map_int32_mem:2101872,map_uint64_find:2.9000,map_uint64_insert:9.4442,map_uint64_erase:5.1345,map_uint64_mem:2101872,umap_int32_find:0.8110,umap_int32_insert:1.4749,umap_int32_erase:0.8579,umap_int32_mem:1414784,umap_uint64_find:0.7823,umap_uint64_insert:1.3873,umap_uint64_erase:0.8344,umap_uint64_mem:1414784},
  {pattern:"random",N:65684,kntrie_int32_find:3.4794,kntrie_int32_insert:5.5613,kntrie_int32_erase:2.5674,kntrie_int32_mem:857096,kntrie_uint64_find:3.5987,kntrie_uint64_insert:5.8882,kntrie_uint64_erase:2.7539,kntrie_uint64_mem:1186312,map_int32_find:13.9870,map_int32_insert:14.4648,map_int32_erase:8.6039,map_int32_mem:3152832,map_uint64_find:5.1331,map_uint64_insert:15.2864,map_uint64_erase:8.6073,map_uint64_mem:3152832,umap_int32_find:1.3081,umap_int32_insert:2.2754,umap_int32_erase:1.4679,umap_int32_mem:2114872,umap_uint64_find:1.2979,umap_uint64_insert:2.2498,umap_uint64_erase:1.5142,umap_uint64_mem:2114872},
  {pattern:"random",N:98523,kntrie_int32_find:4.8622,kntrie_int32_insert:9.1880,kntrie_int32_erase:3.8634,kntrie_int32_mem:1316360,map_int32_find:24.7189,map_int32_insert:24.2314,map_int32_erase:14.8411,map_int32_mem:4729104,umap_int32_find:2.1839,umap_int32_insert:3.9872,umap_int32_erase:2.6258,umap_int32_mem:3162416},
  {pattern:"random",N:98526,kntrie_uint64_find:5.0817,kntrie_uint64_insert:9.6950,kntrie_uint64_erase:4.1595,kntrie_uint64_mem:1712648,map_uint64_find:9.0980,map_uint64_insert:27.6725,map_uint64_erase:15.2451,map_uint64_mem:4729248,umap_uint64_find:2.1251,umap_uint64_insert:3.9969,umap_uint64_erase:2.5779,umap_uint64_mem:3162488},
  {pattern:"random",N:147785,kntrie_int32_find:8.0053,kntrie_int32_insert:15.6254,kntrie_int32_erase:5.6877,kntrie_int32_mem:1890824,map_int32_find:43.3714,map_int32_insert:40.7901,map_int32_erase:26.6318,map_int32_mem:7093680,umap_int32_find:3.5098,umap_int32_insert:6.6055,umap_int32_erase:4.3342,umap_int32_mem:4729184},
  {pattern:"random",N:147789,kntrie_uint64_find:8.2737,kntrie_uint64_insert:16.1908,kntrie_uint64_erase:6.0211,kntrie_uint64_mem:2624008,map_uint64_find:16.0629,map_uint64_insert:43.8613,map_uint64_erase:26.5120,map_uint64_mem:7093872,umap_uint64_find:3.3862,umap_uint64_insert:6.5678,umap_uint64_erase:4.1988,umap_uint64_mem:4729280},
  {pattern:"random",N:221675,kntrie_int32_find:12.9803,kntrie_int32_insert:25.9889,kntrie_int32_erase:8.9612,kntrie_int32_mem:2986504,map_int32_find:79.3865,map_int32_insert:72.3373,map_int32_erase:45.8596,map_int32_mem:10640400,umap_int32_find:5.6190,umap_int32_insert:11.5710,umap_int32_erase:7.4785,umap_int32_mem:7215376},
  {pattern:"random",N:221683,kntrie_uint64_find:13.6772,kntrie_uint64_insert:26.7926,kntrie_uint64_erase:9.7427,kntrie_uint64_mem:3756552,map_uint64_find:28.5402,map_uint64_insert:75.6405,map_uint64_erase:45.5922,map_uint64_mem:10640784,umap_uint64_find:5.6079,umap_uint64_insert:11.5354,umap_uint64_erase:7.4167,umap_uint64_mem:7215568},
  {pattern:"random",N:332509,kntrie_int32_find:20.2760,kntrie_int32_insert:42.2768,kntrie_int32_erase:13.6985,kntrie_int32_mem:4248072,map_int32_find:142.4420,map_int32_insert:124.5540,map_int32_erase:80.8995,map_int32_mem:15960432,umap_int32_find:9.4177,umap_int32_insert:19.4402,umap_int32_erase:12.3995,umap_int32_mem:10788704},
  {pattern:"random",N:332525,kntrie_uint64_find:24.3376,kntrie_uint64_insert:45.3121,kntrie_uint64_erase:16.1827,kntrie_uint64_mem:5982728,map_uint64_find:49.2098,map_uint64_insert:128.9398,map_uint64_erase:79.1172,map_uint64_mem:15961200,umap_uint64_find:9.2303,umap_uint64_insert:18.2783,umap_uint64_erase:12.3667,umap_uint64_mem:10789088},
  {pattern:"random",N:498753,kntrie_int32_find:35.5126,kntrie_int32_insert:69.2527,kntrie_int32_erase:23.7907,kntrie_int32_mem:6318600,map_int32_find:237.8705,map_int32_insert:208.6674,map_int32_erase:133.5433,map_int32_mem:23940144,umap_int32_find:14.7411,umap_int32_insert:29.5932,umap_int32_erase:18.9592,umap_int32_mem:16132000},
  {pattern:"random",N:498788,kntrie_uint64_find:44.0713,kntrie_uint64_insert:81.0347,kntrie_uint64_erase:27.6449,kntrie_uint64_mem:8423944,map_uint64_find:89.1450,map_uint64_insert:223.2504,map_uint64_erase:131.6780,map_uint64_mem:23941824,umap_uint64_find:14.3926,umap_uint64_insert:29.3982,umap_uint64_erase:21.4145,umap_uint64_mem:16132840},
  {pattern:"random",N:748117,kntrie_int32_find:61.7570,kntrie_int32_insert:116.1713,kntrie_int32_erase:38.2446,kntrie_int32_mem:10488328,map_int32_find:386.1052,map_int32_insert:351.1901,map_int32_erase:216.1064,map_int32_mem:35909616,umap_int32_find:23.6631,umap_int32_insert:49.3533,umap_int32_erase:32.2744,umap_int32_mem:24123200},
  {pattern:"random",N:748182,kntrie_uint64_find:79.2512,kntrie_uint64_insert:135.0904,kntrie_uint64_erase:48.4064,kntrie_uint64_mem:12585480,map_uint64_find:149.4689,map_uint64_insert:416.0194,map_uint64_erase:223.2278,map_uint64_mem:35912736,umap_uint64_find:23.0162,umap_uint64_insert:47.4559,umap_uint64_erase:30.5750,umap_uint64_mem:24124760},
  {pattern:"random",N:1122145,kntrie_int32_find:85.6430,kntrie_int32_insert:210.2673,kntrie_int32_erase:64.9711,kntrie_int32_mem:14016976,umap_int32_find:36.3207,umap_int32_insert:76.5169,umap_int32_erase:48.6052,umap_int32_mem:36074048},
  {pattern:"random",N:1122274,kntrie_uint64_find:90.6665,kntrie_uint64_insert:251.3962,kntrie_uint64_erase:67.9009,kntrie_uint64_mem:20960600,umap_uint64_find:36.8690,umap_uint64_insert:76.5412,umap_uint64_erase:49.9920,umap_uint64_mem:36077144},
  {pattern:"random",N:1683111,kntrie_int32_find:130.3706,kntrie_int32_insert:289.6999,kntrie_int32_erase:110.3940,kntrie_int32_mem:20232840,umap_int32_find:59.8549,umap_int32_insert:122.5743,umap_int32_erase:81.4104,umap_int32_mem:53945536},
  {pattern:"random",N:1683411,kntrie_uint64_find:139.0779,kntrie_uint64_insert:327.2785,kntrie_uint64_erase:116.5588,kntrie_uint64_mem:30631304,umap_uint64_find:57.9554,umap_uint64_insert:121.5433,umap_uint64_erase:73.9812,umap_uint64_mem:53952736},
  {pattern:"random",N:2524384,kntrie_int32_find:212.5479,kntrie_int32_insert:415.4459,kntrie_int32_erase:180.0216,kntrie_int32_mem:29209640,umap_int32_find:90.1914,umap_int32_insert:191.8185,umap_int32_erase:121.8328,umap_int32_mem:82315208},
  {pattern:"random",N:2525116,kntrie_uint64_find:240.1622,kntrie_uint64_insert:466.1146,kntrie_uint64_erase:188.9438,kntrie_uint64_mem:45664136,umap_uint64_find:91.1550,umap_uint64_insert:190.5541,umap_uint64_erase:130.1546,umap_uint64_mem:82332776},
  {pattern:"random",N:3786033,kntrie_int32_find:340.9219,kntrie_int32_insert:618.5958,kntrie_int32_erase:290.6367,kntrie_int32_mem:43642184,umap_int32_find:150.5539,umap_int32_insert:314.3687,umap_int32_erase:208.1917,umap_int32_mem:123073040},
  {pattern:"random",N:3787675,kntrie_uint64_find:405.3998,kntrie_uint64_insert:695.6463,kntrie_uint64_erase:330.9421,kntrie_uint64_mem:67563080,umap_uint64_find:151.1952,umap_uint64_insert:315.6712,umap_uint64_erase:209.1545,umap_uint64_mem:123112448},
  {pattern:"random",N:5677748,kntrie_int32_find:545.7776,kntrie_int32_insert:960.0620,kntrie_int32_erase:486.2604,kntrie_int32_mem:63048200,umap_int32_find:247.0516,umap_int32_insert:580.3540,umap_int32_erase:371.2341,umap_int32_mem:184004728},
  {pattern:"random",N:5681512,kntrie_uint64_find:689.5956,kntrie_uint64_insert:1066.4978,kntrie_uint64_erase:543.7922,kntrie_uint64_mem:100474632,umap_uint64_find:258.4167,umap_uint64_insert:579.4705,umap_uint64_erase:417.8006,umap_uint64_mem:184095064},
  {pattern:"sequential",N:100,kntrie_int32_find:0.0028,kntrie_int32_insert:0.0068,kntrie_int32_erase:0.0031,kntrie_int32_mem:1288,kntrie_uint64_find:0.0028,kntrie_uint64_insert:0.0067,kntrie_uint64_erase:0.0032,kntrie_uint64_mem:1800,map_int32_find:0.0034,map_int32_insert:0.0088,map_int32_erase:0.0049,map_int32_mem:4800,map_uint64_find:0.0014,map_uint64_insert:0.0090,map_uint64_erase:0.0055,map_uint64_mem:4800,umap_int32_find:0.0003,umap_int32_insert:0.0012,umap_int32_erase:0.0008,umap_int32_mem:3224,umap_uint64_find:0.0003,umap_uint64_insert:0.0013,umap_uint64_erase:0.0011,umap_uint64_mem:3224},
  {pattern:"sequential",N:150,kntrie_int32_find:0.0046,kntrie_int32_insert:0.0101,kntrie_int32_erase:0.0045,kntrie_int32_mem:2056,kntrie_uint64_find:0.0045,kntrie_uint64_insert:0.0107,kntrie_uint64_erase:0.0054,kntrie_uint64_mem:2568,map_int32_find:0.0056,map_int32_insert:0.0136,map_int32_erase:0.0081,map_int32_mem:7200,map_uint64_find:0.0026,map_uint64_insert:0.0138,map_uint64_erase:0.0092,map_uint64_mem:7200,umap_int32_find:0.0005,umap_int32_insert:0.0038,umap_int32_erase:0.0011,umap_int32_mem:4856,umap_uint64_find:0.0005,umap_uint64_insert:0.0038,umap_uint64_erase:0.0015,umap_uint64_mem:4856},
  {pattern:"sequential",N:225,kntrie_int32_find:0.0077,kntrie_int32_insert:0.0153,kntrie_int32_erase:0.0068,kntrie_int32_mem:3080,kntrie_uint64_find:0.0069,kntrie_uint64_insert:0.0146,kntrie_uint64_erase:0.0070,kntrie_uint64_mem:4104,map_int32_find:0.0094,map_int32_insert:0.0217,map_int32_erase:0.0131,map_int32_mem:10800,map_uint64_find:0.0039,map_uint64_insert:0.0194,map_uint64_erase:0.0108,map_uint64_mem:10800,umap_int32_find:0.0008,umap_int32_insert:0.0057,umap_int32_erase:0.0016,umap_int32_mem:7216,umap_uint64_find:0.0007,umap_uint64_insert:0.0053,umap_uint64_erase:0.0014,umap_uint64_mem:7216},
  {pattern:"sequential",N:337,kntrie_int32_find:0.0123,kntrie_int32_insert:0.0257,kntrie_int32_erase:0.0107,kntrie_int32_mem:4104,kntrie_uint64_find:0.0117,kntrie_uint64_insert:0.0275,kntrie_uint64_erase:0.0119,kntrie_uint64_mem:6152,map_int32_find:0.0148,map_int32_insert:0.0318,map_int32_erase:0.0201,map_int32_mem:16176,map_uint64_find:0.0066,map_uint64_insert:0.0299,map_uint64_erase:0.0176,map_uint64_mem:16176,umap_int32_find:0.0011,umap_int32_insert:0.0080,umap_int32_erase:0.0023,umap_int32_mem:10784,umap_uint64_find:0.0011,umap_uint64_insert:0.0077,umap_uint64_erase:0.0021,umap_uint64_mem:10784},
  {pattern:"sequential",N:506,kntrie_int32_find:0.0198,kntrie_int32_insert:0.0482,kntrie_int32_erase:0.0168,kntrie_int32_mem:6152,kntrie_uint64_find:0.0185,kntrie_uint64_insert:0.0483,kntrie_uint64_erase:0.0166,kntrie_uint64_mem:8200,map_int32_find:0.0243,map_int32_insert:0.0506,map_int32_erase:0.0315,map_int32_mem:24288,map_uint64_find:0.0107,map_uint64_insert:0.0466,map_uint64_erase:0.0268,map_uint64_mem:24288,umap_int32_find:0.0017,umap_int32_insert:0.0118,umap_int32_erase:0.0035,umap_int32_mem:16472,umap_uint64_find:0.0017,umap_uint64_insert:0.0114,umap_uint64_erase:0.0040,umap_uint64_mem:16472},
  {pattern:"sequential",N:759,kntrie_int32_find:0.0308,kntrie_int32_insert:0.0748,kntrie_int32_erase:0.0244,kntrie_int32_mem:10248,kntrie_uint64_find:0.0291,kntrie_uint64_insert:0.0764,kntrie_uint64_erase:0.0239,kntrie_uint64_mem:12296,map_int32_find:0.0405,map_int32_insert:0.0779,map_int32_erase:0.0467,map_int32_mem:36432,map_uint64_find:0.0175,map_uint64_insert:0.0806,map_uint64_erase:0.0409,map_uint64_mem:36432,umap_int32_find:0.0026,umap_int32_insert:0.0173,umap_int32_erase:0.0050,umap_int32_mem:24304,umap_uint64_find:0.0025,umap_uint64_insert:0.0162,umap_uint64_erase:0.0051,umap_uint64_mem:24304},
  {pattern:"sequential",N:1139,kntrie_int32_find:0.0493,kntrie_int32_insert:0.1351,kntrie_int32_erase:0.0389,kntrie_int32_mem:14344,kntrie_uint64_find:0.0451,kntrie_uint64_insert:0.1151,kntrie_uint64_erase:0.0348,kntrie_uint64_mem:20488,map_int32_find:0.0708,map_int32_insert:0.1202,map_int32_erase:0.0741,map_int32_mem:54672,map_uint64_find:0.0291,map_uint64_insert:0.1174,map_uint64_erase:0.0668,map_uint64_mem:54672,umap_int32_find:0.0038,umap_int32_insert:0.0248,umap_int32_erase:0.0073,umap_int32_mem:36880,umap_uint64_find:0.0038,umap_uint64_insert:0.0229,umap_uint64_erase:0.0068,umap_uint64_mem:36880},
  {pattern:"sequential",N:1708,kntrie_int32_find:0.0733,kntrie_int32_insert:0.1923,kntrie_int32_erase:0.0547,kntrie_int32_mem:24584,kntrie_uint64_find:0.0709,kntrie_uint64_insert:0.1847,kntrie_uint64_erase:0.0523,kntrie_uint64_mem:28680,map_int32_find:0.1233,map_int32_insert:0.1938,map_int32_erase:0.1087,map_int32_mem:81984,map_uint64_find:0.0485,map_uint64_insert:0.1874,map_uint64_erase:0.1022,map_uint64_mem:81984,umap_int32_find:0.0057,umap_int32_insert:0.0349,umap_int32_erase:0.0116,umap_int32_mem:54920,umap_uint64_find:0.0057,umap_uint64_insert:0.0336,umap_uint64_erase:0.0112,umap_uint64_mem:54920},
  {pattern:"sequential",N:2562,kntrie_int32_find:0.1137,kntrie_int32_insert:0.3003,kntrie_int32_erase:0.0811,kntrie_int32_mem:32776,kntrie_uint64_find:0.1154,kntrie_uint64_insert:0.2973,kntrie_uint64_erase:0.0847,kntrie_uint64_mem:49160,map_int32_find:0.2025,map_int32_insert:0.3180,map_int32_erase:0.1719,map_int32_mem:122976,map_uint64_find:0.0792,map_uint64_insert:0.3040,map_uint64_erase:0.1671,map_uint64_mem:122976,umap_int32_find:0.0087,umap_int32_insert:0.0500,umap_int32_erase:0.0181,umap_int32_mem:83512,umap_uint64_find:0.0086,umap_uint64_insert:0.0477,umap_uint64_erase:0.0182,umap_uint64_mem:83512},
  {pattern:"sequential",N:3844,kntrie_int32_find:0.1830,kntrie_int32_insert:0.4884,kntrie_int32_erase:0.1266,kntrie_int32_mem:49160,kntrie_uint64_find:0.1787,kntrie_uint64_insert:0.4866,kntrie_uint64_erase:0.1286,kntrie_uint64_mem:65544,map_int32_find:0.3442,map_int32_insert:0.4997,map_int32_erase:0.2771,map_int32_mem:184512,map_uint64_find:0.1389,map_uint64_insert:0.4833,map_uint64_erase:0.2698,map_uint64_mem:184512,umap_int32_find:0.0129,umap_int32_insert:0.0734,umap_int32_erase:0.0279,umap_int32_mem:124472,umap_uint64_find:0.0131,umap_uint64_insert:0.0703,umap_uint64_erase:0.0306,umap_uint64_mem:124472},
  {pattern:"sequential",N:5766,kntrie_int32_find:0.0438,kntrie_int32_insert:0.6339,kntrie_int32_erase:0.1039,kntrie_int32_mem:57864,kntrie_uint64_find:0.0564,kntrie_uint64_insert:0.6705,kntrie_uint64_erase:0.1160,kntrie_uint64_mem:57864,map_int32_find:0.5657,map_int32_insert:0.7901,map_int32_erase:0.4570,map_int32_mem:276768,map_uint64_find:0.2167,map_uint64_insert:0.7885,map_uint64_erase:0.4205,map_uint64_mem:276768,umap_int32_find:0.0194,umap_int32_insert:0.1067,umap_int32_erase:0.0431,umap_int32_mem:186008,umap_uint64_find:0.0189,umap_uint64_insert:0.0985,umap_uint64_erase:0.0419,umap_uint64_mem:186008},
  {pattern:"sequential",N:8649,kntrie_int32_find:0.0649,kntrie_int32_insert:0.7385,kntrie_int32_erase:0.1556,kntrie_int32_mem:86664,kntrie_uint64_find:0.0810,kntrie_uint64_insert:0.7865,kntrie_uint64_erase:0.1740,kntrie_uint64_mem:86664,map_int32_find:0.9311,map_int32_insert:1.2971,map_int32_erase:0.7125,map_int32_mem:415152,map_uint64_find:0.3687,map_uint64_insert:1.2815,map_uint64_erase:0.6721,map_uint64_mem:415152,umap_int32_find:0.0299,umap_int32_insert:0.1616,umap_int32_erase:0.0652,umap_int32_mem:277840,umap_uint64_find:0.0282,umap_uint64_insert:0.1413,umap_uint64_erase:0.0629,umap_uint64_mem:277840},
  {pattern:"sequential",N:12974,kntrie_int32_find:0.1014,kntrie_int32_insert:0.9582,kntrie_int32_erase:0.2467,kntrie_int32_mem:130056,kntrie_uint64_find:0.1230,kntrie_uint64_insert:0.9669,kntrie_uint64_erase:0.2616,kntrie_uint64_mem:130056,map_int32_find:1.5408,map_int32_insert:2.0466,map_int32_erase:1.1292,map_int32_mem:622752,map_uint64_find:0.5924,map_uint64_insert:2.0249,map_uint64_erase:1.0916,map_uint64_mem:622752,umap_int32_find:0.0434,umap_int32_insert:0.2439,umap_int32_erase:0.1009,umap_int32_mem:415240,umap_uint64_find:0.0433,umap_uint64_insert:0.2226,umap_uint64_erase:0.1004,umap_uint64_mem:415240},
  {pattern:"sequential",N:19461,kntrie_int32_find:0.1493,kntrie_int32_insert:1.2918,kntrie_int32_erase:0.3744,kntrie_int32_mem:195432,kntrie_uint64_find:0.1920,kntrie_uint64_insert:1.3534,kntrie_uint64_erase:0.4207,kntrie_uint64_mem:195432,map_int32_find:2.4859,map_int32_insert:3.2043,map_int32_erase:1.8200,map_int32_mem:934128,map_uint64_find:1.0252,map_uint64_insert:3.4352,map_uint64_erase:1.8080,map_uint64_mem:934128,umap_int32_find:0.0657,umap_int32_insert:0.3416,umap_int32_erase:0.1554,umap_int32_mem:633088,umap_uint64_find:0.0650,umap_uint64_insert:0.3276,umap_uint64_erase:0.1529,umap_uint64_mem:633088},
  {pattern:"sequential",N:29192,kntrie_int32_find:0.2417,kntrie_int32_insert:1.7854,kntrie_int32_erase:0.6028,kntrie_int32_mem:292984,kntrie_uint64_find:0.2995,kntrie_uint64_insert:1.8478,kntrie_uint64_erase:0.6618,kntrie_uint64_mem:292984,map_int32_find:4.4193,map_int32_insert:5.1527,map_int32_erase:2.9171,map_int32_mem:1401216,map_uint64_find:1.7252,map_uint64_insert:5.2399,map_uint64_erase:2.9723,map_uint64_mem:1401216,umap_int32_find:0.0981,umap_int32_insert:0.4778,umap_int32_erase:0.2368,umap_int32_mem:946424,umap_uint64_find:0.0976,umap_uint64_insert:0.4626,umap_uint64_erase:0.2388,umap_uint64_mem:946424},
  {pattern:"sequential",N:43789,kntrie_int32_find:0.3752,kntrie_int32_insert:2.5084,kntrie_int32_erase:0.9437,kntrie_int32_mem:439464,kntrie_uint64_find:0.4660,kntrie_uint64_insert:2.5673,kntrie_uint64_erase:1.0042,kntrie_uint64_mem:439464,map_int32_find:8.2182,map_int32_insert:8.6332,map_int32_erase:5.1203,map_int32_mem:2101872,map_uint64_find:3.0568,map_uint64_insert:8.8854,map_uint64_erase:5.1773,map_uint64_mem:2101872,umap_int32_find:0.1918,umap_int32_insert:0.7623,umap_int32_erase:0.4474,umap_int32_mem:1414784,umap_uint64_find:0.1942,umap_uint64_insert:0.7077,umap_uint64_erase:0.4368,umap_uint64_mem:1414784},
  {pattern:"sequential",N:65684,kntrie_int32_find:0.8661,kntrie_int32_insert:4.2191,kntrie_int32_erase:1.7653,kntrie_int32_mem:659544,kntrie_uint64_find:0.9917,kntrie_uint64_insert:4.2749,kntrie_uint64_erase:1.8115,kntrie_uint64_mem:659544,map_int32_find:14.8330,map_int32_insert:15.0761,map_int32_erase:8.6504,map_int32_mem:3152832,map_uint64_find:5.2819,map_uint64_insert:14.2268,map_uint64_erase:8.7618,map_uint64_mem:3152832,umap_int32_find:0.3764,umap_int32_insert:1.1272,umap_int32_erase:0.8631,umap_int32_mem:2114872,umap_uint64_find:0.3758,umap_uint64_insert:1.1319,umap_uint64_erase:0.9022,umap_uint64_mem:2114872},
  {pattern:"sequential",N:98526,kntrie_int32_find:1.4521,kntrie_int32_insert:6.8130,kntrie_int32_erase:2.7181,kntrie_int32_mem:989016,kntrie_uint64_find:1.5500,kntrie_uint64_insert:6.8311,kntrie_uint64_erase:2.7743,kntrie_uint64_mem:989016,map_int32_find:24.3505,map_int32_insert:25.0017,map_int32_erase:14.5805,map_int32_mem:4729248,map_uint64_find:9.1953,map_uint64_insert:24.4689,map_uint64_erase:15.0147,map_uint64_mem:4729248,umap_int32_find:0.6695,umap_int32_insert:1.8528,umap_int32_erase:1.5838,umap_int32_mem:3162488,umap_uint64_find:0.6665,umap_uint64_insert:1.7219,umap_uint64_erase:1.6181,umap_uint64_mem:3162488},
  {pattern:"sequential",N:147789,kntrie_int32_find:2.1555,kntrie_int32_insert:10.4558,kntrie_int32_erase:4.1838,kntrie_int32_mem:1483736,kntrie_uint64_find:2.5601,kntrie_uint64_insert:10.6802,kntrie_uint64_erase:4.2865,kntrie_uint64_mem:1483736,map_int32_find:44.6539,map_int32_insert:42.9700,map_int32_erase:26.7506,map_int32_mem:7093872,map_uint64_find:17.0255,map_uint64_insert:41.7360,map_uint64_erase:26.7363,map_uint64_mem:7093872,umap_int32_find:1.1778,umap_int32_insert:3.1543,umap_int32_erase:2.7967,umap_int32_mem:4729280,umap_uint64_find:1.0507,umap_uint64_insert:2.9365,umap_uint64_erase:2.6491,umap_uint64_mem:4729280},
  {pattern:"sequential",N:221683,kntrie_int32_find:4.0083,kntrie_int32_insert:15.5633,kntrie_int32_erase:6.4396,kntrie_int32_mem:2225128,kntrie_uint64_find:4.4474,kntrie_uint64_insert:16.6113,kntrie_uint64_erase:6.8484,kntrie_uint64_mem:2225128,map_int32_find:87.2758,map_int32_insert:79.1064,map_int32_erase:45.4880,map_int32_mem:10640784,map_uint64_find:30.4547,map_uint64_insert:70.0988,map_uint64_erase:45.0836,map_uint64_mem:10640784,umap_int32_find:1.8735,umap_int32_insert:5.0000,umap_int32_erase:4.4957,umap_int32_mem:7215568,umap_uint64_find:1.7806,umap_uint64_insert:4.9284,umap_uint64_erase:4.4566,umap_uint64_mem:7215568},
  {pattern:"sequential",N:332525,kntrie_int32_find:6.3497,kntrie_int32_insert:23.6726,kntrie_int32_erase:10.4114,kntrie_int32_mem:3338072,kntrie_uint64_find:8.3040,kntrie_uint64_insert:25.8030,kntrie_uint64_erase:11.5877,kntrie_uint64_mem:3338072,map_int32_find:136.6933,map_int32_insert:121.0298,map_int32_erase:78.2696,map_int32_mem:15961200,map_uint64_find:50.7530,map_uint64_insert:129.7978,map_uint64_erase:77.4309,map_uint64_mem:15961200,umap_int32_find:3.0710,umap_int32_insert:7.9569,umap_int32_erase:7.3090,umap_int32_mem:10789088,umap_uint64_find:3.0509,umap_uint64_insert:8.2110,umap_uint64_erase:8.0119,umap_uint64_mem:10789088},
  {pattern:"sequential",N:498788,kntrie_int32_find:10.4660,kntrie_int32_insert:37.9511,kntrie_int32_erase:17.9876,kntrie_int32_mem:5007368,kntrie_uint64_find:12.1505,kntrie_uint64_insert:39.0594,kntrie_uint64_erase:18.6611,kntrie_uint64_mem:5007368,map_int32_find:230.8090,map_int32_insert:215.4363,map_int32_erase:133.9178,map_int32_mem:23941824,map_uint64_find:88.8821,map_uint64_insert:211.8841,map_uint64_erase:133.7013,map_uint64_mem:23941824,umap_int32_find:5.3772,umap_int32_insert:13.5231,umap_int32_erase:12.8150,umap_int32_mem:16132840,umap_uint64_find:5.3375,umap_uint64_insert:13.7152,umap_uint64_erase:13.0570,umap_uint64_mem:16132840},
  {pattern:"sequential",N:748182,kntrie_int32_find:17.9544,kntrie_int32_insert:61.9412,kntrie_int32_erase:30.6929,kntrie_int32_mem:7510952,kntrie_uint64_find:19.8199,kntrie_uint64_insert:64.7914,kntrie_uint64_erase:32.4919,kntrie_uint64_mem:7510952,map_int32_find:386.8879,map_int32_insert:355.2335,map_int32_erase:218.3012,map_int32_mem:35912736,map_uint64_find:154.0923,map_uint64_insert:364.1175,map_uint64_erase:228.2055,map_uint64_mem:35912736,umap_int32_find:8.6704,umap_int32_insert:21.0153,umap_int32_erase:20.6574,umap_int32_mem:24124760,umap_uint64_find:8.4617,umap_uint64_insert:19.8703,umap_uint64_erase:19.3375,umap_uint64_mem:24124760},
  {pattern:"sequential",N:1122274,kntrie_int32_find:31.0713,kntrie_int32_insert:106.2638,kntrie_int32_erase:55.7339,kntrie_int32_mem:11266600,kntrie_uint64_find:33.9509,kntrie_uint64_insert:107.1815,kntrie_uint64_erase:57.8216,kntrie_uint64_mem:11266600,umap_int32_find:14.1411,umap_int32_insert:32.3446,umap_int32_erase:32.2301,umap_int32_mem:36077144,umap_uint64_find:13.3075,umap_uint64_insert:30.3603,umap_uint64_erase:29.0367,umap_uint64_mem:36077144},
  {pattern:"sequential",N:1683411,kntrie_int32_find:51.2822,kntrie_int32_insert:174.2149,kntrie_int32_erase:98.0182,kntrie_int32_mem:16899656,kntrie_uint64_find:58.5376,kntrie_uint64_insert:179.9845,kntrie_uint64_erase:99.9309,kntrie_uint64_mem:16899656,umap_int32_find:22.1615,umap_int32_insert:53.4824,umap_int32_erase:50.5910,umap_int32_mem:53952736,umap_uint64_find:22.3309,umap_uint64_insert:51.7717,umap_uint64_erase:50.7932,umap_uint64_mem:53952736},
  {pattern:"sequential",N:2525116,kntrie_int32_find:92.7191,kntrie_int32_insert:296.0651,kntrie_int32_erase:163.2097,kntrie_int32_mem:25350024,kntrie_uint64_find:101.1064,kntrie_uint64_insert:297.9196,kntrie_uint64_erase:164.8311,kntrie_uint64_mem:25350024,umap_int32_find:39.8503,umap_int32_insert:89.7053,umap_int32_erase:88.3458,umap_int32_mem:82332776,umap_uint64_find:39.6316,umap_uint64_insert:82.3152,umap_uint64_erase:75.4480,umap_uint64_mem:82332776},
  {pattern:"sequential",N:3787675,kntrie_int32_find:145.0974,kntrie_int32_insert:480.9703,kntrie_int32_erase:264.6497,kntrie_int32_mem:38025096,kntrie_uint64_find:155.2850,kntrie_uint64_insert:501.9575,kntrie_uint64_erase:276.3761,kntrie_uint64_mem:38025096,umap_int32_find:64.7998,umap_int32_insert:130.4773,umap_int32_erase:123.6421,umap_int32_mem:123112448,umap_uint64_find:67.0250,umap_uint64_insert:130.5610,umap_uint64_erase:121.8605,umap_uint64_mem:123112448},
  {pattern:"sequential",N:5681512,kntrie_int32_find:232.4648,kntrie_int32_insert:778.6845,kntrie_int32_erase:424.8315,kntrie_int32_mem:57037448,kntrie_uint64_find:259.6467,kntrie_uint64_insert:807.9494,kntrie_uint64_erase:462.9407,kntrie_uint64_mem:57037448,umap_int32_find:122.4352,umap_int32_insert:204.6572,umap_int32_erase:244.8769,umap_int32_mem:184095064,umap_uint64_find:127.4915,umap_uint64_insert:250.1497,umap_uint64_erase:272.3411,umap_uint64_mem:184095064},
];


const LINES = [
  { key: "kntrie_int32", color: "#3b82f6", dash: [], width: 2.5, label: "kntrie i32" },
  { key: "kntrie_uint64", color: "#93c5fd", dash: [6,3], width: 1.5, label: "kntrie u64" },
  { key: "map_int32", color: "#ef4444", dash: [], width: 2.5, label: "map i32" },
  { key: "map_uint64", color: "#fca5a5", dash: [6,3], width: 1.5, label: "map u64" },
  { key: "umap_int32", color: "#22c55e", dash: [], width: 2.5, label: "umap i32" },
  { key: "umap_uint64", color: "#86efac", dash: [6,3], width: 1.5, label: "umap u64" },
];

const MEM_LINES = [
  ...LINES,
  { key: "raw_int32", color: "#888", dash: [], width: 1, label: "raw i32" },
  { key: "raw_uint64", color: "#555", dash: [3,3], width: 1, label: "raw u64" },
];

const METRICS = [
  { id: "find", suffix: "find", convert: (ms, n) => (ms * 1e6) / n },
  { id: "insert", suffix: "insert", convert: (ms, n) => (ms * 1e6) / n },
  { id: "erase", suffix: "erase", convert: (ms, n) => (ms * 1e6) / (n / 2) },
  { id: "mem", suffix: "mem", convert: (b, n) => b / n },
];

function buildData(pattern, metric) {
  const lines = metric.id === "mem" ? MEM_LINES : LINES;
  return RAW_DATA
    .filter(r => r.pattern === pattern)
    .map(r => {
      const pt = { N: r.N };
      for (const l of lines) {
        if (l.key === "raw_int32") { pt[l.key] = 12; continue; }
        if (l.key === "raw_uint64") { pt[l.key] = 16; continue; }
        const raw = r[l.key + "_" + metric.suffix];
        if (raw != null) pt[l.key] = metric.convert(raw, r.N);
      }
      return pt;
    });
}

const charts = {};

function makeChart(canvasId, metric) {
  const ctx = document.getElementById(canvasId).getContext("2d");
  const lines = metric.id === "mem" ? MEM_LINES : LINES;
  const data = buildData("random", metric);

  charts[canvasId] = new Chart(ctx, {
    type: "line",
    data: {
      labels: data.map(d => d.N),
      datasets: lines.map(l => ({
        label: l.label,
        data: data.map(d => d[l.key] ?? null),
        borderColor: l.color,
        backgroundColor: l.color + "33",
        borderWidth: l.width,
        borderDash: l.dash,
        pointRadius: 0,
        pointHitRadius: 8,
        tension: 0.2,
        spanGaps: true,
      })),
    },
    options: {
      responsive: true,
      interaction: { mode: "index", intersect: false },
      plugins: {
        legend: { display: true, labels: { color: "#bbb", font: { size: 11 }, boxWidth: 20, padding: 10 } },
        tooltip: {
          backgroundColor: "#1a1a2e",
          borderColor: "#444",
          borderWidth: 1,
          titleColor: "#aaa",
          bodyColor: "#ddd",
          callbacks: {
            title: (items) => {
              const v = items[0].parsed.x;
              if (v >= 1e6) return "N = " + (v/1e6).toFixed(1) + "M";
              if (v >= 1e3) return "N = " + (v/1e3).toFixed(1) + "K";
              return "N = " + v;
            },
            label: (item) => {
              const v = item.parsed.y;
              if (v == null) return null;
              const s = v < 0.1 ? v.toFixed(3) : v < 10 ? v.toFixed(2) : v < 1000 ? v.toFixed(1) : v.toFixed(0);
              return " " + item.dataset.label + ": " + s;
            },
          },
        },
      },
      scales: {
        x: {
          type: "logarithmic",
          title: { display: false },
          ticks: { color: "#888", font: { size: 11 },
            callback: (v) => v >= 1e6 ? (v/1e6)+"M" : v >= 1e3 ? (v/1e3)+"K" : v },
          grid: { color: "#2a2a3e" },
        },
        y: {
          type: "logarithmic",
          ticks: { color: "#888", font: { size: 10 },
            callback: (v) => v < 0.1 ? v.toFixed(2) : v < 10 ? v.toFixed(1) : v >= 1000 ? v.toFixed(0) : v.toFixed(1) },
          grid: { color: "#2a2a3e" },
        },
      },
    },
  });
  charts[canvasId]._metric = metric;
}

METRICS.forEach(m => makeChart("c_" + m.id, m));

function show(pattern) {
  document.querySelectorAll(".btns button").forEach(b => b.classList.remove("active"));
  event.target.classList.add("active");
  for (const [id, chart] of Object.entries(charts)) {
    const m = chart._metric;
    const lines = m.id === "mem" ? MEM_LINES : LINES;
    const data = buildData(pattern, m);
    chart.data.labels = data.map(d => d.N);
    lines.forEach((l, i) => {
      chart.data.datasets[i].data = data.map(d => d[l.key] ?? null);
    });
    chart.update("none");
  }
}
</script>
</body>
</html>
