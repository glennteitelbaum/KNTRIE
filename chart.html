<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>kntrie Benchmark</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
<style>
  body { margin:0; background:#0f0f1a; color:#ddd; font-family:system-ui,sans-serif; }
  .wrap { max-width:700px; margin:0 auto; padding:16px 12px; }
  h2 { margin:0 0 4px; font-size:18px; font-weight:700; text-align:center; }
  .sub { text-align:center; color:#777; font-size:12px; margin:0 0 12px; }
  .btns { display:flex; justify-content:center; gap:8px; margin-bottom:16px; }
  .btns button { padding:6px 16px; border-radius:6px; border:1px solid #444;
    background:#1a1a2e; color:#aaa; cursor:pointer; font-size:13px; font-weight:600; }
  .btns button.active { background:#3b82f6; color:#fff; }
  .chart-box { margin-bottom:24px; }
  .chart-box h3 { margin:0 0 6px; font-size:14px; font-weight:600; text-align:center; }
  canvas { background:#12122a; border-radius:8px; }
</style>
</head>
<body>
<div class="wrap">
  <h2>kntrie Benchmark</h2>
  <p class="sub">Log-log · Per-entry · Lower is better · Solid = i32, Dashed = u64</p>
  <div class="btns">
    <button class="active" onclick="show('random')">random</button>
    <button onclick="show('sequential')">sequential</button>
  </div>
  <div class="chart-box"><h3>Find (ns/entry)</h3><canvas id="c_find"></canvas></div>
  <div class="chart-box"><h3>Insert (ns/entry)</h3><canvas id="c_insert"></canvas></div>
  <div class="chart-box"><h3>Erase N/2 (ns/entry)</h3><canvas id="c_erase"></canvas></div>
  <div class="chart-box"><h3>Memory (B/entry)</h3><canvas id="c_mem"></canvas></div>
</div>
<script>
const RAW_DATA = [
  {pattern:"random",N:100,kntrie_int32_find:0.0006,kntrie_int32_insert:0.0093,kntrie_int32_erase:0.0038,kntrie_int32_mem:1544,kntrie_uint64_find:0.0007,kntrie_uint64_insert:0.0115,kntrie_uint64_erase:0.0043,kntrie_uint64_mem:2056,map_int32_find:0.0037,map_int32_insert:0.0093,map_int32_erase:0.0057,map_int32_mem:4800,map_uint64_find:0.0034,map_uint64_insert:0.0106,map_uint64_erase:0.0061,map_uint64_mem:4800,umap_int32_find:0.0011,umap_int32_insert:0.0033,umap_int32_erase:0.0018,umap_int32_mem:3224,umap_uint64_find:0.0012,umap_uint64_insert:0.0039,umap_uint64_erase:0.0025,umap_uint64_mem:3224},
  {pattern:"random",N:150,kntrie_int32_find:0.0012,kntrie_int32_insert:0.0129,kntrie_int32_erase:0.0051,kntrie_int32_mem:3080,kntrie_uint64_find:0.0012,kntrie_uint64_insert:0.0118,kntrie_uint64_erase:0.0056,kntrie_uint64_mem:4104,map_int32_find:0.0060,map_int32_insert:0.0152,map_int32_erase:0.0091,map_int32_mem:7200,map_uint64_find:0.0057,map_uint64_insert:0.0159,map_uint64_erase:0.0083,map_uint64_mem:7200,umap_int32_find:0.0020,umap_int32_insert:0.0060,umap_int32_erase:0.0030,umap_int32_mem:4856,umap_uint64_find:0.0017,umap_uint64_insert:0.0061,umap_uint64_erase:0.0029,umap_uint64_mem:4856},
  {pattern:"random",N:225,kntrie_int32_find:0.0015,kntrie_int32_insert:0.0131,kntrie_int32_erase:0.0053,kntrie_int32_mem:3080,kntrie_uint64_find:0.0017,kntrie_uint64_insert:0.0155,kntrie_uint64_erase:0.0049,kntrie_uint64_mem:4104,map_int32_find:0.0090,map_int32_insert:0.0196,map_int32_erase:0.0106,map_int32_mem:10800,map_uint64_find:0.0086,map_uint64_insert:0.0218,map_uint64_erase:0.0106,map_uint64_mem:10800,umap_int32_find:0.0031,umap_int32_insert:0.0078,umap_int32_erase:0.0031,umap_int32_mem:7216,umap_uint64_find:0.0027,umap_uint64_insert:0.0075,umap_uint64_erase:0.0031,umap_uint64_mem:7216},
  {pattern:"random",N:337,kntrie_int32_find:0.0026,kntrie_int32_insert:0.0227,kntrie_int32_erase:0.0070,kntrie_int32_mem:6152,kntrie_uint64_find:0.0026,kntrie_uint64_insert:0.0219,kntrie_uint64_erase:0.0080,kntrie_uint64_mem:8200,map_int32_find:0.0148,map_int32_insert:0.0306,map_int32_erase:0.0151,map_int32_mem:16176,map_uint64_find:0.0140,map_uint64_insert:0.0328,map_uint64_erase:0.0161,map_uint64_mem:16176,umap_int32_find:0.0039,umap_int32_insert:0.0099,umap_int32_erase:0.0039,umap_int32_mem:10784,umap_uint64_find:0.0037,umap_uint64_insert:0.0106,umap_uint64_erase:0.0046,umap_uint64_mem:10784},
  {pattern:"random",N:506,kntrie_int32_find:0.0039,kntrie_int32_insert:0.0345,kntrie_int32_erase:0.0101,kntrie_int32_mem:6152,kntrie_uint64_find:0.0039,kntrie_uint64_insert:0.0309,kntrie_uint64_erase:0.0106,kntrie_uint64_mem:8200,map_int32_find:0.0237,map_int32_insert:0.0472,map_int32_erase:0.0247,map_int32_mem:24288,map_uint64_find:0.0218,map_uint64_insert:0.0473,map_uint64_erase:0.0243,map_uint64_mem:24288,umap_int32_find:0.0054,umap_int32_insert:0.0157,umap_int32_erase:0.0062,umap_int32_mem:16472,umap_uint64_find:0.0052,umap_uint64_insert:0.0141,umap_uint64_erase:0.0067,umap_uint64_mem:16472},
  {pattern:"random",N:759,kntrie_int32_find:0.0072,kntrie_int32_insert:0.0463,kntrie_int32_erase:0.0176,kntrie_int32_mem:12296,kntrie_uint64_find:0.0069,kntrie_uint64_insert:0.0475,kntrie_uint64_erase:0.0181,kntrie_uint64_mem:16392,map_int32_find:0.0397,map_int32_insert:0.0725,map_int32_erase:0.0373,map_int32_mem:36432,map_uint64_find:0.0375,map_uint64_insert:0.0753,map_uint64_erase:0.0375,map_uint64_mem:36432,umap_int32_find:0.0088,umap_int32_insert:0.0212,umap_int32_erase:0.0100,umap_int32_mem:24304,umap_uint64_find:0.0085,umap_uint64_insert:0.0216,umap_uint64_erase:0.0096,umap_uint64_mem:24304},
  {pattern:"random",N:1139,kntrie_int32_find:0.0116,kntrie_int32_insert:0.0709,kntrie_int32_erase:0.0185,kntrie_int32_mem:24584,kntrie_uint64_find:0.0116,kntrie_uint64_insert:0.0749,kntrie_uint64_erase:0.0219,kntrie_uint64_mem:32776,map_int32_find:0.0653,map_int32_insert:0.1103,map_int32_erase:0.0564,map_int32_mem:54672,map_uint64_find:0.0655,map_uint64_insert:0.1071,map_uint64_erase:0.0557,map_uint64_mem:54672,umap_int32_find:0.0133,umap_int32_insert:0.0290,umap_int32_erase:0.0136,umap_int32_mem:36880,umap_uint64_find:0.0127,umap_uint64_insert:0.0292,umap_uint64_erase:0.0135,umap_uint64_mem:36880},
  {pattern:"random",N:1708,kntrie_int32_find:0.0174,kntrie_int32_insert:0.0980,kntrie_int32_erase:0.0320,kntrie_int32_mem:24584,kntrie_uint64_find:0.0181,kntrie_uint64_insert:0.1048,kntrie_uint64_erase:0.0339,kntrie_uint64_mem:32776,map_int32_find:0.1065,map_int32_insert:0.1707,map_int32_erase:0.0883,map_int32_mem:81984,map_uint64_find:0.1078,map_uint64_insert:0.1655,map_uint64_erase:0.0879,map_uint64_mem:81984,umap_int32_find:0.0221,umap_int32_insert:0.0428,umap_int32_erase:0.0219,umap_int32_mem:54920,umap_uint64_find:0.0211,umap_uint64_insert:0.0432,umap_uint64_erase:0.0224,umap_uint64_mem:54920},
  {pattern:"random",N:2562,kntrie_int32_find:0.0406,kntrie_int32_insert:0.2084,kntrie_int32_erase:0.0644,kntrie_int32_mem:49160,kntrie_uint64_find:0.0294,kntrie_uint64_insert:0.1776,kntrie_uint64_erase:0.0501,kntrie_uint64_mem:65544,map_int32_find:0.2146,map_int32_insert:0.3117,map_int32_erase:0.1780,map_int32_mem:122976,map_uint64_find:0.1741,map_uint64_insert:0.2660,map_uint64_erase:0.1412,map_uint64_mem:122976,umap_int32_find:0.0330,umap_int32_insert:0.0872,umap_int32_erase:0.0393,umap_int32_mem:83512,umap_uint64_find:0.0314,umap_uint64_insert:0.0634,umap_uint64_erase:0.0364,umap_uint64_mem:83512},
  {pattern:"random",N:3844,kntrie_int32_find:0.0429,kntrie_int32_insert:0.2657,kntrie_int32_erase:0.0713,kntrie_int32_mem:49160,kntrie_uint64_find:0.0438,kntrie_uint64_insert:0.2975,kntrie_uint64_erase:0.0767,kntrie_uint64_mem:65544,map_int32_find:0.2855,map_int32_insert:0.4255,map_int32_erase:0.2185,map_int32_mem:184512,map_uint64_find:0.2861,map_uint64_insert:0.4081,map_uint64_erase:0.2291,map_uint64_mem:184512,umap_int32_find:0.0508,umap_int32_insert:0.0935,umap_int32_erase:0.0508,umap_int32_mem:124472,umap_uint64_find:0.0506,umap_uint64_insert:0.0968,umap_uint64_erase:0.0527,umap_uint64_mem:124472},
  {pattern:"random",N:5766,kntrie_int32_find:0.0596,kntrie_int32_insert:0.5000,kntrie_int32_erase:0.1372,kntrie_int32_mem:100560,kntrie_uint64_find:0.0616,kntrie_uint64_insert:0.4705,kntrie_uint64_erase:0.1424,kntrie_uint64_mem:131600,map_int32_find:0.4764,map_int32_insert:0.6764,map_int32_erase:0.3637,map_int32_mem:276768,map_uint64_find:0.4644,map_uint64_insert:0.6497,map_uint64_erase:0.3558,map_uint64_mem:276768,umap_int32_find:0.0791,umap_int32_insert:0.1502,umap_int32_erase:0.0801,umap_int32_mem:186008,umap_uint64_find:0.0784,umap_uint64_insert:0.1538,umap_uint64_erase:0.0793,umap_uint64_mem:186008},
  {pattern:"random",N:8649,kntrie_int32_find:0.1241,kntrie_int32_insert:0.6534,kntrie_int32_erase:0.1929,kntrie_int32_mem:157968,kntrie_uint64_find:0.1259,kntrie_uint64_insert:0.6514,kntrie_uint64_erase:0.2078,kntrie_uint64_mem:214544,map_int32_find:0.7976,map_int32_insert:1.0862,map_int32_erase:0.5879,map_int32_mem:415152,map_uint64_find:0.7672,map_uint64_insert:1.0205,map_uint64_erase:0.5984,map_uint64_mem:415152,umap_int32_find:0.1228,umap_int32_insert:0.2277,umap_int32_erase:0.1302,umap_int32_mem:277840,umap_uint64_find:0.1196,umap_uint64_insert:0.2267,umap_uint64_erase:0.1242,umap_uint64_mem:277840},
  {pattern:"random",N:12974,kntrie_int32_find:0.1622,kntrie_int32_insert:0.9378,kntrie_int32_erase:0.2951,kntrie_int32_mem:207888,kntrie_uint64_find:0.1686,kntrie_uint64_insert:0.9321,kntrie_uint64_erase:0.3165,kntrie_uint64_mem:274960,map_int32_find:1.3943,map_int32_insert:1.8295,map_int32_erase:1.0047,map_int32_mem:622752,map_uint64_find:1.4041,map_uint64_insert:1.7428,map_uint64_erase:1.0012,map_uint64_mem:622752,umap_int32_find:0.2101,umap_int32_insert:0.3694,umap_int32_erase:0.2048,umap_int32_mem:415240,umap_uint64_find:0.1970,umap_uint64_insert:0.3632,umap_uint64_erase:0.2080,umap_uint64_mem:415240},
  {pattern:"random",N:19461,kntrie_int32_find:0.3014,kntrie_int32_insert:1.3405,kntrie_int32_erase:0.4423,kntrie_int32_mem:380688,kntrie_uint64_find:0.3112,kntrie_uint64_insert:1.4010,kntrie_uint64_erase:0.4973,kntrie_uint64_mem:503824,map_int32_find:2.5436,map_int32_insert:2.9649,map_int32_erase:1.6861,map_int32_mem:934128,map_uint64_find:2.6487,map_uint64_insert:2.8050,map_uint64_erase:1.7017,map_uint64_mem:934128,umap_int32_find:0.3089,umap_int32_insert:0.5529,umap_int32_erase:0.3005,umap_int32_mem:633088,umap_uint64_find:0.2967,umap_uint64_insert:0.5861,umap_uint64_erase:0.3039,umap_uint64_mem:633088},
  {pattern:"random",N:29192,kntrie_int32_find:0.4650,kntrie_int32_insert:2.0705,kntrie_int32_erase:0.6896,kntrie_int32_mem:444432,kntrie_uint64_find:0.4880,kntrie_uint64_insert:2.0729,kntrie_uint64_erase:0.7191,kntrie_uint64_mem:568336,map_int32_find:4.3575,map_int32_insert:4.7760,map_int32_erase:2.8217,map_int32_mem:1401216,map_uint64_find:4.8630,map_uint64_insert:4.6487,map_uint64_erase:3.0315,map_uint64_mem:1401216,umap_int32_find:0.4727,umap_int32_insert:0.8288,umap_int32_erase:0.4745,umap_int32_mem:946424,umap_uint64_find:0.4702,umap_uint64_insert:0.8481,umap_uint64_erase:0.4836,umap_uint64_mem:946424},
  {pattern:"random",N:43789,kntrie_int32_find:0.7333,kntrie_int32_insert:2.8833,kntrie_int32_erase:1.0740,kntrie_int32_mem:791568,kntrie_uint64_find:0.8230,kntrie_uint64_insert:3.0341,kntrie_uint64_erase:1.1785,kntrie_uint64_mem:1053712,map_int32_find:8.7000,map_int32_insert:8.0580,map_int32_erase:5.4282,map_int32_mem:2101872,map_uint64_find:9.1266,map_uint64_insert:7.9461,map_uint64_erase:5.4515,map_uint64_mem:2101872,umap_int32_find:0.7806,umap_int32_insert:1.3196,umap_int32_erase:0.8417,umap_int32_mem:1414784,umap_uint64_find:0.7878,umap_uint64_insert:1.3473,umap_uint64_erase:0.8392,umap_uint64_mem:1414784},
  {pattern:"random",N:65684,kntrie_int32_find:1.4987,kntrie_int32_insert:5.0400,kntrie_int32_erase:1.5020,kntrie_int32_mem:1163280,kntrie_uint64_find:1.7044,kntrie_uint64_insert:5.1256,kntrie_uint64_erase:1.7311,kntrie_uint64_mem:1573904,map_int32_find:16.3771,map_int32_insert:14.7259,map_int32_erase:9.8621,map_int32_mem:3152832,map_uint64_find:17.2314,map_uint64_insert:13.7793,map_uint64_erase:9.8271,map_uint64_mem:3152832,umap_int32_find:1.4288,umap_int32_insert:2.5527,umap_int32_erase:1.8789,umap_int32_mem:2114872,umap_uint64_find:1.4026,umap_uint64_insert:2.3670,umap_uint64_erase:1.8372,umap_uint64_mem:2114872},
  {pattern:"random",N:98523,kntrie_int32_find:2.2771,kntrie_int32_insert:7.3055,kntrie_int32_erase:2.7924,kntrie_int32_mem:1578000,map_int32_find:32.8792,map_int32_insert:26.7019,map_int32_erase:17.9175,map_int32_mem:4729104,umap_int32_find:2.5744,umap_int32_insert:4.9223,umap_int32_erase:3.5615,umap_int32_mem:3162416},
  {pattern:"random",N:98526,kntrie_uint64_find:3.2989,kntrie_uint64_insert:8.1412,kntrie_uint64_erase:3.4755,kntrie_uint64_mem:2102288,map_uint64_find:33.0625,map_uint64_insert:25.2881,map_uint64_erase:18.5809,map_uint64_mem:4729248,umap_uint64_find:2.4833,umap_uint64_insert:4.7710,umap_uint64_erase:3.3094,umap_uint64_mem:3162488},
  {pattern:"random",N:147785,kntrie_int32_find:5.9560,kntrie_int32_insert:12.6912,kntrie_int32_erase:4.3910,kntrie_int32_mem:3150864,map_int32_find:62.5577,map_int32_insert:47.9197,map_int32_erase:34.0016,map_int32_mem:7093680,umap_int32_find:4.1546,umap_int32_insert:9.0944,umap_int32_erase:5.8304,umap_int32_mem:4729184},
  {pattern:"random",N:147789,kntrie_uint64_find:9.2583,kntrie_uint64_insert:14.6645,kntrie_uint64_erase:6.3278,kntrie_uint64_mem:4183056,map_uint64_find:65.1139,map_uint64_insert:48.3931,map_uint64_erase:32.9317,map_uint64_mem:7093872,umap_uint64_find:4.0494,umap_uint64_insert:9.3565,umap_uint64_erase:5.7035,umap_uint64_mem:4729280},
  {pattern:"random",N:221675,kntrie_int32_find:7.6948,kntrie_int32_insert:18.6452,kntrie_int32_erase:7.2157,kntrie_int32_mem:3150864,map_int32_find:104.0990,map_int32_insert:81.3087,map_int32_erase:54.2096,map_int32_mem:10640400,umap_int32_find:5.9354,umap_int32_insert:14.2152,umap_int32_erase:8.4894,umap_int32_mem:7215376},
  {pattern:"random",N:221683,kntrie_uint64_find:14.2530,kntrie_uint64_insert:24.1749,kntrie_uint64_erase:12.9231,kntrie_uint64_mem:4199440,map_uint64_find:119.5139,map_uint64_insert:91.2260,map_uint64_erase:62.3363,map_uint64_mem:10640784,umap_uint64_find:6.5075,umap_uint64_insert:16.0957,umap_uint64_erase:10.2083,umap_uint64_mem:7215568},
  {pattern:"random",N:332509,kntrie_int32_find:22.2284,kntrie_int32_insert:37.3822,kntrie_int32_erase:15.4405,kntrie_int32_mem:6296592,map_int32_find:213.1251,map_int32_insert:157.2935,map_int32_erase:108.1395,map_int32_mem:15960432,umap_int32_find:10.4641,umap_int32_insert:24.5920,umap_int32_erase:15.4796,umap_int32_mem:10788704},
  {pattern:"random",N:332525,kntrie_uint64_find:31.0750,kntrie_uint64_insert:43.1430,kntrie_uint64_erase:23.3803,kntrie_uint64_mem:8393744,map_uint64_find:212.0645,map_uint64_insert:161.0415,map_uint64_erase:108.4323,map_uint64_mem:15961200,umap_uint64_find:10.2808,umap_uint64_insert:25.2998,umap_uint64_erase:15.5577,umap_uint64_mem:10789088},
  {pattern:"random",N:498753,kntrie_int32_find:30.4866,kntrie_int32_insert:60.1319,kntrie_int32_erase:26.4152,kntrie_int32_mem:6444048,map_int32_find:362.9465,map_int32_insert:264.8313,map_int32_erase:174.2469,map_int32_mem:23940144,umap_int32_find:15.0908,umap_int32_insert:36.7427,umap_int32_erase:21.5164,umap_int32_mem:16132000},
  {pattern:"random",N:498788,kntrie_uint64_find:47.8821,kntrie_uint64_insert:90.7463,kntrie_uint64_erase:40.7598,kntrie_uint64_mem:8524816,map_uint64_find:412.5534,map_uint64_insert:296.3170,map_uint64_erase:196.7906,map_uint64_mem:23941824,umap_uint64_find:15.0796,umap_uint64_insert:40.7070,umap_uint64_erase:22.3425,umap_uint64_mem:16132840},
  {pattern:"random",N:748117,kntrie_int32_find:85.3504,kntrie_int32_insert:124.7387,kntrie_int32_erase:57.5487,kntrie_int32_mem:12588048,map_int32_find:734.1631,map_int32_insert:549.8926,map_int32_erase:340.1707,map_int32_mem:35909616,umap_int32_find:23.7240,umap_int32_insert:57.3874,umap_int32_erase:35.8194,umap_int32_mem:24123200},
  {pattern:"random",N:748182,kntrie_uint64_find:94.8766,kntrie_uint64_insert:145.5454,kntrie_uint64_erase:70.9196,kntrie_uint64_mem:16782352,map_uint64_find:705.3893,map_uint64_insert:521.7708,map_uint64_erase:313.7287,map_uint64_mem:35912736,umap_uint64_find:23.5905,umap_uint64_insert:57.8106,umap_uint64_erase:35.5922,umap_uint64_mem:24124760},
  {pattern:"random",N:1122145,kntrie_int32_find:76.5719,kntrie_int32_insert:248.3147,kntrie_int32_erase:67.5636,kntrie_int32_mem:17446224,umap_int32_find:40.2816,umap_int32_insert:109.8811,umap_int32_erase:62.1474,umap_int32_mem:36074048},
  {pattern:"random",N:1122274,kntrie_uint64_find:93.3819,kntrie_uint64_insert:327.9374,kntrie_uint64_erase:84.6860,kntrie_uint64_mem:27146000,umap_uint64_find:38.3249,umap_uint64_insert:101.2106,umap_uint64_erase:66.5769,umap_uint64_mem:36077144},
  {pattern:"random",N:1683111,kntrie_int32_find:138.0473,kntrie_int32_insert:353.1650,kntrie_int32_erase:110.7205,kntrie_int32_mem:23942784,umap_int32_find:66.1519,umap_int32_insert:170.3548,umap_int32_erase:118.6424,umap_int32_mem:53945536},
  {pattern:"random",N:1683411,kntrie_uint64_find:147.0677,kntrie_uint64_insert:420.4050,kntrie_uint64_erase:147.1582,kntrie_uint64_mem:37514256,umap_uint64_find:66.9986,umap_uint64_insert:191.7943,umap_uint64_erase:118.5692,umap_uint64_mem:53952736},
  {pattern:"random",N:2524384,kntrie_int32_find:231.5747,kntrie_int32_insert:475.3660,kntrie_int32_erase:190.7494,kntrie_int32_mem:39793104,umap_int32_find:105.0421,umap_int32_insert:291.8250,umap_int32_erase:181.5032,umap_int32_mem:82315208},
  {pattern:"random",N:2525116,kntrie_uint64_find:329.5703,kntrie_uint64_insert:700.6800,kntrie_uint64_erase:300.7833,kntrie_uint64_mem:62881040,umap_uint64_find:114.1858,umap_uint64_insert:334.2275,umap_uint64_erase:186.3840,umap_uint64_mem:82332776},
  {pattern:"sequential",N:100,kntrie_int32_find:0.0006,kntrie_int32_insert:0.0087,kntrie_int32_erase:0.0031,kntrie_int32_mem:1544,kntrie_uint64_find:0.0007,kntrie_uint64_insert:0.0094,kntrie_uint64_erase:0.0034,kntrie_uint64_mem:2056,map_int32_find:0.0036,map_int32_insert:0.0115,map_int32_erase:0.0061,map_int32_mem:4800,map_uint64_find:0.0034,map_uint64_insert:0.0109,map_uint64_erase:0.0064,map_uint64_mem:4800,umap_int32_find:0.0003,umap_int32_insert:0.0021,umap_int32_erase:0.0010,umap_int32_mem:3224,umap_uint64_find:0.0003,umap_uint64_insert:0.0025,umap_uint64_erase:0.0010,umap_uint64_mem:3224},
  {pattern:"sequential",N:150,kntrie_int32_find:0.0011,kntrie_int32_insert:0.0111,kntrie_int32_erase:0.0037,kntrie_int32_mem:3080,kntrie_uint64_find:0.0012,kntrie_uint64_insert:0.0109,kntrie_uint64_erase:0.0055,kntrie_uint64_mem:4104,map_int32_find:0.0060,map_int32_insert:0.0139,map_int32_erase:0.0087,map_int32_mem:7200,map_uint64_find:0.0056,map_uint64_insert:0.0171,map_uint64_erase:0.0096,map_uint64_mem:7200,umap_int32_find:0.0005,umap_int32_insert:0.0039,umap_int32_erase:0.0015,umap_int32_mem:4856,umap_uint64_find:0.0005,umap_uint64_insert:0.0042,umap_uint64_erase:0.0022,umap_uint64_mem:4856},
  {pattern:"sequential",N:225,kntrie_int32_find:0.0016,kntrie_int32_insert:0.0147,kntrie_int32_erase:0.0049,kntrie_int32_mem:3080,kntrie_uint64_find:0.0017,kntrie_uint64_insert:0.0148,kntrie_uint64_erase:0.0056,kntrie_uint64_mem:4104,map_int32_find:0.0097,map_int32_insert:0.0210,map_int32_erase:0.0105,map_int32_mem:10800,map_uint64_find:0.0091,map_uint64_insert:0.0233,map_uint64_erase:0.0114,map_uint64_mem:10800,umap_int32_find:0.0007,umap_int32_insert:0.0051,umap_int32_erase:0.0015,umap_int32_mem:7216,umap_uint64_find:0.0007,umap_uint64_insert:0.0053,umap_uint64_erase:0.0013,umap_uint64_mem:7216},
  {pattern:"sequential",N:337,kntrie_int32_find:0.0028,kntrie_int32_insert:0.0206,kntrie_int32_erase:0.0084,kntrie_int32_mem:6152,kntrie_uint64_find:0.0027,kntrie_uint64_insert:0.0226,kntrie_uint64_erase:0.0091,kntrie_uint64_mem:8200,map_int32_find:0.0156,map_int32_insert:0.0346,map_int32_erase:0.0163,map_int32_mem:16176,map_uint64_find:0.0149,map_uint64_insert:0.0340,map_uint64_erase:0.0172,map_uint64_mem:16176,umap_int32_find:0.0010,umap_int32_insert:0.0076,umap_int32_erase:0.0018,umap_int32_mem:10784,umap_uint64_find:0.0010,umap_uint64_insert:0.0077,umap_uint64_erase:0.0031,umap_uint64_mem:10784},
  {pattern:"sequential",N:506,kntrie_int32_find:0.0042,kntrie_int32_insert:0.0420,kntrie_int32_erase:0.0111,kntrie_int32_mem:6152,kntrie_uint64_find:0.0041,kntrie_uint64_insert:0.0350,kntrie_uint64_erase:0.0113,kntrie_uint64_mem:8200,map_int32_find:0.0250,map_int32_insert:0.0535,map_int32_erase:0.0255,map_int32_mem:24288,map_uint64_find:0.0238,map_uint64_insert:0.0529,map_uint64_erase:0.0281,map_uint64_mem:24288,umap_int32_find:0.0016,umap_int32_insert:0.0109,umap_int32_erase:0.0030,umap_int32_mem:16472,umap_uint64_find:0.0015,umap_uint64_insert:0.0110,umap_uint64_erase:0.0043,umap_uint64_mem:16472},
  {pattern:"sequential",N:759,kntrie_int32_find:0.0076,kntrie_int32_insert:0.0461,kntrie_int32_erase:0.0192,kntrie_int32_mem:12296,kntrie_uint64_find:0.0072,kntrie_uint64_insert:0.0474,kntrie_uint64_erase:0.0192,kntrie_uint64_mem:16392,map_int32_find:0.0417,map_int32_insert:0.0825,map_int32_erase:0.0391,map_int32_mem:36432,map_uint64_find:0.0399,map_uint64_insert:0.0781,map_uint64_erase:0.0395,map_uint64_mem:36432,umap_int32_find:0.0023,umap_int32_insert:0.0158,umap_int32_erase:0.0048,umap_int32_mem:24304,umap_uint64_find:0.0024,umap_uint64_insert:0.0157,umap_uint64_erase:0.0055,umap_uint64_mem:24304},
  {pattern:"sequential",N:1139,kntrie_int32_find:0.0120,kntrie_int32_insert:0.0822,kntrie_int32_erase:0.0187,kntrie_int32_mem:24584,kntrie_uint64_find:0.0123,kntrie_uint64_insert:0.0842,kntrie_uint64_erase:0.0187,kntrie_uint64_mem:32776,map_int32_find:0.0686,map_int32_insert:0.1220,map_int32_erase:0.0583,map_int32_mem:54672,map_uint64_find:0.0671,map_uint64_insert:0.1188,map_uint64_erase:0.0602,map_uint64_mem:54672,umap_int32_find:0.0035,umap_int32_insert:0.0217,umap_int32_erase:0.0067,umap_int32_mem:36880,umap_uint64_find:0.0035,umap_uint64_insert:0.0216,umap_uint64_erase:0.0060,umap_uint64_mem:36880},
  {pattern:"sequential",N:1708,kntrie_int32_find:0.0184,kntrie_int32_insert:0.1014,kntrie_int32_erase:0.0343,kntrie_int32_mem:24584,kntrie_uint64_find:0.0187,kntrie_uint64_insert:0.0998,kntrie_uint64_erase:0.0350,kntrie_uint64_mem:32776,map_int32_find:0.1129,map_int32_insert:0.1911,map_int32_erase:0.0909,map_int32_mem:81984,map_uint64_find:0.1134,map_uint64_insert:0.1870,map_uint64_erase:0.0930,map_uint64_mem:81984,umap_int32_find:0.0052,umap_int32_insert:0.0302,umap_int32_erase:0.0110,umap_int32_mem:54920,umap_uint64_find:0.0052,umap_uint64_insert:0.0301,umap_uint64_erase:0.0097,umap_uint64_mem:54920},
  {pattern:"sequential",N:2562,kntrie_int32_find:0.0308,kntrie_int32_insert:0.1744,kntrie_int32_erase:0.0519,kntrie_int32_mem:49160,kntrie_uint64_find:0.0309,kntrie_uint64_insert:0.1708,kntrie_uint64_erase:0.0530,kntrie_uint64_mem:65544,map_int32_find:0.1839,map_int32_insert:0.2977,map_int32_erase:0.1439,map_int32_mem:122976,map_uint64_find:0.1848,map_uint64_insert:0.2848,map_uint64_erase:0.1553,map_uint64_mem:122976,umap_int32_find:0.0079,umap_int32_insert:0.0437,umap_int32_erase:0.0165,umap_int32_mem:83512,umap_uint64_find:0.0078,umap_uint64_insert:0.0446,umap_uint64_erase:0.0152,umap_uint64_mem:83512},
  {pattern:"sequential",N:3844,kntrie_int32_find:0.0461,kntrie_int32_insert:0.2612,kntrie_int32_erase:0.0773,kntrie_int32_mem:49160,kntrie_uint64_find:0.0469,kntrie_uint64_insert:0.2928,kntrie_uint64_erase:0.0807,kntrie_uint64_mem:65544,map_int32_find:0.3045,map_int32_insert:0.4746,map_int32_erase:0.2350,map_int32_mem:184512,map_uint64_find:0.3062,map_uint64_insert:0.4476,map_uint64_erase:0.2396,map_uint64_mem:184512,umap_int32_find:0.0120,umap_int32_insert:0.0637,umap_int32_erase:0.0263,umap_int32_mem:124472,umap_uint64_find:0.0120,umap_uint64_insert:0.0645,umap_uint64_erase:0.0258,umap_uint64_mem:124472},
  {pattern:"sequential",N:5766,kntrie_int32_find:0.0721,kntrie_int32_insert:0.4381,kntrie_int32_erase:0.1411,kntrie_int32_mem:69872,kntrie_uint64_find:0.1761,kntrie_uint64_insert:0.5412,kntrie_uint64_erase:0.2382,kntrie_uint64_mem:70128,map_int32_find:0.5086,map_int32_insert:0.7531,map_int32_erase:0.3841,map_int32_mem:276768,map_uint64_find:0.5143,map_uint64_insert:0.7031,map_uint64_erase:0.3920,map_uint64_mem:276768,umap_int32_find:0.0178,umap_int32_insert:0.0951,umap_int32_erase:0.0386,umap_int32_mem:186008,umap_uint64_find:0.0186,umap_uint64_insert:0.0951,umap_uint64_erase:0.0408,umap_uint64_mem:186008},
  {pattern:"sequential",N:8649,kntrie_int32_find:0.1100,kntrie_int32_insert:0.5917,kntrie_int32_erase:0.2188,kntrie_int32_mem:104480,kntrie_uint64_find:0.2711,kntrie_uint64_insert:0.8034,kntrie_uint64_erase:0.3686,kntrie_uint64_mem:104736,map_int32_find:0.8745,map_int32_insert:1.1730,map_int32_erase:0.6212,map_int32_mem:415152,map_uint64_find:0.8530,map_uint64_insert:1.0922,map_uint64_erase:0.6357,map_uint64_mem:415152,umap_int32_find:0.0270,umap_int32_insert:0.1326,umap_int32_erase:0.0612,umap_int32_mem:277840,umap_uint64_find:0.0276,umap_uint64_insert:0.1395,umap_uint64_erase:0.0608,umap_uint64_mem:277840},
  {pattern:"sequential",N:12974,kntrie_int32_find:0.1667,kntrie_int32_insert:0.8879,kntrie_int32_erase:0.3298,kntrie_int32_mem:156592,kntrie_uint64_find:0.4121,kntrie_uint64_insert:1.1566,kntrie_uint64_erase:0.5575,kntrie_uint64_mem:156848,map_int32_find:1.4417,map_int32_insert:1.8908,map_int32_erase:1.0404,map_int32_mem:622752,map_uint64_find:1.4406,map_uint64_insert:1.7487,map_uint64_erase:1.0358,map_uint64_mem:622752,umap_int32_find:0.0425,umap_int32_insert:0.1939,umap_int32_erase:0.0908,umap_int32_mem:415240,umap_uint64_find:0.0397,umap_uint64_insert:0.2057,umap_uint64_erase:0.0900,umap_uint64_mem:415240},
  {pattern:"sequential",N:19461,kntrie_int32_find:0.2550,kntrie_int32_insert:1.2443,kntrie_int32_erase:0.5148,kntrie_int32_mem:235696,kntrie_uint64_find:0.6222,kntrie_uint64_insert:1.7593,kntrie_uint64_erase:0.8590,kntrie_uint64_mem:235952,map_int32_find:2.4408,map_int32_insert:3.0256,map_int32_erase:1.6617,map_int32_mem:934128,map_uint64_find:2.4875,map_uint64_insert:2.8301,map_uint64_erase:1.6670,map_uint64_mem:934128,umap_int32_find:0.0594,umap_int32_insert:0.3082,umap_int32_erase:0.1399,umap_int32_mem:633088,umap_uint64_find:0.0656,umap_uint64_insert:0.2979,umap_uint64_erase:0.1555,umap_uint64_mem:633088},
  {pattern:"sequential",N:29192,kntrie_int32_find:0.4002,kntrie_int32_insert:1.8228,kntrie_int32_erase:0.8116,kntrie_int32_mem:353296,kntrie_uint64_find:0.9410,kntrie_uint64_insert:2.6145,kntrie_uint64_erase:1.3028,kntrie_uint64_mem:353552,map_int32_find:4.8248,map_int32_insert:4.8766,map_int32_erase:2.9636,map_int32_mem:1401216,map_uint64_find:4.6497,map_uint64_insert:4.5707,map_uint64_erase:2.8458,map_uint64_mem:1401216,umap_int32_find:0.1057,umap_int32_insert:0.4640,umap_int32_erase:0.2137,umap_int32_mem:946424,umap_uint64_find:0.1113,umap_uint64_insert:0.4442,umap_uint64_erase:0.2300,umap_uint64_mem:946424},
  {pattern:"sequential",N:43789,kntrie_int32_find:0.6250,kntrie_int32_insert:2.6556,kntrie_int32_erase:1.2322,kntrie_int32_mem:529936,kntrie_uint64_find:1.4643,kntrie_uint64_insert:3.9519,kntrie_uint64_erase:1.9764,kntrie_uint64_mem:530192,map_int32_find:9.0146,map_int32_insert:8.2179,map_int32_erase:5.2944,map_int32_mem:2101872,map_uint64_find:9.4199,map_uint64_insert:7.6932,map_uint64_erase:5.3809,map_uint64_mem:2101872,umap_int32_find:0.2322,umap_int32_insert:0.6996,umap_int32_erase:0.4697,umap_int32_mem:1414784,umap_uint64_find:0.2596,umap_uint64_insert:0.6942,umap_uint64_erase:0.5278,umap_uint64_mem:1414784},
  {pattern:"sequential",N:65684,kntrie_int32_find:0.9844,kntrie_int32_insert:3.8122,kntrie_int32_erase:1.8671,kntrie_int32_mem:796312,kntrie_uint64_find:2.2481,kntrie_uint64_insert:6.0803,kntrie_uint64_erase:3.0151,kntrie_uint64_mem:796568,map_int32_find:17.8845,map_int32_insert:14.6461,map_int32_erase:9.9189,map_int32_mem:3152832,map_uint64_find:17.2561,map_uint64_insert:14.0446,map_uint64_erase:9.7063,map_uint64_mem:3152832,umap_int32_find:0.5407,umap_int32_insert:1.0583,umap_int32_erase:0.9810,umap_int32_mem:2114872,umap_uint64_find:0.5462,umap_uint64_insert:1.0175,umap_uint64_erase:1.2086,umap_uint64_mem:2114872},
  {pattern:"sequential",N:98526,kntrie_int32_find:1.5026,kntrie_int32_insert:6.0988,kntrie_int32_erase:2.8313,kntrie_int32_mem:1192608,kntrie_uint64_find:3.2595,kntrie_uint64_insert:9.1007,kntrie_uint64_erase:4.3175,kntrie_uint64_mem:1192864,map_int32_find:33.1635,map_int32_insert:25.9817,map_int32_erase:18.4065,map_int32_mem:4729248,map_uint64_find:33.9567,map_uint64_insert:24.9051,map_uint64_erase:17.8065,map_uint64_mem:4729248,umap_int32_find:1.0510,umap_int32_insert:1.8819,umap_int32_erase:2.1239,umap_int32_mem:3162488,umap_uint64_find:1.0647,umap_uint64_insert:1.7794,umap_uint64_erase:2.1075,umap_uint64_mem:3162488},
  {pattern:"sequential",N:147789,kntrie_int32_find:2.3366,kntrie_int32_insert:9.1379,kntrie_int32_erase:4.2262,kntrie_int32_mem:1789680,kntrie_uint64_find:5.2204,kntrie_uint64_insert:13.6067,kntrie_uint64_erase:6.6711,kntrie_uint64_mem:1789936,map_int32_find:59.4548,map_int32_insert:44.9174,map_int32_erase:31.5783,map_int32_mem:7093872,map_uint64_find:61.5330,map_uint64_insert:46.4127,map_uint64_erase:31.5616,map_uint64_mem:7093872,umap_int32_find:1.8499,umap_int32_insert:4.3234,umap_int32_erase:3.5462,umap_int32_mem:4729280,umap_uint64_find:1.9341,umap_uint64_insert:4.1430,umap_uint64_erase:3.5403,umap_uint64_mem:4729280},
  {pattern:"sequential",N:221683,kntrie_int32_find:4.6251,kntrie_int32_insert:14.8523,kntrie_int32_erase:6.9673,kntrie_int32_mem:2683616,kntrie_uint64_find:9.6302,kntrie_uint64_insert:21.8627,kntrie_uint64_erase:10.8806,kntrie_uint64_mem:2683872,map_int32_find:116.8884,map_int32_insert:86.4693,map_int32_erase:61.5098,map_int32_mem:10640784,map_uint64_find:117.7475,map_uint64_insert:88.5503,map_uint64_erase:59.4455,map_uint64_mem:10640784,umap_int32_find:2.9865,umap_int32_insert:7.6714,umap_int32_erase:6.4003,umap_int32_mem:7215568,umap_uint64_find:3.1498,umap_uint64_insert:7.5582,umap_uint64_erase:6.4424,umap_uint64_mem:7215568},
  {pattern:"sequential",N:332525,kntrie_int32_find:9.2965,kntrie_int32_insert:24.3000,kntrie_int32_erase:12.3555,kntrie_int32_mem:4026096,kntrie_uint64_find:16.6240,kntrie_uint64_insert:35.3561,kntrie_uint64_erase:18.9371,kntrie_uint64_mem:4026352,map_int32_find:205.4877,map_int32_insert:166.4649,map_int32_erase:107.1038,map_int32_mem:15961200,map_uint64_find:214.2718,map_uint64_insert:161.9350,map_uint64_erase:111.1389,map_uint64_mem:15961200,umap_int32_find:4.8637,umap_int32_insert:12.3695,umap_int32_erase:10.1640,umap_int32_mem:10789088,umap_uint64_find:5.0436,umap_uint64_insert:12.8914,umap_uint64_erase:10.2875,umap_uint64_mem:10789088},
  {pattern:"sequential",N:498788,kntrie_int32_find:16.4403,kntrie_int32_insert:41.3346,kntrie_int32_erase:24.8801,kntrie_int32_mem:6039792,kntrie_uint64_find:25.9675,kntrie_uint64_insert:58.2789,kntrie_uint64_erase:32.3191,kntrie_uint64_mem:6040048,map_int32_find:405.3148,map_int32_insert:296.6261,map_int32_erase:187.2714,map_int32_mem:23941824,map_uint64_find:375.1660,map_uint64_insert:274.8250,map_uint64_erase:189.6131,map_uint64_mem:23941824,umap_int32_find:8.4252,umap_int32_insert:19.5975,umap_int32_erase:17.9522,umap_int32_mem:16132840,umap_uint64_find:7.2563,umap_uint64_insert:19.0398,umap_uint64_erase:15.4381,umap_uint64_mem:16132840},
  {pattern:"sequential",N:748182,kntrie_int32_find:24.3760,kntrie_int32_insert:67.5577,kntrie_int32_erase:40.9652,kntrie_int32_mem:9059952,kntrie_uint64_find:44.2436,kntrie_uint64_insert:99.4519,kntrie_uint64_erase:60.0807,kntrie_uint64_mem:9060208,map_int32_find:750.0540,map_int32_insert:533.1589,map_int32_erase:333.5663,map_int32_mem:35912736,map_uint64_find:699.4932,map_uint64_insert:483.0833,map_uint64_erase:331.5083,map_uint64_mem:35912736,umap_int32_find:14.3158,umap_int32_insert:31.3913,umap_int32_erase:24.1882,umap_int32_mem:24124760,umap_uint64_find:12.5531,umap_uint64_insert:27.1793,umap_uint64_erase:25.0488,umap_uint64_mem:24124760},
  {pattern:"sequential",N:1122274,kntrie_int32_find:44.1700,kntrie_int32_insert:125.5922,kntrie_int32_erase:77.6985,kntrie_int32_mem:13589920,kntrie_uint64_find:75.7837,kntrie_uint64_insert:182.0309,kntrie_uint64_erase:111.5403,kntrie_uint64_mem:13590176,umap_int32_find:24.2165,umap_int32_insert:51.7418,umap_int32_erase:45.6058,umap_int32_mem:36077144,umap_uint64_find:24.2057,umap_uint64_insert:51.8923,umap_uint64_erase:45.7245,umap_uint64_mem:36077144},
  {pattern:"sequential",N:1683411,kntrie_int32_find:85.2960,kntrie_int32_insert:238.3966,kntrie_int32_erase:140.8109,kntrie_int32_mem:20384720,kntrie_uint64_find:130.2067,kntrie_uint64_insert:316.9531,kntrie_uint64_erase:187.1577,kntrie_uint64_mem:20384976,umap_int32_find:41.4060,umap_int32_insert:82.0782,umap_int32_erase:74.6075,umap_int32_mem:53952736,umap_uint64_find:40.9649,umap_uint64_insert:81.0727,umap_uint64_erase:78.4635,umap_uint64_mem:53952736},
  {pattern:"sequential",N:2525116,kntrie_int32_find:122.3790,kntrie_int32_insert:334.1694,kntrie_int32_erase:212.7359,kntrie_int32_mem:30577856,kntrie_uint64_find:236.0102,kntrie_uint64_insert:480.5213,kntrie_uint64_erase:291.4645,kntrie_uint64_mem:30578112,umap_int32_find:65.7161,umap_int32_insert:132.8236,umap_int32_erase:118.9179,umap_int32_mem:82332776,umap_uint64_find:62.2422,umap_uint64_insert:123.0313,umap_uint64_erase:115.2840,umap_uint64_mem:82332776},
];


const LINES = [
  { key: "kntrie_int32", color: "#3b82f6", dash: [], width: 2.5, label: "kntrie i32" },
  { key: "kntrie_uint64", color: "#93c5fd", dash: [6,3], width: 1.5, label: "kntrie u64" },
  { key: "map_int32", color: "#ef4444", dash: [], width: 2.5, label: "map i32" },
  { key: "map_uint64", color: "#fca5a5", dash: [6,3], width: 1.5, label: "map u64" },
  { key: "umap_int32", color: "#22c55e", dash: [], width: 2.5, label: "umap i32" },
  { key: "umap_uint64", color: "#86efac", dash: [6,3], width: 1.5, label: "umap u64" },
];

const MEM_LINES = [
  ...LINES,
  { key: "raw_int32", color: "#888", dash: [], width: 1, label: "raw i32" },
  { key: "raw_uint64", color: "#555", dash: [3,3], width: 1, label: "raw u64" },
];

const METRICS = [
  { id: "find", suffix: "find", convert: (ms, n) => (ms * 1e6) / n },
  { id: "insert", suffix: "insert", convert: (ms, n) => (ms * 1e6) / n },
  { id: "erase", suffix: "erase", convert: (ms, n) => (ms * 1e6) / (n / 2) },
  { id: "mem", suffix: "mem", convert: (b, n) => b / n },
];

function buildData(pattern, metric) {
  const lines = metric.id === "mem" ? MEM_LINES : LINES;
  return RAW_DATA
    .filter(r => r.pattern === pattern)
    .map(r => {
      const pt = { N: r.N };
      for (const l of lines) {
        if (l.key === "raw_int32") { pt[l.key] = 12; continue; }
        if (l.key === "raw_uint64") { pt[l.key] = 16; continue; }
        const raw = r[l.key + "_" + metric.suffix];
        if (raw != null) pt[l.key] = metric.convert(raw, r.N);
      }
      return pt;
    });
}

const charts = {};

function makeChart(canvasId, metric) {
  const ctx = document.getElementById(canvasId).getContext("2d");
  const lines = metric.id === "mem" ? MEM_LINES : LINES;
  const data = buildData("random", metric);

  charts[canvasId] = new Chart(ctx, {
    type: "line",
    data: {
      labels: data.map(d => d.N),
      datasets: lines.map(l => ({
        label: l.label,
        data: data.map(d => d[l.key] ?? null),
        borderColor: l.color,
        backgroundColor: l.color + "33",
        borderWidth: l.width,
        borderDash: l.dash,
        pointRadius: 0,
        pointHitRadius: 8,
        tension: 0.2,
        spanGaps: true,
      })),
    },
    options: {
      responsive: true,
      interaction: { mode: "index", intersect: false },
      plugins: {
        legend: { display: true, labels: { color: "#bbb", font: { size: 11 }, boxWidth: 20, padding: 10 } },
        tooltip: {
          backgroundColor: "#1a1a2e",
          borderColor: "#444",
          borderWidth: 1,
          titleColor: "#aaa",
          bodyColor: "#ddd",
          callbacks: {
            title: (items) => {
              const v = items[0].parsed.x;
              if (v >= 1e6) return "N = " + (v/1e6).toFixed(1) + "M";
              if (v >= 1e3) return "N = " + (v/1e3).toFixed(1) + "K";
              return "N = " + v;
            },
            label: (item) => {
              const v = item.parsed.y;
              if (v == null) return null;
              const s = v < 0.1 ? v.toFixed(3) : v < 10 ? v.toFixed(2) : v < 1000 ? v.toFixed(1) : v.toFixed(0);
              return " " + item.dataset.label + ": " + s;
            },
          },
        },
      },
      scales: {
        x: {
          type: "logarithmic",
          title: { display: false },
          ticks: { color: "#888", font: { size: 11 },
            callback: (v) => v >= 1e6 ? (v/1e6)+"M" : v >= 1e3 ? (v/1e3)+"K" : v },
          grid: { color: "#2a2a3e" },
        },
        y: {
          type: "logarithmic",
          ticks: { color: "#888", font: { size: 10 },
            callback: (v) => v < 0.1 ? v.toFixed(2) : v < 10 ? v.toFixed(1) : v >= 1000 ? v.toFixed(0) : v.toFixed(1) },
          grid: { color: "#2a2a3e" },
        },
      },
    },
  });
  charts[canvasId]._metric = metric;
}

METRICS.forEach(m => makeChart("c_" + m.id, m));

function show(pattern) {
  document.querySelectorAll(".btns button").forEach(b => b.classList.remove("active"));
  event.target.classList.add("active");
  for (const [id, chart] of Object.entries(charts)) {
    const m = chart._metric;
    const lines = m.id === "mem" ? MEM_LINES : LINES;
    const data = buildData(pattern, m);
    chart.data.labels = data.map(d => d.N);
    lines.forEach((l, i) => {
      chart.data.datasets[i].data = data.map(d => d[l.key] ?? null);
    });
    chart.update("none");
  }
}
</script>
</body>
</html>
