# kntrie3 Benchmark Results

Compiler: `g++ -std=c++23 -O2 -march=x86-64-v3`

Workload: insert N, find N (all hit), erase N/2, churn N/4 old + N/4 new, find N (25% miss)

- N = number of entries
- F = Find all N keys in ms (all hits)
- I = Insert N keys in ms
- M = Memory after insert in KB
- B = Bytes per entry after insert
- E = Erase N/2 keys in ms
- C2 = Churn insert N/4 old + N/4 new in ms
- F2 = Find all N original keys in ms (25% misses)
- M2 = Memory after churn in KB
- B2 = Bytes per entry after churn

In _vs_ rows, >1x means kntrie is better. **Bold** = kntrie wins.

## uint64_t — random

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.00 | 0.10 | 21.7 | 22.2 | 0.03 | 0.07 | 0.00 | 22.0 | 22.6 |
|  | map | 0.04 | 0.11 | 70.3 | 72.0 | 0.06 | 0.06 | 0.03 | 70.3 | 72.0 |
| | _map vs_ | _**9.50x**_ | _**1.13x**_ | _**3.24x**_ | _**3.24x**_ | _**1.95x**_ | _0.92x_ | _**7.59x**_ | _**3.19x**_ | _**3.19x**_ |
|  | umap | 0.01 | 0.04 | 70.6 | 72.2 | 0.02 | 0.02 | 0.01 | 70.6 | 72.2 |
| | _umap vs_ | _**1.24x**_ | _0.40x_ | _**3.25x**_ | _**3.25x**_ | _0.59x_ | _0.23x_ | _**1.16x**_ | _**3.20x**_ | _**3.20x**_ |
| 10K | kntrie | 0.26 | 0.92 | 175.7 | 18.0 | 0.28 | 0.42 | 0.31 | 174.9 | 17.9 |
|  | map | 1.02 | 1.55 | 703.1 | 72.0 | 0.80 | 0.81 | 1.02 | 703.1 | 72.0 |
| | _map vs_ | _**3.94x**_ | _**1.68x**_ | _**4.00x**_ | _**4.00x**_ | _**2.88x**_ | _**1.91x**_ | _**3.30x**_ | _**4.02x**_ | _**4.02x**_ |
|  | umap | 0.11 | 0.30 | 705.3 | 72.2 | 0.15 | 0.15 | 0.18 | 705.3 | 72.2 |
| | _umap vs_ | _0.41x_ | _0.33x_ | _**4.01x**_ | _**4.01x**_ | _0.55x_ | _0.35x_ | _0.58x_ | _**4.03x**_ | _**4.03x**_ |
| 100K | kntrie | 4.51 | 13.70 | 1701.0 | 17.4 | 3.19 | 5.21 | 4.64 | 1703.0 | 17.4 |
|  | map | 37.40 | 46.62 | 7031.2 | 72.0 | 21.02 | 18.69 | 43.15 | 7031.2 | 72.0 |
| | _map vs_ | _**8.30x**_ | _**3.40x**_ | _**4.13x**_ | _**4.13x**_ | _**6.58x**_ | _**3.59x**_ | _**9.31x**_ | _**4.13x**_ | _**4.13x**_ |
|  | umap | 2.60 | 5.13 | 7092.9 | 72.6 | 2.97 | 3.52 | 4.52 | 7092.9 | 72.6 |
| | _umap vs_ | _0.58x_ | _0.37x_ | _**4.17x**_ | _**4.17x**_ | _0.93x_ | _0.68x_ | _0.97x_ | _**4.16x**_ | _**4.16x**_ |
| 1M | kntrie | 134.80 | 229.04 | 16386.0 | 16.8 | 76.54 | 136.67 | 146.76 | 16386.0 | 16.8 |
|  | map | 1451.31 | 1098.41 | 70312.5 | 72.0 | 750.33 | 844.27 | 1629.48 | 70312.5 | 72.0 |
| | _map vs_ | _**10.77x**_ | _**4.80x**_ | _**4.29x**_ | _**4.29x**_ | _**9.80x**_ | _**6.18x**_ | _**11.10x**_ | _**4.29x**_ | _**4.29x**_ |
|  | umap | 43.42 | 130.97 | 70752.5 | 72.5 | 68.48 | 78.67 | 88.90 | 70752.5 | 72.5 |
| | _umap vs_ | _0.32x_ | _0.57x_ | _**4.32x**_ | _**4.32x**_ | _0.89x_ | _0.58x_ | _0.61x_ | _**4.32x**_ | _**4.32x**_ |

## int32_t — random

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.00 | 0.09 | 18.4 | 18.9 | 0.04 | 0.05 | 0.00 | 18.7 | 19.2 |
|  | map | 0.04 | 0.13 | 70.3 | 72.0 | 0.07 | 0.07 | 0.03 | 70.3 | 72.0 |
| | _map vs_ | _**9.81x**_ | _**1.43x**_ | _**3.81x**_ | _**3.81x**_ | _**1.85x**_ | _**1.45x**_ | _**7.11x**_ | _**3.76x**_ | _**3.76x**_ |
|  | umap | 0.00 | 0.04 | 70.6 | 72.2 | 0.01 | 0.02 | 0.01 | 70.6 | 72.2 |
| | _umap vs_ | _**1.21x**_ | _0.40x_ | _**3.83x**_ | _**3.83x**_ | _0.42x_ | _0.34x_ | _**1.29x**_ | _**3.77x**_ | _**3.77x**_ |
| 10K | kntrie | 0.25 | 1.03 | 134.4 | 13.8 | 3.96 | 0.44 | 0.27 | 134.7 | 13.8 |
|  | map | 1.01 | 1.40 | 703.1 | 72.0 | 0.82 | 0.74 | 1.10 | 703.1 | 72.0 |
| | _map vs_ | _**3.99x**_ | _**1.36x**_ | _**5.23x**_ | _**5.23x**_ | _0.21x_ | _**1.70x**_ | _**4.03x**_ | _**5.22x**_ | _**5.22x**_ |
|  | umap | 0.11 | 0.30 | 705.3 | 72.2 | 0.15 | 0.15 | 0.19 | 705.3 | 72.2 |
| | _umap vs_ | _0.43x_ | _0.29x_ | _**5.25x**_ | _**5.25x**_ | _0.04x_ | _0.34x_ | _0.68x_ | _**5.24x**_ | _**5.24x**_ |
| 100.0K | kntrie | 4.12 | 10.76 | 1291.0 | 13.2 | 3.04 | 4.88 | 4.28 | 1291.0 | 13.2 |
|  | map | 36.03 | 28.29 | 7031.0 | 72.0 | 14.33 | 17.04 | 39.50 | 7031.0 | 72.0 |
| | _map vs_ | _**8.75x**_ | _**2.63x**_ | _**5.45x**_ | _**5.45x**_ | _**4.72x**_ | _**3.49x**_ | _**9.22x**_ | _**5.45x**_ | _**5.45x**_ |
|  | umap | 2.56 | 5.24 | 7092.8 | 72.6 | 2.69 | 3.08 | 4.35 | 7092.8 | 72.6 |
| | _umap vs_ | _0.62x_ | _0.49x_ | _**5.49x**_ | _**5.49x**_ | _0.88x_ | _0.63x_ | _**1.02x**_ | _**5.49x**_ | _**5.49x**_ |
| 999.9K | kntrie | 113.13 | 179.10 | 12298.0 | 12.6 | 72.68 | 111.66 | 120.57 | 12290.0 | 12.6 |
|  | map | 1447.68 | 966.55 | 70304.8 | 72.0 | 664.12 | 778.13 | 1716.38 | 70304.8 | 72.0 |
| | _map vs_ | _**12.80x**_ | _**5.40x**_ | _**5.72x**_ | _**5.72x**_ | _**9.14x**_ | _**6.97x**_ | _**14.24x**_ | _**5.72x**_ | _**5.72x**_ |
|  | umap | 49.73 | 156.91 | 70745.7 | 72.5 | 70.38 | 93.07 | 90.67 | 70745.6 | 72.5 |
| | _umap vs_ | _0.44x_ | _0.88x_ | _**5.75x**_ | _**5.75x**_ | _0.97x_ | _0.83x_ | _0.75x_ | _**5.76x**_ | _**5.76x**_ |

## uint64_t — sequential

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.01 | 0.15 | 18.0 | 18.4 | 0.03 | 0.05 | 0.01 | 20.4 | 20.9 |
|  | map | 0.04 | 0.12 | 70.3 | 72.0 | 0.06 | 0.05 | 0.03 | 70.3 | 72.0 |
| | _map vs_ | _**2.61x**_ | _0.82x_ | _**3.91x**_ | _**3.91x**_ | _**1.81x**_ | _0.99x_ | _**2.26x**_ | _**3.44x**_ | _**3.44x**_ |
|  | umap | 0.00 | 0.02 | 70.6 | 72.2 | 0.01 | 0.01 | 0.00 | 70.6 | 72.2 |
| | _umap vs_ | _0.21x_ | _0.15x_ | _**3.92x**_ | _**3.92x**_ | _0.19x_ | _0.22x_ | _0.27x_ | _**3.45x**_ | _**3.45x**_ |
| 10K | kntrie | 0.09 | 1.57 | 82.4 | 8.4 | 0.21 | 0.44 | 0.12 | 107.8 | 11.0 |
|  | map | 1.00 | 1.39 | 703.1 | 72.0 | 0.73 | 0.69 | 1.07 | 703.1 | 72.0 |
| | _map vs_ | _**10.99x**_ | _0.88x_ | _**8.53x**_ | _**8.53x**_ | _**3.51x**_ | _**1.57x**_ | _**8.78x**_ | _**6.52x**_ | _**6.52x**_ |
|  | umap | 0.03 | 0.18 | 705.3 | 72.2 | 0.06 | 0.11 | 0.09 | 705.3 | 72.2 |
| | _umap vs_ | _0.34x_ | _0.11x_ | _**8.56x**_ | _**8.56x**_ | _0.28x_ | _0.26x_ | _0.72x_ | _**6.54x**_ | _**6.54x**_ |
| 100K | kntrie | 2.06 | 14.32 | 805.6 | 8.2 | 3.50 | 5.20 | 3.41 | 1036.0 | 10.6 |
|  | map | 33.79 | 26.35 | 7031.2 | 72.0 | 14.58 | 14.69 | 31.14 | 7031.2 | 72.0 |
| | _map vs_ | _**16.40x**_ | _**1.84x**_ | _**8.73x**_ | _**8.73x**_ | _**4.17x**_ | _**2.82x**_ | _**9.14x**_ | _**6.79x**_ | _**6.79x**_ |
|  | umap | 1.13 | 2.31 | 7092.9 | 72.6 | 0.88 | 2.41 | 2.27 | 7092.9 | 72.6 |
| | _umap vs_ | _0.55x_ | _0.16x_ | _**8.80x**_ | _**8.80x**_ | _0.25x_ | _0.46x_ | _0.67x_ | _**6.85x**_ | _**6.85x**_ |
| 1M | kntrie | 72.72 | 210.26 | 8036.1 | 8.2 | 74.77 | 105.58 | 83.66 | 10253.1 | 10.5 |
|  | map | 1465.13 | 1188.10 | 70312.5 | 72.0 | 619.35 | 722.89 | 1521.72 | 70312.5 | 72.0 |
| | _map vs_ | _**20.15x**_ | _**5.65x**_ | _**8.75x**_ | _**8.75x**_ | _**8.28x**_ | _**6.85x**_ | _**18.19x**_ | _**6.86x**_ | _**6.86x**_ |
|  | umap | 21.50 | 49.85 | 70752.5 | 72.5 | 20.06 | 61.55 | 45.83 | 70752.5 | 72.5 |
| | _umap vs_ | _0.30x_ | _0.24x_ | _**8.80x**_ | _**8.80x**_ | _0.27x_ | _0.58x_ | _0.55x_ | _**6.90x**_ | _**6.90x**_ |

## int32_t — sequential

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.01 | 0.12 | 14.0 | 14.3 | 0.03 | 0.06 | 0.01 | 18.0 | 18.4 |
|  | map | 0.04 | 0.15 | 70.3 | 72.0 | 0.06 | 0.05 | 0.03 | 70.3 | 72.0 |
| | _map vs_ | _**2.98x**_ | _**1.29x**_ | _**5.02x**_ | _**5.02x**_ | _**1.85x**_ | _0.93x_ | _**1.99x**_ | _**3.91x**_ | _**3.91x**_ |
|  | umap | 0.00 | 0.02 | 70.6 | 72.2 | 0.01 | 0.01 | 0.00 | 70.6 | 72.2 |
| | _umap vs_ | _0.25x_ | _0.19x_ | _**5.04x**_ | _**5.04x**_ | _0.20x_ | _0.21x_ | _0.29x_ | _**3.92x**_ | _**3.92x**_ |
| 10K | kntrie | 0.09 | 1.64 | 82.4 | 8.4 | 0.22 | 0.52 | 0.12 | 100.2 | 10.3 |
|  | map | 1.02 | 1.48 | 703.1 | 72.0 | 0.76 | 0.74 | 1.05 | 703.1 | 72.0 |
| | _map vs_ | _**11.74x**_ | _0.91x_ | _**8.53x**_ | _**8.53x**_ | _**3.43x**_ | _**1.43x**_ | _**8.73x**_ | _**7.01x**_ | _**7.01x**_ |
|  | umap | 0.03 | 0.18 | 705.3 | 72.2 | 0.06 | 0.12 | 0.10 | 705.3 | 72.2 |
| | _umap vs_ | _0.36x_ | _0.11x_ | _**8.56x**_ | _**8.56x**_ | _0.26x_ | _0.23x_ | _0.85x_ | _**7.04x**_ | _**7.04x**_ |
| 100K | kntrie | 1.10 | 12.23 | 805.4 | 8.2 | 2.51 | 4.04 | 1.43 | 948.1 | 9.7 |
|  | map | 32.52 | 26.40 | 7031.2 | 72.0 | 15.53 | 17.02 | 32.74 | 7031.2 | 72.0 |
| | _map vs_ | _**29.55x**_ | _**2.16x**_ | _**8.73x**_ | _**8.73x**_ | _**6.18x**_ | _**4.21x**_ | _**22.93x**_ | _**7.42x**_ | _**7.42x**_ |
|  | umap | 1.13 | 2.12 | 7092.9 | 72.6 | 0.86 | 2.35 | 2.37 | 7092.9 | 72.6 |
| | _umap vs_ | _**1.02x**_ | _0.17x_ | _**8.81x**_ | _**8.81x**_ | _0.34x_ | _0.58x_ | _**1.66x**_ | _**7.48x**_ | _**7.48x**_ |
| 1M | kntrie | 32.18 | 185.31 | 8036.0 | 8.2 | 59.61 | 78.64 | 29.11 | 9240.6 | 9.5 |
|  | map | 1482.12 | 1070.55 | 70312.5 | 72.0 | 642.20 | 714.88 | 1587.03 | 70312.5 | 72.0 |
| | _map vs_ | _**46.06x**_ | _**5.78x**_ | _**8.75x**_ | _**8.75x**_ | _**10.77x**_ | _**9.09x**_ | _**54.52x**_ | _**7.61x**_ | _**7.61x**_ |
|  | umap | 26.12 | 53.51 | 70752.5 | 72.5 | 21.16 | 63.09 | 48.00 | 70752.5 | 72.5 |
| | _umap vs_ | _0.81x_ | _0.29x_ | _**8.80x**_ | _**8.80x**_ | _0.36x_ | _0.80x_ | _**1.65x**_ | _**7.66x**_ | _**7.66x**_ |

## uint64_t — dense16

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 787 | kntrie | 0.01 | 0.10 | 16.0 | 20.8 | 0.03 | 0.04 | 0.01 | 17.2 | 22.4 |
|  | map | 0.02 | 0.10 | 55.3 | 72.0 | 0.05 | 0.04 | 0.01 | 55.3 | 71.9 |
| | _map vs_ | _**1.56x**_ | _0.93x_ | _**3.46x**_ | _**3.46x**_ | _**2.00x**_ | _0.97x_ | _**1.14x**_ | _**3.22x**_ | _**3.22x**_ |
|  | umap | 0.00 | 0.02 | 55.6 | 72.4 | 0.01 | 0.01 | 0.00 | 55.6 | 72.3 |
| | _umap vs_ | _0.35x_ | _0.23x_ | _**3.48x**_ | _**3.48x**_ | _0.35x_ | _0.26x_ | _0.38x_ | _**3.23x**_ | _**3.23x**_ |
| 7.9K | kntrie | 0.07 | 1.03 | 68.6 | 8.8 | 0.15 | 0.38 | 0.10 | 89.4 | 11.5 |
|  | map | 0.77 | 1.10 | 558.6 | 72.0 | 0.58 | 0.55 | 0.75 | 558.6 | 72.0 |
| | _map vs_ | _**10.43x**_ | _**1.06x**_ | _**8.15x**_ | _**8.15x**_ | _**3.94x**_ | _**1.46x**_ | _**7.85x**_ | _**6.25x**_ | _**6.25x**_ |
|  | umap | 0.07 | 0.21 | 560.0 | 72.2 | 0.11 | 0.11 | 0.10 | 560.0 | 72.2 |
| | _umap vs_ | _0.90x_ | _0.20x_ | _**8.17x**_ | _**8.17x**_ | _0.72x_ | _0.29x_ | _**1.02x**_ | _**6.27x**_ | _**6.27x**_ |
| 78.7K | kntrie | 1.53 | 8.20 | 661.0 | 8.6 | 2.29 | 3.79 | 1.99 | 849.1 | 11.1 |
|  | map | 25.37 | 20.07 | 5530.3 | 72.0 | 12.20 | 12.39 | 23.20 | 5530.3 | 72.0 |
| | _map vs_ | _**16.56x**_ | _**2.45x**_ | _**8.37x**_ | _**8.37x**_ | _**5.32x**_ | _**3.27x**_ | _**11.66x**_ | _**6.51x**_ | _**6.51x**_ |
|  | umap | 1.57 | 3.31 | 5531.3 | 72.0 | 1.68 | 2.21 | 3.12 | 5531.3 | 72.0 |
| | _umap vs_ | _**1.02x**_ | _0.40x_ | _**8.37x**_ | _**8.37x**_ | _0.73x_ | _0.58x_ | _**1.57x**_ | _**6.51x**_ | _**6.51x**_ |
| 787.1K | kntrie | 42.40 | 121.69 | 6594.0 | 8.6 | 44.55 | 73.01 | 51.66 | 8385.9 | 10.9 |
|  | map | 1007.19 | 809.59 | 55341.8 | 72.0 | 445.64 | 489.58 | 1163.99 | 55341.8 | 72.0 |
| | _map vs_ | _**23.75x**_ | _**6.65x**_ | _**8.39x**_ | _**8.39x**_ | _**10.00x**_ | _**6.71x**_ | _**22.53x**_ | _**6.60x**_ | _**6.60x**_ |
|  | umap | 25.62 | 73.90 | 55709.8 | 72.5 | 34.95 | 52.71 | 49.70 | 55709.8 | 72.5 |
| | _umap vs_ | _0.60x_ | _0.61x_ | _**8.45x**_ | _**8.45x**_ | _0.78x_ | _0.72x_ | _0.96x_ | _**6.64x**_ | _**6.64x**_ |

## int32_t — dense16

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 787 | kntrie | 0.01 | 0.10 | 12.0 | 15.6 | 0.03 | 0.05 | 0.01 | 14.1 | 18.3 |
|  | map | 0.01 | 0.11 | 55.3 | 72.0 | 0.05 | 0.04 | 0.01 | 55.3 | 71.9 |
| | _map vs_ | _**1.36x**_ | _**1.16x**_ | _**4.61x**_ | _**4.61x**_ | _**1.47x**_ | _0.75x_ | _0.99x_ | _**3.93x**_ | _**3.93x**_ |
|  | umap | 0.00 | 0.03 | 55.6 | 72.4 | 0.01 | 0.01 | 0.00 | 55.6 | 72.3 |
| | _umap vs_ | _0.36x_ | _0.27x_ | _**4.63x**_ | _**4.63x**_ | _0.39x_ | _0.28x_ | _0.38x_ | _**3.95x**_ | _**3.95x**_ |
| 7.9K | kntrie | 0.07 | 1.10 | 68.6 | 8.8 | 0.14 | 0.40 | 0.09 | 83.5 | 10.8 |
|  | map | 0.76 | 1.12 | 558.6 | 72.0 | 0.57 | 0.55 | 0.77 | 558.6 | 72.0 |
| | _map vs_ | _**10.99x**_ | _**1.02x**_ | _**8.15x**_ | _**8.15x**_ | _**4.15x**_ | _**1.38x**_ | _**8.34x**_ | _**6.69x**_ | _**6.69x**_ |
|  | umap | 0.07 | 0.21 | 560.0 | 72.2 | 0.10 | 0.11 | 0.10 | 560.0 | 72.2 |
| | _umap vs_ | _**1.03x**_ | _0.19x_ | _**8.17x**_ | _**8.17x**_ | _0.72x_ | _0.28x_ | _**1.05x**_ | _**6.71x**_ | _**6.71x**_ |
| 78.7K | kntrie | 0.84 | 7.04 | 660.5 | 8.6 | 1.57 | 3.38 | 1.15 | 768.7 | 10.0 |
|  | map | 24.16 | 19.67 | 5530.3 | 72.0 | 11.20 | 11.43 | 22.53 | 5530.3 | 72.0 |
| | _map vs_ | _**28.92x**_ | _**2.79x**_ | _**8.37x**_ | _**8.37x**_ | _**7.14x**_ | _**3.38x**_ | _**19.61x**_ | _**7.19x**_ | _**7.19x**_ |
|  | umap | 1.59 | 3.66 | 5531.3 | 72.0 | 1.59 | 2.02 | 2.60 | 5531.3 | 72.0 |
| | _umap vs_ | _**1.91x**_ | _0.52x_ | _**8.37x**_ | _**8.37x**_ | _**1.01x**_ | _0.60x_ | _**2.26x**_ | _**7.20x**_ | _**7.20x**_ |
| 787.1K | kntrie | 26.66 | 112.18 | 6593.4 | 8.6 | 35.60 | 59.56 | 23.91 | 7662.2 | 10.0 |
|  | map | 1161.40 | 838.17 | 55341.8 | 72.0 | 457.81 | 542.21 | 1241.90 | 55341.8 | 72.0 |
| | _map vs_ | _**43.57x**_ | _**7.47x**_ | _**8.39x**_ | _**8.39x**_ | _**12.86x**_ | _**9.10x**_ | _**51.93x**_ | _**7.22x**_ | _**7.22x**_ |
|  | umap | 34.23 | 91.25 | 55709.8 | 72.5 | 41.66 | 64.26 | 55.28 | 55709.8 | 72.5 |
| | _umap vs_ | _**1.28x**_ | _0.81x_ | _**8.45x**_ | _**8.45x**_ | _**1.17x**_ | _**1.08x**_ | _**2.31x**_ | _**7.27x**_ | _**7.27x**_ |

