# kntrie3 Benchmark Results

Compiler: `g++ -std=c++23 -O2 -march=x86-64-v3`

Workload: insert N, find N (all hit), erase N/2, churn N/4 old + N/4 new, find N (25% miss)

- N = number of entries
- F = Find all N keys in ms (all hits)
- I = Insert N keys in ms
- M = Memory after insert in KB
- B = Bytes per entry after insert
- E = Erase N/2 keys in ms
- C2 = Churn insert N/4 old + N/4 new in ms
- F2 = Find all N original keys in ms (25% misses)
- M2 = Memory after churn in KB
- B2 = Bytes per entry after churn

In _vs_ rows, >1x means kntrie is better. **Bold** = kntrie wins.

## uint64_t — random

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.00 | 0.13 | 21.7 | 22.2 | 0.03 | 0.06 | 0.00 | 22.0 | 22.6 |
|  | map | 0.03 | 0.11 | 70.3 | 72.0 | 0.06 | 0.06 | 0.04 | 70.3 | 72.0 |
| | _map vs_ | _**7.61x**_ | _0.80x_ | _**3.24x**_ | _**3.24x**_ | _**2.13x**_ | _**1.06x**_ | _**9.34x**_ | _**3.19x**_ | _**3.19x**_ |
|  | umap | 0.00 | 0.03 | 70.6 | 72.2 | 0.01 | 0.01 | 0.01 | 70.6 | 72.2 |
| | _umap vs_ | _**1.09x**_ | _0.23x_ | _**3.25x**_ | _**3.25x**_ | _0.51x_ | _0.25x_ | _**1.22x**_ | _**3.20x**_ | _**3.20x**_ |
| 10K | kntrie | 0.25 | 0.90 | 175.7 | 18.0 | 0.28 | 0.39 | 0.28 | 174.9 | 17.9 |
|  | map | 1.00 | 1.37 | 703.1 | 72.0 | 0.77 | 0.75 | 1.05 | 703.1 | 72.0 |
| | _map vs_ | _**4.06x**_ | _**1.53x**_ | _**4.00x**_ | _**4.00x**_ | _**2.71x**_ | _**1.92x**_ | _**3.80x**_ | _**4.02x**_ | _**4.02x**_ |
|  | umap | 0.10 | 0.29 | 705.3 | 72.2 | 0.15 | 0.17 | 0.18 | 705.3 | 72.2 |
| | _umap vs_ | _0.40x_ | _0.32x_ | _**4.01x**_ | _**4.01x**_ | _0.53x_ | _0.44x_ | _0.66x_ | _**4.03x**_ | _**4.03x**_ |
| 100K | kntrie | 4.41 | 14.32 | 1701.0 | 17.4 | 3.27 | 5.42 | 4.59 | 1703.0 | 17.4 |
|  | map | 38.03 | 57.75 | 7031.2 | 72.0 | 17.08 | 17.90 | 34.16 | 7031.2 | 72.0 |
| | _map vs_ | _**8.63x**_ | _**4.03x**_ | _**4.13x**_ | _**4.13x**_ | _**5.23x**_ | _**3.30x**_ | _**7.43x**_ | _**4.13x**_ | _**4.13x**_ |
|  | umap | 2.48 | 5.39 | 7092.9 | 72.6 | 2.90 | 3.65 | 4.45 | 7092.9 | 72.6 |
| | _umap vs_ | _0.56x_ | _0.38x_ | _**4.17x**_ | _**4.17x**_ | _0.89x_ | _0.67x_ | _0.97x_ | _**4.16x**_ | _**4.16x**_ |
| 1M | kntrie | 127.82 | 220.94 | 16386.0 | 16.8 | 72.63 | 137.41 | 134.79 | 16386.0 | 16.8 |
|  | map | 1154.19 | 993.06 | 70312.5 | 72.0 | 465.89 | 557.96 | 1078.27 | 70312.5 | 72.0 |
| | _map vs_ | _**9.03x**_ | _**4.49x**_ | _**4.29x**_ | _**4.29x**_ | _**6.41x**_ | _**4.06x**_ | _**8.00x**_ | _**4.29x**_ | _**4.29x**_ |
|  | umap | 33.88 | 81.82 | 70752.5 | 72.5 | 40.91 | 51.31 | 57.66 | 70752.5 | 72.5 |
| | _umap vs_ | _0.27x_ | _0.37x_ | _**4.32x**_ | _**4.32x**_ | _0.56x_ | _0.37x_ | _0.43x_ | _**4.32x**_ | _**4.32x**_ |

## int32_t — random

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.00 | 0.09 | 18.4 | 18.9 | 0.03 | 0.05 | 0.00 | 18.7 | 19.2 |
|  | map | 0.04 | 0.11 | 70.3 | 72.0 | 0.05 | 0.05 | 0.03 | 70.3 | 72.0 |
| | _map vs_ | _**11.08x**_ | _**1.15x**_ | _**3.81x**_ | _**3.81x**_ | _**1.82x**_ | _**1.04x**_ | _**8.99x**_ | _**3.76x**_ | _**3.76x**_ |
|  | umap | 0.00 | 0.04 | 70.6 | 72.2 | 0.01 | 0.02 | 0.01 | 70.6 | 72.2 |
| | _umap vs_ | _**1.45x**_ | _0.43x_ | _**3.83x**_ | _**3.83x**_ | _0.44x_ | _0.31x_ | _**1.65x**_ | _**3.77x**_ | _**3.77x**_ |
| 10K | kntrie | 0.25 | 0.87 | 134.4 | 13.8 | 4.62 | 0.42 | 0.26 | 134.7 | 13.8 |
|  | map | 0.97 | 1.40 | 703.1 | 72.0 | 0.72 | 0.81 | 1.04 | 703.1 | 72.0 |
| | _map vs_ | _**3.86x**_ | _**1.60x**_ | _**5.23x**_ | _**5.23x**_ | _0.16x_ | _**1.95x**_ | _**3.98x**_ | _**5.22x**_ | _**5.22x**_ |
|  | umap | 0.11 | 0.30 | 705.3 | 72.2 | 0.15 | 0.15 | 0.18 | 705.3 | 72.2 |
| | _umap vs_ | _0.44x_ | _0.34x_ | _**5.25x**_ | _**5.25x**_ | _0.03x_ | _0.36x_ | _0.68x_ | _**5.24x**_ | _**5.24x**_ |
| 100.0K | kntrie | 4.11 | 9.30 | 1291.0 | 13.2 | 3.02 | 4.80 | 4.41 | 1291.0 | 13.2 |
|  | map | 29.26 | 30.21 | 7031.0 | 72.0 | 14.86 | 17.36 | 31.98 | 7031.0 | 72.0 |
| | _map vs_ | _**7.13x**_ | _**3.25x**_ | _**5.45x**_ | _**5.45x**_ | _**4.92x**_ | _**3.62x**_ | _**7.25x**_ | _**5.45x**_ | _**5.45x**_ |
|  | umap | 2.41 | 5.22 | 7092.8 | 72.6 | 2.65 | 3.10 | 4.33 | 7092.8 | 72.6 |
| | _umap vs_ | _0.59x_ | _0.56x_ | _**5.49x**_ | _**5.49x**_ | _0.88x_ | _0.65x_ | _0.98x_ | _**5.49x**_ | _**5.49x**_ |
| 999.9K | kntrie | 97.10 | 166.29 | 12298.0 | 12.6 | 57.17 | 98.40 | 98.07 | 12290.0 | 12.6 |
|  | map | 1026.42 | 742.88 | 70304.8 | 72.0 | 433.34 | 554.34 | 1138.73 | 70304.8 | 72.0 |
| | _map vs_ | _**10.57x**_ | _**4.47x**_ | _**5.72x**_ | _**5.72x**_ | _**7.58x**_ | _**5.63x**_ | _**11.61x**_ | _**5.72x**_ | _**5.72x**_ |
|  | umap | 36.26 | 126.05 | 70745.7 | 72.5 | 42.64 | 62.01 | 62.29 | 70745.6 | 72.5 |
| | _umap vs_ | _0.37x_ | _0.76x_ | _**5.75x**_ | _**5.75x**_ | _0.75x_ | _0.63x_ | _0.64x_ | _**5.76x**_ | _**5.76x**_ |

## uint64_t — sequential

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.01 | 0.12 | 18.0 | 18.4 | 0.03 | 0.06 | 0.01 | 20.4 | 20.9 |
|  | map | 0.03 | 0.12 | 70.3 | 72.0 | 0.06 | 0.05 | 0.04 | 70.3 | 72.0 |
| | _map vs_ | _**2.46x**_ | _0.96x_ | _**3.91x**_ | _**3.91x**_ | _**1.80x**_ | _0.93x_ | _**2.59x**_ | _**3.44x**_ | _**3.44x**_ |
|  | umap | 0.00 | 0.02 | 70.6 | 72.2 | 0.02 | 0.02 | 0.00 | 70.6 | 72.2 |
| | _umap vs_ | _0.23x_ | _0.19x_ | _**3.92x**_ | _**3.92x**_ | _0.63x_ | _0.28x_ | _0.29x_ | _**3.45x**_ | _**3.45x**_ |
| 10K | kntrie | 0.11 | 1.61 | 82.4 | 8.4 | 0.22 | 0.47 | 0.13 | 107.8 | 11.0 |
|  | map | 0.98 | 1.45 | 703.1 | 72.0 | 0.71 | 0.67 | 0.94 | 703.1 | 72.0 |
| | _map vs_ | _**9.31x**_ | _0.90x_ | _**8.53x**_ | _**8.53x**_ | _**3.16x**_ | _**1.41x**_ | _**7.06x**_ | _**6.52x**_ | _**6.52x**_ |
|  | umap | 0.03 | 0.16 | 705.3 | 72.2 | 0.05 | 0.11 | 0.07 | 705.3 | 72.2 |
| | _umap vs_ | _0.30x_ | _0.10x_ | _**8.56x**_ | _**8.56x**_ | _0.24x_ | _0.24x_ | _0.56x_ | _**6.54x**_ | _**6.54x**_ |
| 100K | kntrie | 1.89 | 13.87 | 805.6 | 8.2 | 3.19 | 4.62 | 3.26 | 1036.0 | 10.6 |
|  | map | 34.94 | 27.26 | 7031.2 | 72.0 | 17.02 | 16.04 | 29.78 | 7031.2 | 72.0 |
| | _map vs_ | _**18.49x**_ | _**1.96x**_ | _**8.73x**_ | _**8.73x**_ | _**5.33x**_ | _**3.47x**_ | _**9.12x**_ | _**6.79x**_ | _**6.79x**_ |
|  | umap | 1.26 | 2.09 | 7092.9 | 72.6 | 0.90 | 2.54 | 2.15 | 7092.9 | 72.6 |
| | _umap vs_ | _0.67x_ | _0.15x_ | _**8.80x**_ | _**8.80x**_ | _0.28x_ | _0.55x_ | _0.66x_ | _**6.85x**_ | _**6.85x**_ |
| 1M | kntrie | 45.47 | 194.04 | 8036.1 | 8.2 | 64.37 | 90.57 | 55.95 | 10253.1 | 10.5 |
|  | map | 1155.57 | 835.43 | 70312.5 | 72.0 | 502.02 | 550.35 | 1142.68 | 70312.5 | 72.0 |
| | _map vs_ | _**25.41x**_ | _**4.31x**_ | _**8.75x**_ | _**8.75x**_ | _**7.80x**_ | _**6.08x**_ | _**20.42x**_ | _**6.86x**_ | _**6.86x**_ |
|  | umap | 16.84 | 38.43 | 70752.5 | 72.5 | 15.97 | 41.10 | 30.93 | 70752.5 | 72.5 |
| | _umap vs_ | _0.37x_ | _0.20x_ | _**8.80x**_ | _**8.80x**_ | _0.25x_ | _0.45x_ | _0.55x_ | _**6.90x**_ | _**6.90x**_ |

## int32_t — sequential

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.01 | 0.13 | 14.0 | 14.3 | 0.03 | 0.06 | 0.01 | 18.0 | 18.4 |
|  | map | 0.04 | 0.11 | 70.3 | 72.0 | 0.05 | 0.05 | 0.03 | 70.3 | 72.0 |
| | _map vs_ | _**3.07x**_ | _0.83x_ | _**5.02x**_ | _**5.02x**_ | _**1.84x**_ | _0.79x_ | _**2.27x**_ | _**3.91x**_ | _**3.91x**_ |
|  | umap | 0.00 | 0.02 | 70.6 | 72.2 | 0.01 | 0.01 | 0.00 | 70.6 | 72.2 |
| | _umap vs_ | _0.27x_ | _0.17x_ | _**5.04x**_ | _**5.04x**_ | _0.22x_ | _0.24x_ | _0.34x_ | _**3.92x**_ | _**3.92x**_ |
| 10K | kntrie | 0.09 | 1.63 | 82.4 | 8.4 | 0.22 | 0.52 | 0.12 | 100.2 | 10.3 |
|  | map | 1.04 | 1.48 | 703.1 | 72.0 | 0.74 | 0.73 | 1.06 | 703.1 | 72.0 |
| | _map vs_ | _**11.24x**_ | _0.91x_ | _**8.53x**_ | _**8.53x**_ | _**3.34x**_ | _**1.39x**_ | _**8.88x**_ | _**7.01x**_ | _**7.01x**_ |
|  | umap | 0.03 | 0.20 | 705.3 | 72.2 | 0.06 | 0.11 | 0.11 | 705.3 | 72.2 |
| | _umap vs_ | _0.34x_ | _0.12x_ | _**8.56x**_ | _**8.56x**_ | _0.26x_ | _0.22x_ | _0.88x_ | _**7.04x**_ | _**7.04x**_ |
| 100K | kntrie | 1.13 | 12.12 | 805.4 | 8.2 | 2.52 | 4.09 | 1.53 | 948.1 | 9.7 |
|  | map | 34.60 | 29.62 | 7031.2 | 72.0 | 17.76 | 17.26 | 31.57 | 7031.2 | 72.0 |
| | _map vs_ | _**30.56x**_ | _**2.44x**_ | _**8.73x**_ | _**8.73x**_ | _**7.05x**_ | _**4.22x**_ | _**20.65x**_ | _**7.42x**_ | _**7.42x**_ |
|  | umap | 1.29 | 2.51 | 7092.9 | 72.6 | 0.93 | 2.64 | 2.26 | 7092.9 | 72.6 |
| | _umap vs_ | _**1.14x**_ | _0.21x_ | _**8.81x**_ | _**8.81x**_ | _0.37x_ | _0.65x_ | _**1.48x**_ | _**7.48x**_ | _**7.48x**_ |
| 1M | kntrie | 27.07 | 165.85 | 8036.0 | 8.2 | 54.27 | 69.10 | 26.01 | 9240.6 | 9.5 |
|  | map | 1038.87 | 738.44 | 70312.5 | 72.0 | 446.84 | 499.55 | 1192.71 | 70312.5 | 72.0 |
| | _map vs_ | _**38.37x**_ | _**4.45x**_ | _**8.75x**_ | _**8.75x**_ | _**8.23x**_ | _**7.23x**_ | _**45.86x**_ | _**7.61x**_ | _**7.61x**_ |
|  | umap | 16.74 | 40.79 | 70752.5 | 72.5 | 15.41 | 38.60 | 30.96 | 70752.5 | 72.5 |
| | _umap vs_ | _0.62x_ | _0.25x_ | _**8.80x**_ | _**8.80x**_ | _0.28x_ | _0.56x_ | _**1.19x**_ | _**7.66x**_ | _**7.66x**_ |

## uint64_t — dense16

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 787 | kntrie | 0.01 | 0.10 | 16.0 | 20.8 | 0.02 | 0.04 | 0.01 | 17.2 | 22.4 |
|  | map | 0.02 | 0.09 | 55.3 | 72.0 | 0.05 | 0.04 | 0.01 | 55.3 | 71.9 |
| | _map vs_ | _**1.92x**_ | _0.94x_ | _**3.46x**_ | _**3.46x**_ | _**2.20x**_ | _**1.09x**_ | _**1.47x**_ | _**3.22x**_ | _**3.22x**_ |
|  | umap | 0.00 | 0.02 | 55.6 | 72.4 | 0.01 | 0.01 | 0.00 | 55.6 | 72.3 |
| | _umap vs_ | _0.33x_ | _0.24x_ | _**3.48x**_ | _**3.48x**_ | _0.39x_ | _0.32x_ | _0.36x_ | _**3.23x**_ | _**3.23x**_ |
| 7.9K | kntrie | 0.08 | 1.01 | 68.6 | 8.8 | 0.18 | 0.38 | 0.10 | 89.4 | 11.5 |
|  | map | 0.77 | 1.14 | 558.6 | 72.0 | 0.59 | 0.56 | 0.78 | 558.6 | 72.0 |
| | _map vs_ | _**9.55x**_ | _**1.13x**_ | _**8.15x**_ | _**8.15x**_ | _**3.25x**_ | _**1.45x**_ | _**7.65x**_ | _**6.25x**_ | _**6.25x**_ |
|  | umap | 0.06 | 0.21 | 560.0 | 72.2 | 0.10 | 0.12 | 0.09 | 560.0 | 72.2 |
| | _umap vs_ | _0.80x_ | _0.21x_ | _**8.17x**_ | _**8.17x**_ | _0.53x_ | _0.31x_ | _0.91x_ | _**6.27x**_ | _**6.27x**_ |
| 78.7K | kntrie | 1.61 | 8.22 | 661.0 | 8.6 | 2.23 | 3.82 | 2.01 | 849.1 | 11.1 |
|  | map | 21.20 | 18.96 | 5530.3 | 72.0 | 11.21 | 11.14 | 20.50 | 5530.3 | 72.0 |
| | _map vs_ | _**13.13x**_ | _**2.31x**_ | _**8.37x**_ | _**8.37x**_ | _**5.03x**_ | _**2.92x**_ | _**10.19x**_ | _**6.51x**_ | _**6.51x**_ |
|  | umap | 1.38 | 2.89 | 5531.3 | 72.0 | 1.54 | 2.86 | 3.00 | 5531.3 | 72.0 |
| | _umap vs_ | _0.85x_ | _0.35x_ | _**8.37x**_ | _**8.37x**_ | _0.69x_ | _0.75x_ | _**1.49x**_ | _**6.51x**_ | _**6.51x**_ |
| 787.1K | kntrie | 35.58 | 114.17 | 6594.0 | 8.6 | 38.12 | 66.58 | 44.84 | 8385.9 | 10.9 |
|  | map | 821.09 | 534.14 | 55341.8 | 72.0 | 347.64 | 377.02 | 775.01 | 55341.8 | 72.0 |
| | _map vs_ | _**23.08x**_ | _**4.68x**_ | _**8.39x**_ | _**8.39x**_ | _**9.12x**_ | _**5.66x**_ | _**17.28x**_ | _**6.60x**_ | _**6.60x**_ |
|  | umap | 22.99 | 58.55 | 55709.8 | 72.5 | 30.06 | 41.46 | 37.98 | 55709.8 | 72.5 |
| | _umap vs_ | _0.65x_ | _0.51x_ | _**8.45x**_ | _**8.45x**_ | _0.79x_ | _0.62x_ | _0.85x_ | _**6.64x**_ | _**6.64x**_ |

## int32_t — dense16

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 787 | kntrie | 0.01 | 0.09 | 12.0 | 15.6 | 0.02 | 0.04 | 0.01 | 14.1 | 18.3 |
|  | map | 0.02 | 0.09 | 55.3 | 72.0 | 0.04 | 0.05 | 0.01 | 55.3 | 71.9 |
| | _map vs_ | _**2.37x**_ | _0.94x_ | _**4.61x**_ | _**4.61x**_ | _**1.69x**_ | _**1.42x**_ | _0.80x_ | _**3.93x**_ | _**3.93x**_ |
|  | umap | 0.00 | 0.02 | 55.6 | 72.4 | 0.01 | 0.01 | 0.00 | 55.6 | 72.3 |
| | _umap vs_ | _0.38x_ | _0.23x_ | _**4.63x**_ | _**4.63x**_ | _0.36x_ | _0.27x_ | _0.42x_ | _**3.95x**_ | _**3.95x**_ |
| 7.9K | kntrie | 0.07 | 1.05 | 68.6 | 8.8 | 0.15 | 0.41 | 0.11 | 83.5 | 10.8 |
|  | map | 0.78 | 1.42 | 558.6 | 72.0 | 0.57 | 0.53 | 0.77 | 558.6 | 72.0 |
| | _map vs_ | _**10.49x**_ | _**1.35x**_ | _**8.15x**_ | _**8.15x**_ | _**3.78x**_ | _**1.31x**_ | _**7.21x**_ | _**6.69x**_ | _**6.69x**_ |
|  | umap | 0.07 | 0.19 | 560.0 | 72.2 | 0.10 | 0.11 | 0.10 | 560.0 | 72.2 |
| | _umap vs_ | _0.92x_ | _0.19x_ | _**8.17x**_ | _**8.17x**_ | _0.65x_ | _0.27x_ | _0.90x_ | _**6.71x**_ | _**6.71x**_ |
| 78.7K | kntrie | 0.87 | 6.92 | 660.5 | 8.6 | 1.51 | 3.34 | 1.21 | 768.7 | 10.0 |
|  | map | 23.56 | 20.41 | 5530.3 | 72.0 | 12.56 | 11.53 | 20.99 | 5530.3 | 72.0 |
| | _map vs_ | _**26.98x**_ | _**2.95x**_ | _**8.37x**_ | _**8.37x**_ | _**8.30x**_ | _**3.45x**_ | _**17.28x**_ | _**7.19x**_ | _**7.19x**_ |
|  | umap | 1.50 | 3.34 | 5531.3 | 72.0 | 1.82 | 2.22 | 2.60 | 5531.3 | 72.0 |
| | _umap vs_ | _**1.72x**_ | _0.48x_ | _**8.37x**_ | _**8.37x**_ | _**1.21x**_ | _0.66x_ | _**2.14x**_ | _**7.20x**_ | _**7.20x**_ |
| 787.1K | kntrie | 25.15 | 97.86 | 6593.4 | 8.6 | 29.52 | 55.55 | 23.27 | 7662.2 | 10.0 |
|  | map | 756.16 | 569.15 | 55341.8 | 72.0 | 301.37 | 324.93 | 753.90 | 55341.8 | 72.0 |
| | _map vs_ | _**30.07x**_ | _**5.82x**_ | _**8.39x**_ | _**8.39x**_ | _**10.21x**_ | _**5.85x**_ | _**32.40x**_ | _**7.22x**_ | _**7.22x**_ |
|  | umap | 24.16 | 64.76 | 55709.8 | 72.5 | 29.63 | 41.81 | 40.65 | 55709.8 | 72.5 |
| | _umap vs_ | _0.96x_ | _0.66x_ | _**8.45x**_ | _**8.45x**_ | _1.00x_ | _0.75x_ | _**1.75x**_ | _**7.27x**_ | _**7.27x**_ |

