# kntrie3 Benchmark Results

Compiler: `g++ -std=c++23 -O2 -march=x86-64-v3`

Workload: insert N, find N (all hit), erase N/2, churn N/4 old + N/4 new, find N (25% miss)

- N = number of entries
- F = Find all N keys in ms (all hits)
- I = Insert N keys in ms
- M = Memory after insert in KB
- B = Bytes per entry after insert
- E = Erase N/2 keys in ms
- C2 = Churn insert N/4 old + N/4 new in ms
- F2 = Find all N original keys in ms (25% misses)
- M2 = Memory after churn in KB
- B2 = Bytes per entry after churn

In _vs_ rows, >1x means kntrie is better. **Bold** = kntrie wins.

## uint64_t — random

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.004 | 0.102 | 21.7 | 22.2 | 0.025 | 0.047 | 0.004 | 22.0 | 22.6 |
|  | map | 0.033 | 0.100 | 70.3 | 72.0 | 0.054 | 0.051 | 0.035 | 70.3 | 72.0 |
| | _map vs_ | _**7.307x**_ | _0.987x_ | _**3.237x**_ | _**3.237x**_ | _**2.147x**_ | _**1.088x**_ | _**8.327x**_ | _**3.189x**_ | _**3.189x**_ |
|  | umap | 0.004 | 0.028 | 70.6 | 72.2 | 0.014 | 0.015 | 0.005 | 70.6 | 72.2 |
| | _umap vs_ | _0.977x_ | _0.275x_ | _**3.249x**_ | _**3.249x**_ | _0.574x_ | _0.330x_ | _**1.120x**_ | _**3.200x**_ | _**3.200x**_ |
| 10K | kntrie | 0.220 | 0.812 | 175.7 | 18.0 | 0.236 | 0.367 | 0.244 | 174.9 | 17.9 |
|  | map | 0.902 | 1.243 | 703.1 | 72.0 | 0.702 | 0.675 | 0.968 | 703.1 | 72.0 |
| | _map vs_ | _**4.109x**_ | _**1.530x**_ | _**4.002x**_ | _**4.002x**_ | _**2.976x**_ | _**1.837x**_ | _**3.972x**_ | _**4.019x**_ | _**4.019x**_ |
|  | umap | 0.097 | 0.447 | 705.3 | 72.2 | 0.127 | 0.137 | 0.166 | 705.3 | 72.2 |
| | _umap vs_ | _0.439x_ | _0.550x_ | _**4.014x**_ | _**4.014x**_ | _0.541x_ | _0.374x_ | _0.682x_ | _**4.031x**_ | _**4.031x**_ |
| 100K | kntrie | 4.840 | 15.089 | 1701.0 | 17.4 | 4.397 | 7.068 | 4.660 | 1703.0 | 17.4 |
|  | map | 28.227 | 52.121 | 7031.2 | 72.0 | 14.645 | 16.182 | 29.791 | 7031.2 | 72.0 |
| | _map vs_ | _**5.832x**_ | _**3.454x**_ | _**4.134x**_ | _**4.134x**_ | _**3.330x**_ | _**2.290x**_ | _**6.393x**_ | _**4.129x**_ | _**4.129x**_ |
|  | umap | 2.218 | 4.192 | 7092.9 | 72.6 | 2.384 | 2.813 | 4.070 | 7092.9 | 72.6 |
| | _umap vs_ | _0.458x_ | _0.278x_ | _**4.170x**_ | _**4.170x**_ | _0.542x_ | _0.398x_ | _0.873x_ | _**4.165x**_ | _**4.165x**_ |
| 1M | kntrie | 124.061 | 202.477 | 16386.0 | 16.8 | 66.677 | 122.717 | 135.357 | 16386.0 | 16.8 |
|  | map | 855.734 | 764.925 | 70312.5 | 72.0 | 443.548 | 539.238 | 996.597 | 70312.5 | 72.0 |
| | _map vs_ | _**6.898x**_ | _**3.778x**_ | _**4.291x**_ | _**4.291x**_ | _**6.652x**_ | _**4.394x**_ | _**7.363x**_ | _**4.291x**_ | _**4.291x**_ |
|  | umap | 38.925 | 115.187 | 70752.5 | 72.5 | 51.020 | 59.387 | 67.395 | 70752.5 | 72.5 |
| | _umap vs_ | _0.314x_ | _0.569x_ | _**4.318x**_ | _**4.318x**_ | _0.765x_ | _0.484x_ | _0.498x_ | _**4.318x**_ | _**4.318x**_ |

## int32_t — random

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.004 | 0.092 | 18.4 | 18.9 | 0.029 | 0.043 | 0.004 | 18.7 | 19.2 |
|  | map | 0.034 | 0.115 | 70.3 | 72.0 | 0.054 | 0.052 | 0.040 | 70.3 | 72.0 |
| | _map vs_ | _**7.681x**_ | _**1.247x**_ | _**3.812x**_ | _**3.812x**_ | _**1.859x**_ | _**1.202x**_ | _**9.478x**_ | _**3.758x**_ | _**3.758x**_ |
|  | umap | 0.005 | 0.050 | 70.6 | 72.2 | 0.015 | 0.017 | 0.006 | 70.6 | 72.2 |
| | _umap vs_ | _**1.084x**_ | _0.542x_ | _**3.825x**_ | _**3.825x**_ | _0.506x_ | _0.388x_ | _**1.307x**_ | _**3.771x**_ | _**3.771x**_ |
| 10K | kntrie | 0.249 | 0.906 | 134.4 | 13.8 | 5.017 | 0.425 | 0.270 | 134.7 | 13.8 |
|  | map | 0.981 | 1.426 | 703.1 | 72.0 | 0.716 | 0.724 | 1.068 | 703.1 | 72.0 |
| | _map vs_ | _**3.947x**_ | _**1.573x**_ | _**5.230x**_ | _**5.230x**_ | _0.143x_ | _**1.702x**_ | _**3.950x**_ | _**5.220x**_ | _**5.220x**_ |
|  | umap | 0.108 | 0.313 | 705.3 | 72.2 | 0.146 | 0.146 | 0.176 | 705.3 | 72.2 |
| | _umap vs_ | _0.435x_ | _0.345x_ | _**5.246x**_ | _**5.246x**_ | _0.029x_ | _0.344x_ | _0.651x_ | _**5.236x**_ | _**5.236x**_ |
| 100.0K | kntrie | 4.431 | 9.673 | 1291.0 | 13.2 | 3.197 | 4.855 | 4.327 | 1291.0 | 13.2 |
|  | map | 33.691 | 28.738 | 7031.0 | 72.0 | 16.590 | 18.793 | 33.305 | 7031.0 | 72.0 |
| | _map vs_ | _**7.604x**_ | _**2.971x**_ | _**5.446x**_ | _**5.446x**_ | _**5.189x**_ | _**3.871x**_ | _**7.698x**_ | _**5.446x**_ | _**5.446x**_ |
|  | umap | 2.537 | 5.233 | 7092.8 | 72.6 | 2.769 | 3.219 | 4.433 | 7092.8 | 72.6 |
| | _umap vs_ | _0.573x_ | _0.541x_ | _**5.494x**_ | _**5.494x**_ | _0.866x_ | _0.663x_ | _**1.025x**_ | _**5.494x**_ | _**5.494x**_ |
| 999.9K | kntrie | 85.631 | 150.202 | 12298.0 | 12.6 | 52.052 | 92.853 | 90.220 | 12290.0 | 12.6 |
|  | map | 736.229 | 623.522 | 70304.8 | 72.0 | 384.210 | 459.933 | 920.236 | 70304.8 | 72.0 |
| | _map vs_ | _**8.598x**_ | _**4.151x**_ | _**5.717x**_ | _**5.717x**_ | _**7.381x**_ | _**4.953x**_ | _**10.200x**_ | _**5.720x**_ | _**5.720x**_ |
|  | umap | 40.135 | 94.602 | 70745.7 | 72.5 | 47.903 | 56.407 | 70.264 | 70745.6 | 72.5 |
| | _umap vs_ | _0.469x_ | _0.630x_ | _**5.753x**_ | _**5.753x**_ | _0.920x_ | _0.607x_ | _0.779x_ | _**5.756x**_ | _**5.756x**_ |

## uint64_t — sequential

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.014 | 0.124 | 18.0 | 18.4 | 0.029 | 0.053 | 0.014 | 20.4 | 20.9 |
|  | map | 0.034 | 0.107 | 70.3 | 72.0 | 0.063 | 0.054 | 0.035 | 70.3 | 72.0 |
| | _map vs_ | _**2.395x**_ | _0.863x_ | _**3.906x**_ | _**3.906x**_ | _**2.183x**_ | _**1.016x**_ | _**2.545x**_ | _**3.443x**_ | _**3.443x**_ |
|  | umap | 0.003 | 0.029 | 70.6 | 72.2 | 0.006 | 0.012 | 0.004 | 70.6 | 72.2 |
| | _umap vs_ | _0.219x_ | _0.235x_ | _**3.920x**_ | _**3.920x**_ | _0.218x_ | _0.229x_ | _0.282x_ | _**3.455x**_ | _**3.455x**_ |
| 10K | kntrie | 0.092 | 1.464 | 82.4 | 8.4 | 0.217 | 0.427 | 0.129 | 107.8 | 11.0 |
|  | map | 0.994 | 1.531 | 703.1 | 72.0 | 0.808 | 0.690 | 1.048 | 703.1 | 72.0 |
| | _map vs_ | _**10.762x**_ | _**1.046x**_ | _**8.529x**_ | _**8.529x**_ | _**3.722x**_ | _**1.617x**_ | _**8.138x**_ | _**6.522x**_ | _**6.522x**_ |
|  | umap | 0.032 | 0.182 | 705.3 | 72.2 | 0.057 | 0.138 | 0.103 | 705.3 | 72.2 |
| | _umap vs_ | _0.348x_ | _0.124x_ | _**8.555x**_ | _**8.555x**_ | _0.261x_ | _0.324x_ | _0.803x_ | _**6.542x**_ | _**6.542x**_ |
| 100K | kntrie | 2.189 | 14.011 | 805.6 | 8.2 | 3.438 | 5.068 | 3.462 | 1036.0 | 10.6 |
|  | map | 31.002 | 30.913 | 7031.2 | 72.0 | 14.597 | 14.235 | 28.707 | 7031.2 | 72.0 |
| | _map vs_ | _**14.163x**_ | _**2.206x**_ | _**8.728x**_ | _**8.728x**_ | _**4.246x**_ | _**2.809x**_ | _**8.291x**_ | _**6.787x**_ | _**6.787x**_ |
|  | umap | 1.039 | 1.987 | 7092.9 | 72.6 | 0.875 | 2.199 | 1.990 | 7092.9 | 72.6 |
| | _umap vs_ | _0.475x_ | _0.142x_ | _**8.805x**_ | _**8.805x**_ | _0.255x_ | _0.434x_ | _0.575x_ | _**6.846x**_ | _**6.846x**_ |
| 1M | kntrie | 50.733 | 204.028 | 8036.1 | 8.2 | 70.343 | 105.847 | 57.230 | 10253.1 | 10.5 |
|  | map | 884.601 | 709.579 | 70312.5 | 72.0 | 409.011 | 407.663 | 822.111 | 70312.5 | 72.0 |
| | _map vs_ | _**17.436x**_ | _**3.478x**_ | _**8.750x**_ | _**8.750x**_ | _**5.815x**_ | _**3.851x**_ | _**14.365x**_ | _**6.858x**_ | _**6.858x**_ |
|  | umap | 20.151 | 48.789 | 70752.5 | 72.5 | 18.129 | 44.831 | 33.654 | 70752.5 | 72.5 |
| | _umap vs_ | _0.397x_ | _0.239x_ | _**8.804x**_ | _**8.804x**_ | _0.258x_ | _0.424x_ | _0.588x_ | _**6.901x**_ | _**6.901x**_ |

## int32_t — sequential

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.011 | 0.130 | 14.0 | 14.3 | 0.033 | 0.057 | 0.013 | 18.0 | 18.4 |
|  | map | 0.035 | 0.113 | 70.3 | 72.0 | 0.062 | 0.054 | 0.037 | 70.3 | 72.0 |
| | _map vs_ | _**3.284x**_ | _0.871x_ | _**5.022x**_ | _**5.022x**_ | _**1.896x**_ | _0.954x_ | _**2.916x**_ | _**3.908x**_ | _**3.908x**_ |
|  | umap | 0.003 | 0.021 | 70.6 | 72.2 | 0.006 | 0.012 | 0.004 | 70.6 | 72.2 |
| | _umap vs_ | _0.289x_ | _0.163x_ | _**5.040x**_ | _**5.040x**_ | _0.172x_ | _0.212x_ | _0.308x_ | _**3.921x**_ | _**3.921x**_ |
| 10K | kntrie | 0.087 | 1.613 | 82.4 | 8.4 | 0.201 | 0.471 | 0.089 | 100.2 | 10.3 |
|  | map | 1.006 | 1.438 | 703.1 | 72.0 | 0.742 | 0.713 | 1.052 | 703.1 | 72.0 |
| | _map vs_ | _**11.534x**_ | _0.892x_ | _**8.529x**_ | _**8.529x**_ | _**3.686x**_ | _**1.516x**_ | _**11.777x**_ | _**7.015x**_ | _**7.015x**_ |
|  | umap | 0.031 | 0.180 | 705.3 | 72.2 | 0.057 | 0.113 | 0.089 | 705.3 | 72.2 |
| | _umap vs_ | _0.353x_ | _0.111x_ | _**8.555x**_ | _**8.555x**_ | _0.285x_ | _0.241x_ | _0.996x_ | _**7.036x**_ | _**7.036x**_ |
| 100K | kntrie | 1.049 | 11.917 | 805.4 | 8.2 | 2.468 | 4.022 | 1.407 | 948.1 | 9.7 |
|  | map | 34.855 | 28.149 | 7031.2 | 72.0 | 18.277 | 18.076 | 33.265 | 7031.2 | 72.0 |
| | _map vs_ | _**33.242x**_ | _**2.362x**_ | _**8.730x**_ | _**8.730x**_ | _**7.406x**_ | _**4.495x**_ | _**23.636x**_ | _**7.416x**_ | _**7.416x**_ |
|  | umap | 1.375 | 2.140 | 7092.9 | 72.6 | 1.073 | 2.752 | 2.353 | 7092.9 | 72.6 |
| | _umap vs_ | _**1.311x**_ | _0.180x_ | _**8.807x**_ | _**8.807x**_ | _0.435x_ | _0.684x_ | _**1.672x**_ | _**7.481x**_ | _**7.481x**_ |
| 1M | kntrie | 31.556 | 183.869 | 8036.0 | 8.2 | 61.805 | 75.394 | 26.788 | 9240.6 | 9.5 |
|  | map | 890.202 | 732.570 | 70312.5 | 72.0 | 409.439 | 416.186 | 856.090 | 70312.5 | 72.0 |
| | _map vs_ | _**28.210x**_ | _**3.984x**_ | _**8.750x**_ | _**8.750x**_ | _**6.625x**_ | _**5.520x**_ | _**31.958x**_ | _**7.609x**_ | _**7.609x**_ |
|  | umap | 21.289 | 50.926 | 70752.5 | 72.5 | 19.068 | 46.676 | 34.723 | 70752.5 | 72.5 |
| | _umap vs_ | _0.675x_ | _0.277x_ | _**8.804x**_ | _**8.804x**_ | _0.309x_ | _0.619x_ | _**1.296x**_ | _**7.657x**_ | _**7.657x**_ |

## uint64_t — dense16

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 787 | kntrie | 0.011 | 0.102 | 16.0 | 20.8 | 0.032 | 0.051 | 0.011 | 17.2 | 22.4 |
|  | map | 0.015 | 0.085 | 55.3 | 72.0 | 0.048 | 0.043 | 0.014 | 55.3 | 71.9 |
| | _map vs_ | _**1.382x**_ | _0.828x_ | _**3.458x**_ | _**3.458x**_ | _**1.510x**_ | _0.834x_ | _**1.356x**_ | _**3.215x**_ | _**3.215x**_ |
|  | umap | 0.003 | 0.022 | 55.6 | 72.4 | 0.010 | 0.011 | 0.004 | 55.6 | 72.3 |
| | _umap vs_ | _0.320x_ | _0.214x_ | _**3.476x**_ | _**3.476x**_ | _0.307x_ | _0.213x_ | _0.336x_ | _**3.232x**_ | _**3.232x**_ |
| 7.9K | kntrie | 0.076 | 0.944 | 68.6 | 8.8 | 0.191 | 0.453 | 0.095 | 89.4 | 11.5 |
|  | map | 0.766 | 1.183 | 558.6 | 72.0 | 0.594 | 0.519 | 0.763 | 558.6 | 72.0 |
| | _map vs_ | _**10.078x**_ | _**1.254x**_ | _**8.145x**_ | _**8.145x**_ | _**3.103x**_ | _**1.146x**_ | _**8.033x**_ | _**6.252x**_ | _**6.252x**_ |
|  | umap | 0.066 | 0.202 | 560.0 | 72.2 | 0.130 | 0.146 | 0.095 | 560.0 | 72.2 |
| | _umap vs_ | _0.869x_ | _0.214x_ | _**8.165x**_ | _**8.165x**_ | _0.679x_ | _0.322x_ | _0.998x_ | _**6.268x**_ | _**6.268x**_ |
| 78.7K | kntrie | 1.639 | 8.320 | 661.0 | 8.6 | 2.197 | 3.813 | 2.075 | 849.1 | 11.1 |
|  | map | 24.127 | 22.427 | 5530.3 | 72.0 | 13.878 | 12.827 | 22.651 | 5530.3 | 72.0 |
| | _map vs_ | _**14.721x**_ | _**2.696x**_ | _**8.366x**_ | _**8.366x**_ | _**6.318x**_ | _**3.365x**_ | _**10.915x**_ | _**6.513x**_ | _**6.513x**_ |
|  | umap | 1.589 | 3.232 | 5531.3 | 72.0 | 1.677 | 2.301 | 2.924 | 5531.3 | 72.0 |
| | _umap vs_ | _0.969x_ | _0.388x_ | _**8.368x**_ | _**8.368x**_ | _0.764x_ | _0.604x_ | _**1.409x**_ | _**6.514x**_ | _**6.514x**_ |
| 787.1K | kntrie | 44.315 | 132.760 | 6594.0 | 8.6 | 46.953 | 79.170 | 49.239 | 8385.9 | 10.9 |
|  | map | 595.367 | 556.577 | 55341.8 | 72.0 | 303.492 | 292.121 | 584.409 | 55341.8 | 72.0 |
| | _map vs_ | _**13.435x**_ | _**4.192x**_ | _**8.393x**_ | _**8.393x**_ | _**6.464x**_ | _**3.690x**_ | _**11.869x**_ | _**6.599x**_ | _**6.599x**_ |
|  | umap | 22.786 | 63.612 | 55709.8 | 72.5 | 28.538 | 39.910 | 36.296 | 55709.8 | 72.5 |
| | _umap vs_ | _0.514x_ | _0.479x_ | _**8.448x**_ | _**8.448x**_ | _0.608x_ | _0.504x_ | _0.737x_ | _**6.643x**_ | _**6.643x**_ |

## int32_t — dense16

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 787 | kntrie | 0.007 | 0.088 | 12.0 | 15.6 | 0.023 | 0.034 | 0.009 | 14.1 | 18.3 |
|  | map | 0.014 | 0.086 | 55.3 | 72.0 | 0.041 | 0.039 | 0.014 | 55.3 | 71.9 |
| | _map vs_ | _**1.881x**_ | _0.982x_ | _**4.611x**_ | _**4.611x**_ | _**1.786x**_ | _**1.145x**_ | _**1.599x**_ | _**3.926x**_ | _**3.926x**_ |
|  | umap | 0.003 | 0.020 | 55.6 | 72.4 | 0.013 | 0.011 | 0.004 | 55.6 | 72.3 |
| | _umap vs_ | _0.415x_ | _0.229x_ | _**4.635x**_ | _**4.635x**_ | _0.548x_ | _0.312x_ | _0.431x_ | _**3.946x**_ | _**3.946x**_ |
| 7.9K | kntrie | 0.068 | 1.008 | 68.6 | 8.8 | 0.145 | 0.359 | 0.061 | 83.5 | 10.8 |
|  | map | 0.713 | 1.052 | 558.6 | 72.0 | 0.518 | 0.489 | 0.751 | 558.6 | 72.0 |
| | _map vs_ | _**10.551x**_ | _**1.044x**_ | _**8.145x**_ | _**8.145x**_ | _**3.572x**_ | _**1.362x**_ | _**12.260x**_ | _**6.692x**_ | _**6.692x**_ |
|  | umap | 0.064 | 0.210 | 560.0 | 72.2 | 0.090 | 0.110 | 0.091 | 560.0 | 72.2 |
| | _umap vs_ | _0.952x_ | _0.209x_ | _**8.165x**_ | _**8.165x**_ | _0.624x_ | _0.307x_ | _**1.485x**_ | _**6.709x**_ | _**6.709x**_ |
| 78.7K | kntrie | 0.919 | 6.563 | 660.5 | 8.6 | 1.653 | 3.338 | 1.095 | 768.7 | 10.0 |
|  | map | 23.367 | 18.375 | 5530.3 | 72.0 | 11.354 | 10.949 | 22.164 | 5530.3 | 72.0 |
| | _map vs_ | _**25.417x**_ | _**2.800x**_ | _**8.372x**_ | _**8.372x**_ | _**6.868x**_ | _**3.280x**_ | _**20.235x**_ | _**7.194x**_ | _**7.194x**_ |
|  | umap | 1.418 | 3.181 | 5531.3 | 72.0 | 1.538 | 2.062 | 2.497 | 5531.3 | 72.0 |
| | _umap vs_ | _**1.543x**_ | _0.485x_ | _**8.374x**_ | _**8.374x**_ | _0.930x_ | _0.618x_ | _**2.280x**_ | _**7.196x**_ | _**7.196x**_ |
| 787.1K | kntrie | 24.485 | 94.572 | 6593.4 | 8.6 | 30.472 | 51.638 | 20.812 | 7662.2 | 10.0 |
|  | map | 636.147 | 506.327 | 55341.8 | 72.0 | 298.375 | 314.975 | 607.797 | 55341.8 | 72.0 |
| | _map vs_ | _**25.981x**_ | _**5.354x**_ | _**8.394x**_ | _**8.394x**_ | _**9.792x**_ | _**6.100x**_ | _**29.205x**_ | _**7.223x**_ | _**7.223x**_ |
|  | umap | 24.660 | 67.285 | 55709.8 | 72.5 | 31.161 | 40.574 | 42.782 | 55709.8 | 72.5 |
| | _umap vs_ | _**1.007x**_ | _0.711x_ | _**8.449x**_ | _**8.449x**_ | _**1.023x**_ | _0.786x_ | _**2.056x**_ | _**7.271x**_ | _**7.271x**_ |

