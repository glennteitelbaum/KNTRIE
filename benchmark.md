# kntrie3 Benchmark Results

Compiler: `g++ -std=c++23 -O2 -march=x86-64-v3`

Workload: insert N, find N (all hit), erase N/2, churn N/4 old + N/4 new, find N (25% miss)

- N = number of entries
- F = Find all N keys in ms (all hits)
- I = Insert N keys in ms
- M = Memory after insert in KB
- B = Bytes per entry after insert
- E = Erase N/2 keys in ms
- C2 = Churn insert N/4 old + N/4 new in ms
- F2 = Find all N original keys in ms (25% misses)
- M2 = Memory after churn in KB
- B2 = Bytes per entry after churn

In _vs_ rows, >1x means kntrie is better. **Bold** = kntrie wins.

## uint64_t — random

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.006 | 0.094 | 20.8 | 21.3 | 0.038 | 0.053 | 0.006 | 21.1 | 21.6 |
|  | map | 0.035 | 0.131 | 70.3 | 72.0 | 0.069 | 0.055 | 0.040 | 70.3 | 72.0 |
| | _map vs_ | _**5.640x**_ | _**1.392x**_ | _**3.382x**_ | _**3.382x**_ | _**1.813x**_ | _**1.024x**_ | _**6.367x**_ | _**3.337x**_ | _**3.337x**_ |
|  | umap | 0.005 | 0.032 | 70.6 | 72.2 | 0.014 | 0.014 | 0.005 | 70.6 | 72.2 |
| | _umap vs_ | _0.762x_ | _0.341x_ | _**3.394x**_ | _**3.394x**_ | _0.368x_ | _0.266x_ | _0.823x_ | _**3.349x**_ | _**3.349x**_ |
| 10K | kntrie | 0.255 | 0.890 | 175.7 | 18.0 | 0.266 | 0.383 | 0.280 | 174.9 | 17.9 |
|  | map | 0.997 | 1.361 | 703.1 | 72.0 | 0.770 | 0.749 | 1.035 | 703.1 | 72.0 |
| | _map vs_ | _**3.912x**_ | _**1.530x**_ | _**4.002x**_ | _**4.002x**_ | _**2.898x**_ | _**1.954x**_ | _**3.696x**_ | _**4.019x**_ | _**4.019x**_ |
|  | umap | 0.104 | 0.297 | 705.3 | 72.2 | 0.142 | 0.157 | 0.177 | 705.3 | 72.2 |
| | _umap vs_ | _0.409x_ | _0.333x_ | _**4.014x**_ | _**4.014x**_ | _0.535x_ | _0.409x_ | _0.632x_ | _**4.031x**_ | _**4.031x**_ |
| 100K | kntrie | 4.427 | 9.890 | 1701.0 | 17.4 | 3.055 | 5.155 | 4.590 | 1703.0 | 17.4 |
|  | map | 34.384 | 35.162 | 7031.2 | 72.0 | 18.219 | 20.031 | 36.766 | 7031.2 | 72.0 |
| | _map vs_ | _**7.766x**_ | _**3.555x**_ | _**4.134x**_ | _**4.134x**_ | _**5.963x**_ | _**3.886x**_ | _**8.010x**_ | _**4.129x**_ | _**4.129x**_ |
|  | umap | 2.535 | 5.570 | 7092.9 | 72.6 | 2.967 | 3.447 | 4.444 | 7092.9 | 72.6 |
| | _umap vs_ | _0.573x_ | _0.563x_ | _**4.170x**_ | _**4.170x**_ | _0.971x_ | _0.669x_ | _0.968x_ | _**4.165x**_ | _**4.165x**_ |
| 1M | kntrie | 130.771 | 225.703 | 16386.0 | 16.8 | 79.197 | 149.045 | 136.787 | 16386.0 | 16.8 |
|  | map | 777.125 | 692.918 | 70312.5 | 72.0 | 392.422 | 449.188 | 807.966 | 70312.5 | 72.0 |
| | _map vs_ | _**5.943x**_ | _**3.070x**_ | _**4.291x**_ | _**4.291x**_ | _**4.955x**_ | _**3.014x**_ | _**5.907x**_ | _**4.291x**_ | _**4.291x**_ |
|  | umap | 34.023 | 86.091 | 70752.5 | 72.5 | 45.387 | 58.478 | 60.507 | 70752.5 | 72.5 |
| | _umap vs_ | _0.260x_ | _0.381x_ | _**4.318x**_ | _**4.318x**_ | _0.573x_ | _0.392x_ | _0.442x_ | _**4.318x**_ | _**4.318x**_ |

## int32_t — random

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.004 | 0.095 | 16.6 | 17.0 | 0.028 | 0.037 | 0.004 | 16.8 | 17.2 |
|  | map | 0.034 | 0.097 | 70.3 | 72.0 | 0.058 | 0.053 | 0.030 | 70.3 | 72.0 |
| | _map vs_ | _**7.549x**_ | _**1.022x**_ | _**4.245x**_ | _**4.245x**_ | _**2.111x**_ | _**1.460x**_ | _**6.672x**_ | _**4.186x**_ | _**4.186x**_ |
|  | umap | 0.004 | 0.031 | 70.6 | 72.2 | 0.013 | 0.014 | 0.005 | 70.6 | 72.2 |
| | _umap vs_ | _0.967x_ | _0.321x_ | _**4.260x**_ | _**4.260x**_ | _0.467x_ | _0.381x_ | _**1.099x**_ | _**4.200x**_ | _**4.200x**_ |
| 10K | kntrie | 0.226 | 5.033 | 131.4 | 13.5 | 0.235 | 0.355 | 0.244 | 130.9 | 13.4 |
|  | map | 0.927 | 1.269 | 703.1 | 72.0 | 0.676 | 0.681 | 0.969 | 703.1 | 72.0 |
| | _map vs_ | _**4.104x**_ | _0.252x_ | _**5.352x**_ | _**5.352x**_ | _**2.881x**_ | _**1.919x**_ | _**3.966x**_ | _**5.370x**_ | _**5.370x**_ |
|  | umap | 0.091 | 0.271 | 705.3 | 72.2 | 0.131 | 0.137 | 0.167 | 705.3 | 72.2 |
| | _umap vs_ | _0.402x_ | _0.054x_ | _**5.368x**_ | _**5.368x**_ | _0.560x_ | _0.386x_ | _0.685x_ | _**5.386x**_ | _**5.386x**_ |
| 100.0K | kntrie | 3.828 | 9.729 | 1290.0 | 13.2 | 2.764 | 4.295 | 4.015 | 1290.0 | 13.2 |
|  | map | 32.615 | 28.633 | 7031.0 | 72.0 | 16.682 | 20.257 | 35.823 | 7031.0 | 72.0 |
| | _map vs_ | _**8.520x**_ | _**2.943x**_ | _**5.450x**_ | _**5.450x**_ | _**6.036x**_ | _**4.716x**_ | _**8.923x**_ | _**5.450x**_ | _**5.450x**_ |
|  | umap | 2.486 | 6.154 | 7092.8 | 72.6 | 3.006 | 3.497 | 4.209 | 7092.8 | 72.6 |
| | _umap vs_ | _0.649x_ | _0.633x_ | _**5.498x**_ | _**5.498x**_ | _**1.088x**_ | _0.814x_ | _**1.048x**_ | _**5.498x**_ | _**5.498x**_ |
| 999.9K | kntrie | 89.671 | 162.287 | 12298.0 | 12.6 | 50.582 | 89.492 | 99.882 | 12290.0 | 12.6 |
|  | map | 731.073 | 653.949 | 70304.8 | 72.0 | 355.451 | 405.134 | 794.675 | 70304.8 | 72.0 |
| | _map vs_ | _**8.153x**_ | _**4.030x**_ | _**5.717x**_ | _**5.717x**_ | _**7.027x**_ | _**4.527x**_ | _**7.956x**_ | _**5.720x**_ | _**5.720x**_ |
|  | umap | 31.828 | 86.631 | 70745.7 | 72.5 | 62.450 | 76.510 | 71.745 | 70745.6 | 72.5 |
| | _umap vs_ | _0.355x_ | _0.534x_ | _**5.753x**_ | _**5.753x**_ | _**1.235x**_ | _0.855x_ | _0.718x_ | _**5.756x**_ | _**5.756x**_ |

## uint64_t — sequential

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.014 | 0.136 | 18.0 | 18.4 | 0.031 | 0.049 | 0.014 | 19.2 | 19.6 |
|  | map | 0.034 | 0.113 | 70.3 | 72.0 | 0.060 | 0.053 | 0.035 | 70.3 | 72.0 |
| | _map vs_ | _**2.494x**_ | _0.832x_ | _**3.906x**_ | _**3.906x**_ | _**1.929x**_ | _**1.080x**_ | _**2.553x**_ | _**3.664x**_ | _**3.664x**_ |
|  | umap | 0.003 | 0.022 | 70.6 | 72.2 | 0.006 | 0.012 | 0.004 | 70.6 | 72.2 |
| | _umap vs_ | _0.227x_ | _0.163x_ | _**3.920x**_ | _**3.920x**_ | _0.183x_ | _0.246x_ | _0.282x_ | _**3.677x**_ | _**3.677x**_ |
| 10K | kntrie | 0.182 | 1.084 | 100.3 | 10.3 | 0.361 | 0.431 | 0.211 | 113.9 | 11.7 |
|  | map | 0.999 | 1.358 | 703.1 | 72.0 | 0.754 | 0.700 | 1.029 | 703.1 | 72.0 |
| | _map vs_ | _**5.487x**_ | _**1.253x**_ | _**7.007x**_ | _**7.007x**_ | _**2.089x**_ | _**1.624x**_ | _**4.869x**_ | _**6.175x**_ | _**6.175x**_ |
|  | umap | 0.043 | 0.311 | 705.3 | 72.2 | 0.101 | 0.187 | 0.108 | 705.3 | 72.2 |
| | _umap vs_ | _0.238x_ | _0.287x_ | _**7.028x**_ | _**7.028x**_ | _0.280x_ | _0.434x_ | _0.509x_ | _**6.194x**_ | _**6.194x**_ |
| 100K | kntrie | 2.020 | 7.382 | 982.5 | 10.1 | 3.235 | 4.235 | 2.581 | 1089.9 | 11.2 |
|  | map | 36.974 | 29.210 | 7031.2 | 72.0 | 18.724 | 18.263 | 31.328 | 7031.2 | 72.0 |
| | _map vs_ | _**18.301x**_ | _**3.957x**_ | _**7.157x**_ | _**7.157x**_ | _**5.788x**_ | _**4.312x**_ | _**12.137x**_ | _**6.451x**_ | _**6.451x**_ |
|  | umap | 1.190 | 1.984 | 7092.9 | 72.6 | 0.918 | 2.484 | 2.330 | 7092.9 | 72.6 |
| | _umap vs_ | _0.589x_ | _0.269x_ | _**7.220x**_ | _**7.220x**_ | _0.284x_ | _0.587x_ | _0.903x_ | _**6.508x**_ | _**6.508x**_ |
| 1M | kntrie | 43.139 | 103.647 | 9806.1 | 10.0 | 64.939 | 75.013 | 40.933 | 10798.1 | 11.1 |
|  | map | 796.275 | 649.844 | 70312.5 | 72.0 | 346.626 | 387.195 | 759.730 | 70312.5 | 72.0 |
| | _map vs_ | _**18.458x**_ | _**6.270x**_ | _**7.170x**_ | _**7.170x**_ | _**5.338x**_ | _**5.162x**_ | _**18.560x**_ | _**6.512x**_ | _**6.512x**_ |
|  | umap | 19.366 | 43.989 | 70752.5 | 72.5 | 19.769 | 44.500 | 33.047 | 70752.5 | 72.5 |
| | _umap vs_ | _0.449x_ | _0.424x_ | _**7.215x**_ | _**7.215x**_ | _0.304x_ | _0.593x_ | _0.807x_ | _**6.552x**_ | _**6.552x**_ |

## int32_t — sequential

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.012 | 0.127 | 14.0 | 14.3 | 0.034 | 0.063 | 0.011 | 16.7 | 17.1 |
|  | map | 0.034 | 0.115 | 70.3 | 72.0 | 0.051 | 0.045 | 0.022 | 70.3 | 72.0 |
| | _map vs_ | _**2.903x**_ | _0.906x_ | _**5.022x**_ | _**5.022x**_ | _**1.513x**_ | _0.716x_ | _**1.968x**_ | _**4.215x**_ | _**4.215x**_ |
|  | umap | 0.003 | 0.020 | 70.6 | 72.2 | 0.005 | 0.014 | 0.004 | 70.6 | 72.2 |
| | _umap vs_ | _0.245x_ | _0.162x_ | _**5.040x**_ | _**5.040x**_ | _0.141x_ | _0.226x_ | _0.323x_ | _**4.230x**_ | _**4.230x**_ |
| 10K | kntrie | 0.080 | 0.978 | 100.1 | 10.3 | 0.195 | 0.348 | 0.100 | 103.9 | 10.6 |
|  | map | 0.893 | 1.349 | 703.1 | 72.0 | 0.656 | 0.632 | 0.914 | 703.1 | 72.0 |
| | _map vs_ | _**11.226x**_ | _**1.380x**_ | _**7.023x**_ | _**7.023x**_ | _**3.373x**_ | _**1.817x**_ | _**9.107x**_ | _**6.766x**_ | _**6.766x**_ |
|  | umap | 0.028 | 0.163 | 705.3 | 72.2 | 0.052 | 0.105 | 0.071 | 705.3 | 72.2 |
| | _umap vs_ | _0.356x_ | _0.166x_ | _**7.044x**_ | _**7.044x**_ | _0.265x_ | _0.301x_ | _0.710x_ | _**6.786x**_ | _**6.786x**_ |
| 100K | kntrie | 1.050 | 5.271 | 982.3 | 10.1 | 2.228 | 3.386 | 1.422 | 998.6 | 10.2 |
|  | map | 29.832 | 24.526 | 7031.2 | 72.0 | 15.095 | 15.120 | 27.941 | 7031.2 | 72.0 |
| | _map vs_ | _**28.421x**_ | _**4.653x**_ | _**7.158x**_ | _**7.158x**_ | _**6.774x**_ | _**4.466x**_ | _**19.645x**_ | _**7.041x**_ | _**7.041x**_ |
|  | umap | 1.027 | 2.096 | 7092.9 | 72.6 | 0.780 | 2.245 | 1.947 | 7092.9 | 72.6 |
| | _umap vs_ | _0.978x_ | _0.398x_ | _**7.221x**_ | _**7.221x**_ | _0.350x_ | _0.663x_ | _**1.369x**_ | _**7.103x**_ | _**7.103x**_ |
| 1M | kntrie | 28.126 | 90.361 | 9805.9 | 10.0 | 56.813 | 63.950 | 25.692 | 9778.5 | 10.0 |
|  | map | 802.434 | 616.622 | 70312.5 | 72.0 | 404.498 | 427.773 | 794.185 | 70312.5 | 72.0 |
| | _map vs_ | _**28.530x**_ | _**6.824x**_ | _**7.170x**_ | _**7.170x**_ | _**7.120x**_ | _**6.689x**_ | _**30.912x**_ | _**7.191x**_ | _**7.191x**_ |
|  | umap | 19.813 | 45.813 | 70752.5 | 72.5 | 18.556 | 49.185 | 33.156 | 70752.5 | 72.5 |
| | _umap vs_ | _0.704x_ | _0.507x_ | _**7.215x**_ | _**7.215x**_ | _0.327x_ | _0.769x_ | _**1.291x**_ | _**7.236x**_ | _**7.236x**_ |

## uint64_t — dense16

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 787 | kntrie | 0.010 | 0.095 | 16.0 | 20.8 | 0.025 | 0.038 | 0.010 | 16.1 | 21.0 |
|  | map | 0.023 | 0.093 | 55.3 | 72.0 | 0.055 | 0.040 | 0.014 | 55.3 | 71.9 |
| | _map vs_ | _**2.334x**_ | _0.975x_ | _**3.458x**_ | _**3.458x**_ | _**2.167x**_ | _**1.040x**_ | _**1.338x**_ | _**3.422x**_ | _**3.422x**_ |
|  | umap | 0.003 | 0.022 | 55.6 | 72.4 | 0.009 | 0.010 | 0.004 | 55.6 | 72.3 |
| | _umap vs_ | _0.339x_ | _0.234x_ | _**3.476x**_ | _**3.476x**_ | _0.357x_ | _0.250x_ | _0.364x_ | _**3.440x**_ | _**3.440x**_ |
| 7.9K | kntrie | 0.207 | 0.993 | 73.2 | 9.4 | 0.312 | 0.384 | 0.218 | 94.0 | 12.1 |
|  | map | 0.754 | 1.041 | 558.6 | 72.0 | 0.590 | 0.527 | 0.730 | 558.6 | 72.0 |
| | _map vs_ | _**3.638x**_ | _**1.049x**_ | _**7.628x**_ | _**7.628x**_ | _**1.895x**_ | _**1.372x**_ | _**3.347x**_ | _**5.940x**_ | _**5.940x**_ |
|  | umap | 0.066 | 0.204 | 560.0 | 72.2 | 0.098 | 0.115 | 0.101 | 560.0 | 72.2 |
| | _umap vs_ | _0.316x_ | _0.205x_ | _**7.647x**_ | _**7.647x**_ | _0.313x_ | _0.298x_ | _0.462x_ | _**5.955x**_ | _**5.955x**_ |
| 78.7K | kntrie | 2.119 | 6.436 | 700.5 | 9.1 | 2.632 | 3.596 | 2.585 | 893.1 | 11.6 |
|  | map | 24.340 | 19.384 | 5530.3 | 72.0 | 11.959 | 11.412 | 22.037 | 5530.3 | 72.0 |
| | _map vs_ | _**11.488x**_ | _**3.012x**_ | _**7.895x**_ | _**7.895x**_ | _**4.543x**_ | _**3.174x**_ | _**8.525x**_ | _**6.192x**_ | _**6.192x**_ |
|  | umap | 1.386 | 3.020 | 5531.3 | 72.0 | 1.560 | 1.954 | 2.755 | 5531.3 | 72.0 |
| | _umap vs_ | _0.654x_ | _0.469x_ | _**7.897x**_ | _**7.897x**_ | _0.593x_ | _0.544x_ | _**1.066x**_ | _**6.193x**_ | _**6.193x**_ |
| 787.1K | kntrie | 48.755 | 93.967 | 6993.4 | 9.1 | 50.622 | 59.434 | 48.087 | 8812.9 | 11.5 |
|  | map | 574.817 | 476.722 | 55341.8 | 72.0 | 263.706 | 268.330 | 545.307 | 55341.8 | 72.0 |
| | _map vs_ | _**11.790x**_ | _**5.073x**_ | _**7.913x**_ | _**7.913x**_ | _**5.209x**_ | _**4.515x**_ | _**11.340x**_ | _**6.280x**_ | _**6.280x**_ |
|  | umap | 22.579 | 60.549 | 55709.8 | 72.5 | 31.140 | 38.974 | 38.138 | 55709.8 | 72.5 |
| | _umap vs_ | _0.463x_ | _0.644x_ | _**7.966x**_ | _**7.966x**_ | _0.615x_ | _0.656x_ | _0.793x_ | _**6.321x**_ | _**6.321x**_ |

## int32_t — dense16

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 787 | kntrie | 0.009 | 0.107 | 12.0 | 15.6 | 0.027 | 0.037 | 0.009 | 12.9 | 16.8 |
|  | map | 0.018 | 0.087 | 55.3 | 72.0 | 0.044 | 0.038 | 0.008 | 55.3 | 71.9 |
| | _map vs_ | _**1.922x**_ | _0.812x_ | _**4.611x**_ | _**4.611x**_ | _**1.595x**_ | _**1.011x**_ | _0.907x_ | _**4.279x**_ | _**4.279x**_ |
|  | umap | 0.003 | 0.030 | 55.6 | 72.4 | 0.009 | 0.010 | 0.004 | 55.6 | 72.3 |
| | _umap vs_ | _0.365x_ | _0.286x_ | _**4.635x**_ | _**4.635x**_ | _0.330x_ | _0.256x_ | _0.423x_ | _**4.302x**_ | _**4.302x**_ |
| 7.9K | kntrie | 0.074 | 0.893 | 72.7 | 9.4 | 0.158 | 0.302 | 0.096 | 85.1 | 11.0 |
|  | map | 0.729 | 1.052 | 558.6 | 72.0 | 0.555 | 0.522 | 0.741 | 558.6 | 72.0 |
| | _map vs_ | _**9.912x**_ | _**1.178x**_ | _**7.680x**_ | _**7.680x**_ | _**3.511x**_ | _**1.732x**_ | _**7.761x**_ | _**6.568x**_ | _**6.568x**_ |
|  | umap | 0.064 | 0.214 | 560.0 | 72.2 | 0.096 | 0.106 | 0.087 | 560.0 | 72.2 |
| | _umap vs_ | _0.868x_ | _0.239x_ | _**7.699x**_ | _**7.699x**_ | _0.610x_ | _0.353x_ | _0.914x_ | _**6.584x**_ | _**6.584x**_ |
| 78.7K | kntrie | 0.863 | 4.450 | 699.6 | 9.1 | 1.563 | 2.759 | 1.180 | 808.0 | 10.5 |
|  | map | 23.169 | 18.973 | 5530.3 | 72.0 | 10.604 | 10.769 | 21.359 | 5530.3 | 72.0 |
| | _map vs_ | _**26.861x**_ | _**4.264x**_ | _**7.904x**_ | _**7.904x**_ | _**6.783x**_ | _**3.903x**_ | _**18.098x**_ | _**6.845x**_ | _**6.845x**_ |
|  | umap | 1.594 | 4.131 | 5531.3 | 72.0 | 1.834 | 2.310 | 2.697 | 5531.3 | 72.0 |
| | _umap vs_ | _**1.848x**_ | _0.929x_ | _**7.906x**_ | _**7.906x**_ | _**1.173x**_ | _0.837x_ | _**2.285x**_ | _**6.846x**_ | _**6.846x**_ |
| 787.1K | kntrie | 28.968 | 70.829 | 6993.6 | 9.1 | 34.945 | 47.648 | 26.803 | 8081.1 | 10.5 |
|  | map | 577.764 | 512.405 | 55341.8 | 72.0 | 296.267 | 310.263 | 610.037 | 55341.8 | 72.0 |
| | _map vs_ | _**19.945x**_ | _**7.234x**_ | _**7.913x**_ | _**7.913x**_ | _**8.478x**_ | _**6.512x**_ | _**22.760x**_ | _**6.848x**_ | _**6.848x**_ |
|  | umap | 22.618 | 65.709 | 55709.8 | 72.5 | 29.183 | 39.051 | 39.233 | 55709.8 | 72.5 |
| | _umap vs_ | _0.781x_ | _0.928x_ | _**7.966x**_ | _**7.966x**_ | _0.835x_ | _0.820x_ | _**1.464x**_ | _**6.894x**_ | _**6.894x**_ |

