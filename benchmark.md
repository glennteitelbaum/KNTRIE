# kntrie3 Benchmark Results

Compiler: `g++ -std=c++23 -O2 -march=x86-64-v3`

Workload: insert N, find N (all hit), erase N/2, churn N/4 old + N/4 new, find N (25% miss)

- N = number of entries
- F = Find all N keys in ms (all hits)
- I = Insert N keys in ms
- M = Memory after insert in KB
- B = Bytes per entry after insert
- E = Erase N/2 keys in ms
- C2 = Churn insert N/4 old + N/4 new in ms
- F2 = Find all N original keys in ms (25% misses)
- M2 = Memory after churn in KB
- B2 = Bytes per entry after churn

In _vs_ rows, >1x means kntrie is better. **Bold** = kntrie wins.

## uint64_t — random

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.004 | 0.089 | 21.7 | 22.2 | 0.029 | 0.051 | 0.005 | 22.0 | 22.6 |
|  | map | 0.036 | 0.104 | 70.3 | 72.0 | 0.065 | 0.049 | 0.032 | 70.3 | 72.0 |
| | _map vs_ | _**8.252x**_ | _**1.172x**_ | _**3.237x**_ | _**3.237x**_ | _**2.249x**_ | _0.971x_ | _**6.647x**_ | _**3.189x**_ | _**3.189x**_ |
|  | umap | 0.005 | 0.031 | 70.6 | 72.2 | 0.017 | 0.014 | 0.005 | 70.6 | 72.2 |
| | _umap vs_ | _**1.086x**_ | _0.354x_ | _**3.249x**_ | _**3.249x**_ | _0.598x_ | _0.283x_ | _**1.078x**_ | _**3.200x**_ | _**3.200x**_ |
| 10K | kntrie | 0.248 | 0.908 | 175.7 | 18.0 | 0.251 | 0.391 | 0.278 | 174.9 | 17.9 |
|  | map | 0.916 | 1.356 | 703.1 | 72.0 | 0.659 | 0.675 | 0.934 | 703.1 | 72.0 |
| | _map vs_ | _**3.696x**_ | _**1.494x**_ | _**4.002x**_ | _**4.002x**_ | _**2.622x**_ | _**1.728x**_ | _**3.359x**_ | _**4.019x**_ | _**4.019x**_ |
|  | umap | 0.095 | 0.276 | 705.3 | 72.2 | 0.128 | 0.136 | 0.166 | 705.3 | 72.2 |
| | _umap vs_ | _0.382x_ | _0.304x_ | _**4.014x**_ | _**4.014x**_ | _0.509x_ | _0.347x_ | _0.595x_ | _**4.031x**_ | _**4.031x**_ |
| 100K | kntrie | 3.967 | 12.715 | 1701.0 | 17.4 | 2.845 | 4.816 | 4.231 | 1703.0 | 17.4 |
|  | map | 27.131 | 52.474 | 7031.2 | 72.0 | 13.689 | 15.830 | 30.944 | 7031.2 | 72.0 |
| | _map vs_ | _**6.838x**_ | _**4.127x**_ | _**4.134x**_ | _**4.134x**_ | _**4.812x**_ | _**3.287x**_ | _**7.313x**_ | _**4.129x**_ | _**4.129x**_ |
|  | umap | 2.257 | 4.943 | 7092.9 | 72.6 | 2.356 | 2.820 | 3.850 | 7092.9 | 72.6 |
| | _umap vs_ | _0.569x_ | _0.389x_ | _**4.170x**_ | _**4.170x**_ | _0.828x_ | _0.586x_ | _0.910x_ | _**4.165x**_ | _**4.165x**_ |
| 1M | kntrie | 132.821 | 238.295 | 16386.0 | 16.8 | 73.623 | 141.712 | 134.214 | 16386.0 | 16.8 |
|  | map | 852.034 | 797.276 | 70312.5 | 72.0 | 442.842 | 511.584 | 955.740 | 70312.5 | 72.0 |
| | _map vs_ | _**6.415x**_ | _**3.346x**_ | _**4.291x**_ | _**4.291x**_ | _**6.015x**_ | _**3.610x**_ | _**7.121x**_ | _**4.291x**_ | _**4.291x**_ |
|  | umap | 38.290 | 91.445 | 70752.5 | 72.5 | 49.680 | 60.179 | 64.439 | 70752.5 | 72.5 |
| | _umap vs_ | _0.288x_ | _0.384x_ | _**4.318x**_ | _**4.318x**_ | _0.675x_ | _0.425x_ | _0.480x_ | _**4.318x**_ | _**4.318x**_ |

## int32_t — random

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.005 | 0.098 | 18.4 | 18.9 | 0.032 | 0.049 | 0.003 | 18.7 | 19.2 |
|  | map | 0.036 | 0.131 | 70.3 | 72.0 | 0.055 | 0.052 | 0.040 | 70.3 | 72.0 |
| | _map vs_ | _**7.824x**_ | _**1.340x**_ | _**3.812x**_ | _**3.812x**_ | _**1.759x**_ | _**1.041x**_ | _**11.718x**_ | _**3.758x**_ | _**3.758x**_ |
|  | umap | 0.005 | 0.033 | 70.6 | 72.2 | 0.014 | 0.014 | 0.005 | 70.6 | 72.2 |
| | _umap vs_ | _**1.040x**_ | _0.334x_ | _**3.825x**_ | _**3.825x**_ | _0.434x_ | _0.291x_ | _**1.602x**_ | _**3.771x**_ | _**3.771x**_ |
| 10K | kntrie | 0.246 | 0.906 | 134.4 | 13.8 | 4.630 | 0.397 | 0.268 | 134.7 | 13.8 |
|  | map | 0.974 | 1.476 | 703.1 | 72.0 | 0.715 | 0.747 | 1.020 | 703.1 | 72.0 |
| | _map vs_ | _**3.962x**_ | _**1.629x**_ | _**5.230x**_ | _**5.230x**_ | _0.154x_ | _**1.883x**_ | _**3.802x**_ | _**5.220x**_ | _**5.220x**_ |
|  | umap | 0.105 | 0.301 | 705.3 | 72.2 | 0.145 | 0.158 | 0.184 | 705.3 | 72.2 |
| | _umap vs_ | _0.428x_ | _0.333x_ | _**5.246x**_ | _**5.246x**_ | _0.031x_ | _0.400x_ | _0.685x_ | _**5.236x**_ | _**5.236x**_ |
| 100.0K | kntrie | 4.226 | 9.488 | 1291.0 | 13.2 | 3.101 | 4.705 | 4.253 | 1291.0 | 13.2 |
|  | map | 30.265 | 26.376 | 7031.0 | 72.0 | 15.529 | 17.653 | 33.590 | 7031.0 | 72.0 |
| | _map vs_ | _**7.162x**_ | _**2.780x**_ | _**5.446x**_ | _**5.446x**_ | _**5.007x**_ | _**3.752x**_ | _**7.899x**_ | _**5.446x**_ | _**5.446x**_ |
|  | umap | 2.566 | 5.893 | 7092.8 | 72.6 | 2.789 | 3.280 | 4.633 | 7092.8 | 72.6 |
| | _umap vs_ | _0.607x_ | _0.621x_ | _**5.494x**_ | _**5.494x**_ | _0.899x_ | _0.697x_ | _**1.089x**_ | _**5.494x**_ | _**5.494x**_ |
| 999.9K | kntrie | 116.043 | 171.749 | 12298.0 | 12.6 | 66.740 | 116.245 | 112.974 | 12290.0 | 12.6 |
|  | map | 923.563 | 858.056 | 70304.8 | 72.0 | 445.594 | 504.906 | 1132.299 | 70304.8 | 72.0 |
| | _map vs_ | _**7.959x**_ | _**4.996x**_ | _**5.717x**_ | _**5.717x**_ | _**6.677x**_ | _**4.343x**_ | _**10.023x**_ | _**5.720x**_ | _**5.720x**_ |
|  | umap | 46.661 | 133.439 | 70745.7 | 72.5 | 60.663 | 65.558 | 78.382 | 70745.6 | 72.5 |
| | _umap vs_ | _0.402x_ | _0.777x_ | _**5.753x**_ | _**5.753x**_ | _0.909x_ | _0.564x_ | _0.694x_ | _**5.756x**_ | _**5.756x**_ |

## uint64_t — sequential

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.013 | 0.121 | 18.0 | 18.4 | 0.031 | 0.053 | 0.013 | 20.4 | 20.9 |
|  | map | 0.039 | 0.108 | 70.3 | 72.0 | 0.057 | 0.050 | 0.028 | 70.3 | 72.0 |
| | _map vs_ | _**2.984x**_ | _0.893x_ | _**3.906x**_ | _**3.906x**_ | _**1.822x**_ | _0.954x_ | _**2.125x**_ | _**3.443x**_ | _**3.443x**_ |
|  | umap | 0.003 | 0.022 | 70.6 | 72.2 | 0.011 | 0.017 | 0.004 | 70.6 | 72.2 |
| | _umap vs_ | _0.254x_ | _0.183x_ | _**3.920x**_ | _**3.920x**_ | _0.365x_ | _0.329x_ | _0.316x_ | _**3.455x**_ | _**3.455x**_ |
| 10K | kntrie | 0.109 | 1.090 | 100.1 | 10.3 | 0.270 | 0.454 | 0.138 | 114.0 | 11.7 |
|  | map | 1.120 | 1.421 | 703.1 | 72.0 | 0.832 | 0.785 | 1.115 | 703.1 | 72.0 |
| | _map vs_ | _**10.249x**_ | _**1.304x**_ | _**7.022x**_ | _**7.022x**_ | _**3.079x**_ | _**1.729x**_ | _**8.100x**_ | _**6.169x**_ | _**6.169x**_ |
|  | umap | 0.036 | 0.272 | 705.3 | 72.2 | 0.058 | 0.115 | 0.104 | 705.3 | 72.2 |
| | _umap vs_ | _0.328x_ | _0.250x_ | _**7.044x**_ | _**7.044x**_ | _0.216x_ | _0.253x_ | _0.752x_ | _**6.188x**_ | _**6.188x**_ |
| 100K | kntrie | 1.952 | 6.899 | 982.5 | 10.1 | 2.995 | 4.379 | 3.194 | 1094.0 | 11.2 |
|  | map | 30.675 | 27.009 | 7031.2 | 72.0 | 15.752 | 15.843 | 29.570 | 7031.2 | 72.0 |
| | _map vs_ | _**15.712x**_ | _**3.915x**_ | _**7.157x**_ | _**7.157x**_ | _**5.260x**_ | _**3.618x**_ | _**9.259x**_ | _**6.427x**_ | _**6.427x**_ |
|  | umap | 1.030 | 2.024 | 7092.9 | 72.6 | 0.793 | 2.113 | 1.976 | 7092.9 | 72.6 |
| | _umap vs_ | _0.527x_ | _0.293x_ | _**7.219x**_ | _**7.219x**_ | _0.265x_ | _0.483x_ | _0.619x_ | _**6.483x**_ | _**6.483x**_ |
| 1M | kntrie | 51.946 | 124.082 | 9806.1 | 10.0 | 71.031 | 91.154 | 58.019 | 10841.3 | 11.1 |
|  | map | 818.130 | 747.649 | 70312.5 | 72.0 | 408.744 | 468.977 | 916.663 | 70312.5 | 72.0 |
| | _map vs_ | _**15.750x**_ | _**6.025x**_ | _**7.170x**_ | _**7.170x**_ | _**5.754x**_ | _**5.145x**_ | _**15.799x**_ | _**6.486x**_ | _**6.486x**_ |
|  | umap | 24.125 | 80.570 | 70752.5 | 72.5 | 17.336 | 43.386 | 32.631 | 70752.5 | 72.5 |
| | _umap vs_ | _0.464x_ | _0.649x_ | _**7.215x**_ | _**7.215x**_ | _0.244x_ | _0.476x_ | _0.562x_ | _**6.526x**_ | _**6.526x**_ |

## int32_t — sequential

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.011 | 0.120 | 14.0 | 14.3 | 0.035 | 0.054 | 0.011 | 18.0 | 18.4 |
|  | map | 0.036 | 0.111 | 70.3 | 72.0 | 0.065 | 0.062 | 0.033 | 70.3 | 72.0 |
| | _map vs_ | _**3.306x**_ | _0.930x_ | _**5.022x**_ | _**5.022x**_ | _**1.864x**_ | _**1.152x**_ | _**2.988x**_ | _**3.908x**_ | _**3.908x**_ |
|  | umap | 0.003 | 0.027 | 70.6 | 72.2 | 0.010 | 0.015 | 0.004 | 70.6 | 72.2 |
| | _umap vs_ | _0.288x_ | _0.222x_ | _**5.040x**_ | _**5.040x**_ | _0.300x_ | _0.282x_ | _0.349x_ | _**3.921x**_ | _**3.921x**_ |
| 10K | kntrie | 0.085 | 1.086 | 100.1 | 10.3 | 0.206 | 0.399 | 0.087 | 106.4 | 10.9 |
|  | map | 0.967 | 1.435 | 703.1 | 72.0 | 0.702 | 0.703 | 0.969 | 703.1 | 72.0 |
| | _map vs_ | _**11.372x**_ | _**1.322x**_ | _**7.022x**_ | _**7.022x**_ | _**3.416x**_ | _**1.763x**_ | _**11.115x**_ | _**6.609x**_ | _**6.609x**_ |
|  | umap | 0.031 | 0.174 | 705.3 | 72.2 | 0.056 | 0.122 | 0.091 | 705.3 | 72.2 |
| | _umap vs_ | _0.361x_ | _0.160x_ | _**7.044x**_ | _**7.044x**_ | _0.272x_ | _0.306x_ | _**1.046x**_ | _**6.629x**_ | _**6.629x**_ |
| 100K | kntrie | 1.049 | 5.826 | 982.3 | 10.1 | 2.318 | 3.777 | 1.394 | 1006.1 | 10.3 |
|  | map | 33.886 | 28.500 | 7031.2 | 72.0 | 16.296 | 17.259 | 34.133 | 7031.2 | 72.0 |
| | _map vs_ | _**32.295x**_ | _**4.892x**_ | _**7.158x**_ | _**7.158x**_ | _**7.030x**_ | _**4.570x**_ | _**24.489x**_ | _**6.989x**_ | _**6.989x**_ |
|  | umap | 1.395 | 2.414 | 7092.9 | 72.6 | 1.405 | 2.794 | 2.309 | 7092.9 | 72.6 |
| | _umap vs_ | _**1.330x**_ | _0.414x_ | _**7.221x**_ | _**7.221x**_ | _0.606x_ | _0.740x_ | _**1.656x**_ | _**7.050x**_ | _**7.050x**_ |
| 1M | kntrie | 28.711 | 96.152 | 9805.9 | 10.0 | 58.092 | 66.484 | 27.568 | 9828.8 | 10.1 |
|  | map | 827.726 | 681.288 | 70312.5 | 72.0 | 459.426 | 460.836 | 921.582 | 70312.5 | 72.0 |
| | _map vs_ | _**28.830x**_ | _**7.086x**_ | _**7.170x**_ | _**7.170x**_ | _**7.909x**_ | _**6.932x**_ | _**33.429x**_ | _**7.154x**_ | _**7.154x**_ |
|  | umap | 20.528 | 44.553 | 70752.5 | 72.5 | 17.981 | 44.819 | 33.383 | 70752.5 | 72.5 |
| | _umap vs_ | _0.715x_ | _0.463x_ | _**7.215x**_ | _**7.215x**_ | _0.310x_ | _0.674x_ | _**1.211x**_ | _**7.198x**_ | _**7.198x**_ |

## uint64_t — dense16

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 787 | kntrie | 0.009 | 0.130 | 16.0 | 20.8 | 0.027 | 0.041 | 0.009 | 17.2 | 22.4 |
|  | map | 0.014 | 0.085 | 55.3 | 72.0 | 0.043 | 0.037 | 0.014 | 55.3 | 71.9 |
| | _map vs_ | _**1.612x**_ | _0.652x_ | _**3.458x**_ | _**3.458x**_ | _**1.593x**_ | _0.890x_ | _**1.564x**_ | _**3.215x**_ | _**3.215x**_ |
|  | umap | 0.003 | 0.022 | 55.6 | 72.4 | 0.008 | 0.010 | 0.004 | 55.6 | 72.3 |
| | _umap vs_ | _0.375x_ | _0.173x_ | _**3.476x**_ | _**3.476x**_ | _0.311x_ | _0.235x_ | _0.416x_ | _**3.232x**_ | _**3.232x**_ |
| 7.9K | kntrie | 0.073 | 0.804 | 72.8 | 9.4 | 0.136 | 0.379 | 0.100 | 94.3 | 12.2 |
|  | map | 0.732 | 1.148 | 558.6 | 72.0 | 0.573 | 0.531 | 0.732 | 558.6 | 72.0 |
| | _map vs_ | _**10.001x**_ | _**1.428x**_ | _**7.669x**_ | _**7.669x**_ | _**4.225x**_ | _**1.402x**_ | _**7.297x**_ | _**5.923x**_ | _**5.923x**_ |
|  | umap | 0.069 | 0.200 | 560.0 | 72.2 | 0.102 | 0.108 | 0.099 | 560.0 | 72.2 |
| | _umap vs_ | _0.948x_ | _0.249x_ | _**7.688x**_ | _**7.688x**_ | _0.752x_ | _0.284x_ | _0.990x_ | _**5.938x**_ | _**5.938x**_ |
| 78.7K | kntrie | 1.578 | 5.643 | 705.9 | 9.2 | 2.116 | 3.130 | 1.969 | 898.8 | 11.7 |
|  | map | 21.378 | 20.275 | 5530.3 | 72.0 | 12.103 | 12.680 | 20.984 | 5530.3 | 72.0 |
| | _map vs_ | _**13.547x**_ | _**3.593x**_ | _**7.835x**_ | _**7.835x**_ | _**5.719x**_ | _**4.051x**_ | _**10.657x**_ | _**6.153x**_ | _**6.153x**_ |
|  | umap | 1.585 | 2.867 | 5531.3 | 72.0 | 1.658 | 2.060 | 2.609 | 5531.3 | 72.0 |
| | _umap vs_ | _1.004x_ | _0.508x_ | _**7.836x**_ | _**7.836x**_ | _0.783x_ | _0.658x_ | _**1.325x**_ | _**6.154x**_ | _**6.154x**_ |
| 787.1K | kntrie | 43.791 | 95.741 | 7053.2 | 9.2 | 43.859 | 62.788 | 53.875 | 8879.7 | 11.6 |
|  | map | 570.202 | 517.846 | 55341.8 | 72.0 | 292.365 | 326.930 | 622.325 | 55341.8 | 72.0 |
| | _map vs_ | _**13.021x**_ | _**5.409x**_ | _**7.846x**_ | _**7.846x**_ | _**6.666x**_ | _**5.207x**_ | _**11.551x**_ | _**6.232x**_ | _**6.232x**_ |
|  | umap | 20.265 | 50.503 | 55709.8 | 72.5 | 27.674 | 33.888 | 33.039 | 55709.8 | 72.5 |
| | _umap vs_ | _0.463x_ | _0.527x_ | _**7.899x**_ | _**7.899x**_ | _0.631x_ | _0.540x_ | _0.613x_ | _**6.274x**_ | _**6.274x**_ |

## int32_t — dense16

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 787 | kntrie | 0.007 | 0.090 | 12.0 | 15.6 | 0.022 | 0.031 | 0.007 | 14.1 | 18.3 |
|  | map | 0.018 | 0.078 | 55.3 | 72.0 | 0.041 | 0.035 | 0.012 | 55.3 | 71.9 |
| | _map vs_ | _**2.478x**_ | _0.869x_ | _**4.611x**_ | _**4.611x**_ | _**1.922x**_ | _**1.146x**_ | _**1.662x**_ | _**3.926x**_ | _**3.926x**_ |
|  | umap | 0.003 | 0.021 | 55.6 | 72.4 | 0.008 | 0.008 | 0.003 | 55.6 | 72.3 |
| | _umap vs_ | _0.427x_ | _0.233x_ | _**4.635x**_ | _**4.635x**_ | _0.386x_ | _0.271x_ | _0.451x_ | _**3.946x**_ | _**3.946x**_ |
| 7.9K | kntrie | 0.061 | 0.773 | 73.1 | 9.4 | 0.119 | 0.269 | 0.057 | 88.4 | 11.4 |
|  | map | 0.656 | 0.983 | 558.6 | 72.0 | 0.499 | 0.484 | 0.655 | 558.6 | 72.0 |
| | _map vs_ | _**10.734x**_ | _**1.271x**_ | _**7.639x**_ | _**7.639x**_ | _**4.186x**_ | _**1.798x**_ | _**11.420x**_ | _**6.317x**_ | _**6.317x**_ |
|  | umap | 0.062 | 0.190 | 560.0 | 72.2 | 0.086 | 0.106 | 0.085 | 560.0 | 72.2 |
| | _umap vs_ | _**1.013x**_ | _0.246x_ | _**7.658x**_ | _**7.658x**_ | _0.726x_ | _0.395x_ | _**1.483x**_ | _**6.332x**_ | _**6.332x**_ |
| 78.7K | kntrie | 0.765 | 4.005 | 706.4 | 9.2 | 1.376 | 2.577 | 1.059 | 818.1 | 10.7 |
|  | map | 19.935 | 17.945 | 5530.3 | 72.0 | 10.485 | 10.727 | 19.288 | 5530.3 | 72.0 |
| | _map vs_ | _**26.057x**_ | _**4.480x**_ | _**7.829x**_ | _**7.829x**_ | _**7.617x**_ | _**4.163x**_ | _**18.217x**_ | _**6.760x**_ | _**6.760x**_ |
|  | umap | 1.356 | 2.787 | 5531.3 | 72.0 | 2.350 | 2.954 | 2.631 | 5531.3 | 72.0 |
| | _umap vs_ | _**1.773x**_ | _0.696x_ | _**7.830x**_ | _**7.830x**_ | _**1.707x**_ | _**1.147x**_ | _**2.485x**_ | _**6.761x**_ | _**6.761x**_ |
| 787.1K | kntrie | 24.591 | 66.198 | 7050.8 | 9.2 | 31.318 | 44.905 | 22.003 | 8161.0 | 10.6 |
|  | map | 624.551 | 506.253 | 55341.8 | 72.0 | 343.181 | 358.707 | 664.821 | 55341.8 | 72.0 |
| | _map vs_ | _**25.398x**_ | _**7.648x**_ | _**7.849x**_ | _**7.849x**_ | _**10.958x**_ | _**7.988x**_ | _**30.215x**_ | _**6.781x**_ | _**6.781x**_ |
|  | umap | 23.392 | 62.015 | 55709.8 | 72.5 | 30.656 | 41.367 | 42.212 | 55709.8 | 72.5 |
| | _umap vs_ | _0.951x_ | _0.937x_ | _**7.901x**_ | _**7.901x**_ | _0.979x_ | _0.921x_ | _**1.918x**_ | _**6.826x**_ | _**6.826x**_ |

