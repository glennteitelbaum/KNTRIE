# kntrie3 Benchmark Results

Compiler: `g++ -std=c++23 -O2 -march=x86-64-v3`

Workload: insert N, find N (all hit), erase N/2, churn N/4 old + N/4 new, find N (25% miss)

- N = number of entries
- F = Find all N keys in ms (all hits)
- I = Insert N keys in ms
- M = Memory after insert in KB
- B = Bytes per entry after insert
- E = Erase N/2 keys in ms
- C2 = Churn insert N/4 old + N/4 new in ms
- F2 = Find all N original keys in ms (25% misses)
- M2 = Memory after churn in KB
- B2 = Bytes per entry after churn

In _vs_ rows, >1x means kntrie is better. **Bold** = kntrie wins.

## uint64_t — random

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.005 | 0.106 | 21.7 | 22.2 | 0.027 | 0.051 | 0.005 | 22.0 | 22.6 |
|  | map | 0.039 | 0.105 | 70.3 | 72.0 | 0.061 | 0.050 | 0.035 | 70.3 | 72.0 |
| | _map vs_ | _**8.215x**_ | _0.987x_ | _**3.237x**_ | _**3.237x**_ | _**2.273x**_ | _0.989x_ | _**6.803x**_ | _**3.189x**_ | _**3.189x**_ |
|  | umap | 0.005 | 0.032 | 70.6 | 72.2 | 0.014 | 0.015 | 0.005 | 70.6 | 72.2 |
| | _umap vs_ | _**1.032x**_ | _0.300x_ | _**3.249x**_ | _**3.249x**_ | _0.502x_ | _0.292x_ | _**1.006x**_ | _**3.200x**_ | _**3.200x**_ |
| 10K | kntrie | 0.264 | 1.152 | 175.7 | 18.0 | 0.301 | 0.483 | 0.290 | 174.9 | 17.9 |
|  | map | 0.961 | 1.397 | 703.1 | 72.0 | 0.737 | 0.747 | 1.044 | 703.1 | 72.0 |
| | _map vs_ | _**3.643x**_ | _**1.213x**_ | _**4.002x**_ | _**4.002x**_ | _**2.450x**_ | _**1.548x**_ | _**3.605x**_ | _**4.019x**_ | _**4.019x**_ |
|  | umap | 0.104 | 0.390 | 705.3 | 72.2 | 0.147 | 0.146 | 0.183 | 705.3 | 72.2 |
| | _umap vs_ | _0.393x_ | _0.339x_ | _**4.014x**_ | _**4.014x**_ | _0.490x_ | _0.303x_ | _0.632x_ | _**4.031x**_ | _**4.031x**_ |
| 100K | kntrie | 4.370 | 13.962 | 1701.0 | 17.4 | 3.123 | 5.086 | 4.556 | 1703.0 | 17.4 |
|  | map | 32.046 | 46.445 | 7031.2 | 72.0 | 17.790 | 17.495 | 34.261 | 7031.2 | 72.0 |
| | _map vs_ | _**7.333x**_ | _**3.326x**_ | _**4.134x**_ | _**4.134x**_ | _**5.697x**_ | _**3.440x**_ | _**7.520x**_ | _**4.129x**_ | _**4.129x**_ |
|  | umap | 2.496 | 5.024 | 7092.9 | 72.6 | 2.743 | 3.119 | 4.186 | 7092.9 | 72.6 |
| | _umap vs_ | _0.571x_ | _0.360x_ | _**4.170x**_ | _**4.170x**_ | _0.878x_ | _0.613x_ | _0.919x_ | _**4.165x**_ | _**4.165x**_ |
| 1M | kntrie | 135.671 | 230.963 | 16386.0 | 16.8 | 73.683 | 142.858 | 131.516 | 16386.0 | 16.8 |
|  | map | 839.637 | 775.748 | 70312.5 | 72.0 | 433.061 | 493.261 | 895.473 | 70312.5 | 72.0 |
| | _map vs_ | _**6.189x**_ | _**3.359x**_ | _**4.291x**_ | _**4.291x**_ | _**5.877x**_ | _**3.453x**_ | _**6.809x**_ | _**4.291x**_ | _**4.291x**_ |
|  | umap | 38.270 | 97.142 | 70752.5 | 72.5 | 44.285 | 57.739 | 64.390 | 70752.5 | 72.5 |
| | _umap vs_ | _0.282x_ | _0.421x_ | _**4.318x**_ | _**4.318x**_ | _0.601x_ | _0.404x_ | _0.490x_ | _**4.318x**_ | _**4.318x**_ |

## int32_t — random

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.004 | 0.099 | 18.4 | 18.9 | 0.029 | 0.043 | 0.004 | 18.7 | 19.2 |
|  | map | 0.035 | 0.110 | 70.3 | 72.0 | 0.055 | 0.050 | 0.034 | 70.3 | 72.0 |
| | _map vs_ | _**7.813x**_ | _**1.112x**_ | _**3.812x**_ | _**3.812x**_ | _**1.916x**_ | _**1.174x**_ | _**8.128x**_ | _**3.758x**_ | _**3.758x**_ |
|  | umap | 0.005 | 0.033 | 70.6 | 72.2 | 0.014 | 0.015 | 0.005 | 70.6 | 72.2 |
| | _umap vs_ | _**1.041x**_ | _0.334x_ | _**3.825x**_ | _**3.825x**_ | _0.496x_ | _0.352x_ | _**1.284x**_ | _**3.771x**_ | _**3.771x**_ |
| 10K | kntrie | 0.251 | 0.881 | 134.4 | 13.8 | 4.879 | 0.422 | 0.270 | 134.7 | 13.8 |
|  | map | 0.992 | 1.394 | 703.1 | 72.0 | 0.713 | 0.740 | 1.030 | 703.1 | 72.0 |
| | _map vs_ | _**3.946x**_ | _**1.582x**_ | _**5.230x**_ | _**5.230x**_ | _0.146x_ | _**1.753x**_ | _**3.819x**_ | _**5.220x**_ | _**5.220x**_ |
|  | umap | 0.100 | 0.306 | 705.3 | 72.2 | 0.152 | 0.154 | 0.184 | 705.3 | 72.2 |
| | _umap vs_ | _0.396x_ | _0.347x_ | _**5.246x**_ | _**5.246x**_ | _0.031x_ | _0.365x_ | _0.682x_ | _**5.236x**_ | _**5.236x**_ |
| 100.0K | kntrie | 4.301 | 9.365 | 1291.0 | 13.2 | 2.990 | 4.697 | 4.440 | 1291.0 | 13.2 |
|  | map | 32.278 | 27.939 | 7031.0 | 72.0 | 15.476 | 17.809 | 30.974 | 7031.0 | 72.0 |
| | _map vs_ | _**7.505x**_ | _**2.983x**_ | _**5.446x**_ | _**5.446x**_ | _**5.176x**_ | _**3.791x**_ | _**6.976x**_ | _**5.446x**_ | _**5.446x**_ |
|  | umap | 2.403 | 4.972 | 7092.8 | 72.6 | 2.667 | 3.734 | 4.399 | 7092.8 | 72.6 |
| | _umap vs_ | _0.559x_ | _0.531x_ | _**5.494x**_ | _**5.494x**_ | _0.892x_ | _0.795x_ | _0.991x_ | _**5.494x**_ | _**5.494x**_ |
| 999.9K | kntrie | 97.988 | 173.220 | 12298.0 | 12.6 | 59.949 | 101.512 | 104.011 | 12290.0 | 12.6 |
|  | map | 846.465 | 687.475 | 70304.8 | 72.0 | 401.854 | 457.563 | 870.946 | 70304.8 | 72.0 |
| | _map vs_ | _**8.638x**_ | _**3.969x**_ | _**5.717x**_ | _**5.717x**_ | _**6.703x**_ | _**4.507x**_ | _**8.374x**_ | _**5.720x**_ | _**5.720x**_ |
|  | umap | 38.786 | 104.433 | 70745.7 | 72.5 | 47.901 | 56.848 | 66.055 | 70745.6 | 72.5 |
| | _umap vs_ | _0.396x_ | _0.603x_ | _**5.753x**_ | _**5.753x**_ | _0.799x_ | _0.560x_ | _0.635x_ | _**5.756x**_ | _**5.756x**_ |

## uint64_t — sequential

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.013 | 0.125 | 18.0 | 18.4 | 0.030 | 0.047 | 0.013 | 20.4 | 20.9 |
|  | map | 0.039 | 0.109 | 70.3 | 72.0 | 0.056 | 0.050 | 0.029 | 70.3 | 72.0 |
| | _map vs_ | _**3.015x**_ | _0.871x_ | _**3.906x**_ | _**3.906x**_ | _**1.834x**_ | _**1.053x**_ | _**2.127x**_ | _**3.443x**_ | _**3.443x**_ |
|  | umap | 0.003 | 0.023 | 70.6 | 72.2 | 0.006 | 0.012 | 0.004 | 70.6 | 72.2 |
| | _umap vs_ | _0.240x_ | _0.184x_ | _**3.920x**_ | _**3.920x**_ | _0.186x_ | _0.256x_ | _0.296x_ | _**3.455x**_ | _**3.455x**_ |
| 10K | kntrie | 0.093 | 1.045 | 100.1 | 10.3 | 0.221 | 0.407 | 0.122 | 114.0 | 11.7 |
|  | map | 0.941 | 1.350 | 703.1 | 72.0 | 0.677 | 0.681 | 0.933 | 703.1 | 72.0 |
| | _map vs_ | _**10.086x**_ | _**1.292x**_ | _**7.022x**_ | _**7.022x**_ | _**3.068x**_ | _**1.673x**_ | _**7.626x**_ | _**6.169x**_ | _**6.169x**_ |
|  | umap | 0.029 | 0.160 | 705.3 | 72.2 | 0.086 | 0.126 | 0.084 | 705.3 | 72.2 |
| | _umap vs_ | _0.314x_ | _0.153x_ | _**7.044x**_ | _**7.044x**_ | _0.390x_ | _0.309x_ | _0.691x_ | _**6.188x**_ | _**6.188x**_ |
| 100K | kntrie | 1.763 | 7.055 | 982.5 | 10.1 | 3.069 | 4.146 | 3.488 | 1094.0 | 11.2 |
|  | map | 33.353 | 29.894 | 7031.2 | 72.0 | 17.107 | 17.931 | 31.295 | 7031.2 | 72.0 |
| | _map vs_ | _**18.915x**_ | _**4.237x**_ | _**7.157x**_ | _**7.157x**_ | _**5.575x**_ | _**4.325x**_ | _**8.971x**_ | _**6.427x**_ | _**6.427x**_ |
|  | umap | 1.257 | 2.205 | 7092.9 | 72.6 | 0.910 | 2.586 | 2.075 | 7092.9 | 72.6 |
| | _umap vs_ | _0.713x_ | _0.312x_ | _**7.219x**_ | _**7.219x**_ | _0.297x_ | _0.624x_ | _0.595x_ | _**6.483x**_ | _**6.483x**_ |
| 1M | kntrie | 52.826 | 117.866 | 9806.1 | 10.0 | 71.707 | 101.848 | 59.065 | 10841.3 | 11.1 |
|  | map | 807.817 | 709.402 | 70312.5 | 72.0 | 402.959 | 474.794 | 846.055 | 70312.5 | 72.0 |
| | _map vs_ | _**15.292x**_ | _**6.019x**_ | _**7.170x**_ | _**7.170x**_ | _**5.619x**_ | _**4.662x**_ | _**14.324x**_ | _**6.486x**_ | _**6.486x**_ |
|  | umap | 20.070 | 44.919 | 70752.5 | 72.5 | 17.272 | 42.070 | 30.354 | 70752.5 | 72.5 |
| | _umap vs_ | _0.380x_ | _0.381x_ | _**7.215x**_ | _**7.215x**_ | _0.241x_ | _0.413x_ | _0.514x_ | _**6.526x**_ | _**6.526x**_ |

## int32_t — sequential

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 1K | kntrie | 0.011 | 0.137 | 14.0 | 14.3 | 0.032 | 0.057 | 0.010 | 18.0 | 18.4 |
|  | map | 0.035 | 0.112 | 70.3 | 72.0 | 0.059 | 0.052 | 0.031 | 70.3 | 72.0 |
| | _map vs_ | _**3.118x**_ | _0.818x_ | _**5.022x**_ | _**5.022x**_ | _**1.869x**_ | _0.907x_ | _**3.021x**_ | _**3.908x**_ | _**3.908x**_ |
|  | umap | 0.003 | 0.023 | 70.6 | 72.2 | 0.005 | 0.012 | 0.004 | 70.6 | 72.2 |
| | _umap vs_ | _0.274x_ | _0.165x_ | _**5.040x**_ | _**5.040x**_ | _0.171x_ | _0.207x_ | _0.372x_ | _**3.921x**_ | _**3.921x**_ |
| 10K | kntrie | 0.084 | 1.050 | 100.1 | 10.3 | 0.218 | 0.490 | 0.082 | 106.4 | 10.9 |
|  | map | 1.000 | 1.382 | 703.1 | 72.0 | 0.748 | 0.721 | 1.007 | 703.1 | 72.0 |
| | _map vs_ | _**11.896x**_ | _**1.316x**_ | _**7.022x**_ | _**7.022x**_ | _**3.432x**_ | _**1.471x**_ | _**12.348x**_ | _**6.609x**_ | _**6.609x**_ |
|  | umap | 0.031 | 0.180 | 705.3 | 72.2 | 0.056 | 0.121 | 0.079 | 705.3 | 72.2 |
| | _umap vs_ | _0.369x_ | _0.171x_ | _**7.044x**_ | _**7.044x**_ | _0.257x_ | _0.246x_ | _0.968x_ | _**6.629x**_ | _**6.629x**_ |
| 100K | kntrie | 1.025 | 5.528 | 982.3 | 10.1 | 2.524 | 3.718 | 1.496 | 1006.1 | 10.3 |
|  | map | 34.719 | 29.467 | 7031.2 | 72.0 | 19.898 | 20.424 | 32.894 | 7031.2 | 72.0 |
| | _map vs_ | _**33.857x**_ | _**5.330x**_ | _**7.158x**_ | _**7.158x**_ | _**7.884x**_ | _**5.493x**_ | _**21.987x**_ | _**6.989x**_ | _**6.989x**_ |
|  | umap | 1.260 | 2.357 | 7092.9 | 72.6 | 0.913 | 2.714 | 2.148 | 7092.9 | 72.6 |
| | _umap vs_ | _**1.229x**_ | _0.426x_ | _**7.221x**_ | _**7.221x**_ | _0.362x_ | _0.730x_ | _**1.436x**_ | _**7.050x**_ | _**7.050x**_ |
| 1M | kntrie | 30.893 | 99.228 | 9805.9 | 10.0 | 61.621 | 68.899 | 27.464 | 9828.8 | 10.1 |
|  | map | 765.905 | 684.174 | 70312.5 | 72.0 | 405.121 | 442.162 | 882.589 | 70312.5 | 72.0 |
| | _map vs_ | _**24.792x**_ | _**6.895x**_ | _**7.170x**_ | _**7.170x**_ | _**6.574x**_ | _**6.418x**_ | _**32.136x**_ | _**7.154x**_ | _**7.154x**_ |
|  | umap | 22.005 | 40.624 | 70752.5 | 72.5 | 19.313 | 47.228 | 33.162 | 70752.5 | 72.5 |
| | _umap vs_ | _0.712x_ | _0.409x_ | _**7.215x**_ | _**7.215x**_ | _0.313x_ | _0.685x_ | _**1.207x**_ | _**7.198x**_ | _**7.198x**_ |

## uint64_t — dense16

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 787 | kntrie | 0.013 | 0.098 | 16.0 | 20.8 | 0.029 | 0.047 | 0.010 | 17.2 | 22.4 |
|  | map | 0.018 | 0.084 | 55.3 | 72.0 | 0.049 | 0.044 | 0.010 | 55.3 | 71.9 |
| | _map vs_ | _**1.396x**_ | _0.862x_ | _**3.458x**_ | _**3.458x**_ | _**1.680x**_ | _0.942x_ | _**1.040x**_ | _**3.215x**_ | _**3.215x**_ |
|  | umap | 0.003 | 0.023 | 55.6 | 72.4 | 0.012 | 0.013 | 0.003 | 55.6 | 72.3 |
| | _umap vs_ | _0.260x_ | _0.233x_ | _**3.476x**_ | _**3.476x**_ | _0.411x_ | _0.268x_ | _0.345x_ | _**3.232x**_ | _**3.232x**_ |
| 7.9K | kntrie | 0.066 | 0.729 | 72.8 | 9.4 | 0.133 | 0.283 | 0.079 | 94.3 | 12.2 |
|  | map | 0.658 | 0.954 | 558.6 | 72.0 | 0.552 | 0.534 | 0.725 | 558.6 | 72.0 |
| | _map vs_ | _**9.997x**_ | _**1.309x**_ | _**7.669x**_ | _**7.669x**_ | _**4.165x**_ | _**1.890x**_ | _**9.155x**_ | _**5.923x**_ | _**5.923x**_ |
|  | umap | 0.068 | 0.197 | 560.0 | 72.2 | 0.093 | 0.109 | 0.093 | 560.0 | 72.2 |
| | _umap vs_ | _**1.038x**_ | _0.271x_ | _**7.688x**_ | _**7.688x**_ | _0.698x_ | _0.385x_ | _**1.181x**_ | _**5.938x**_ | _**5.938x**_ |
| 78.7K | kntrie | 1.525 | 5.697 | 705.9 | 9.2 | 2.145 | 3.130 | 1.927 | 898.8 | 11.7 |
|  | map | 22.016 | 19.902 | 5530.3 | 72.0 | 12.206 | 12.329 | 22.025 | 5530.3 | 72.0 |
| | _map vs_ | _**14.438x**_ | _**3.493x**_ | _**7.835x**_ | _**7.835x**_ | _**5.691x**_ | _**3.939x**_ | _**11.432x**_ | _**6.153x**_ | _**6.153x**_ |
|  | umap | 1.738 | 3.323 | 5531.3 | 72.0 | 1.664 | 2.275 | 2.628 | 5531.3 | 72.0 |
| | _umap vs_ | _**1.140x**_ | _0.583x_ | _**7.836x**_ | _**7.836x**_ | _0.776x_ | _0.727x_ | _**1.364x**_ | _**6.154x**_ | _**6.154x**_ |
| 787.1K | kntrie | 47.738 | 115.356 | 7053.2 | 9.2 | 44.458 | 65.611 | 50.653 | 8879.7 | 11.6 |
|  | map | 580.389 | 510.189 | 55341.8 | 72.0 | 290.737 | 314.009 | 649.781 | 55341.8 | 72.0 |
| | _map vs_ | _**12.158x**_ | _**4.423x**_ | _**7.846x**_ | _**7.846x**_ | _**6.540x**_ | _**4.786x**_ | _**12.828x**_ | _**6.232x**_ | _**6.232x**_ |
|  | umap | 25.184 | 62.780 | 55709.8 | 72.5 | 31.090 | 41.770 | 39.012 | 55709.8 | 72.5 |
| | _umap vs_ | _0.528x_ | _0.544x_ | _**7.899x**_ | _**7.899x**_ | _0.699x_ | _0.637x_ | _0.770x_ | _**6.274x**_ | _**6.274x**_ |

## int32_t — dense16

| N | | F | I | M | B | E | C2 | F2 | M2 | B2 |
|---|-|---|---|---|---|---|----|----|----|----|
| 787 | kntrie | 0.009 | 0.121 | 12.0 | 15.6 | 0.028 | 0.040 | 0.008 | 14.1 | 18.3 |
|  | map | 0.017 | 0.103 | 55.3 | 72.0 | 0.042 | 0.040 | 0.012 | 55.3 | 71.9 |
| | _map vs_ | _**1.864x**_ | _0.847x_ | _**4.611x**_ | _**4.611x**_ | _**1.485x**_ | _0.995x_ | _**1.426x**_ | _**3.926x**_ | _**3.926x**_ |
|  | umap | 0.004 | 0.033 | 55.6 | 72.4 | 0.010 | 0.011 | 0.004 | 55.6 | 72.3 |
| | _umap vs_ | _0.406x_ | _0.271x_ | _**4.635x**_ | _**4.635x**_ | _0.362x_ | _0.277x_ | _0.430x_ | _**3.946x**_ | _**3.946x**_ |
| 7.9K | kntrie | 0.068 | 0.992 | 73.1 | 9.4 | 0.163 | 0.328 | 0.068 | 88.4 | 11.4 |
|  | map | 0.765 | 1.071 | 558.6 | 72.0 | 0.573 | 0.543 | 0.762 | 558.6 | 72.0 |
| | _map vs_ | _**11.169x**_ | _**1.079x**_ | _**7.639x**_ | _**7.639x**_ | _**3.506x**_ | _**1.657x**_ | _**11.259x**_ | _**6.317x**_ | _**6.317x**_ |
|  | umap | 0.063 | 0.225 | 560.0 | 72.2 | 0.103 | 0.108 | 0.092 | 560.0 | 72.2 |
| | _umap vs_ | _0.928x_ | _0.227x_ | _**7.658x**_ | _**7.658x**_ | _0.627x_ | _0.330x_ | _**1.354x**_ | _**6.332x**_ | _**6.332x**_ |
| 78.7K | kntrie | 0.942 | 5.154 | 706.4 | 9.2 | 1.574 | 2.777 | 1.244 | 818.1 | 10.7 |
|  | map | 24.980 | 19.964 | 5530.3 | 72.0 | 16.099 | 16.351 | 22.847 | 5530.3 | 72.0 |
| | _map vs_ | _**26.529x**_ | _**3.873x**_ | _**7.829x**_ | _**7.829x**_ | _**10.227x**_ | _**5.887x**_ | _**18.364x**_ | _**6.760x**_ | _**6.760x**_ |
|  | umap | 1.577 | 2.997 | 5531.3 | 72.0 | 1.874 | 2.371 | 2.735 | 5531.3 | 72.0 |
| | _umap vs_ | _**1.675x**_ | _0.582x_ | _**7.830x**_ | _**7.830x**_ | _**1.190x**_ | _0.854x_ | _**2.198x**_ | _**6.761x**_ | _**6.761x**_ |
| 787.1K | kntrie | 28.263 | 72.629 | 7050.8 | 9.2 | 35.693 | 48.384 | 25.725 | 8161.0 | 10.6 |
|  | map | 586.273 | 519.002 | 55341.8 | 72.0 | 284.788 | 342.509 | 618.353 | 55341.8 | 72.0 |
| | _map vs_ | _**20.743x**_ | _**7.146x**_ | _**7.849x**_ | _**7.849x**_ | _**7.979x**_ | _**7.079x**_ | _**24.037x**_ | _**6.781x**_ | _**6.781x**_ |
|  | umap | 24.170 | 60.289 | 55709.8 | 72.5 | 30.282 | 40.686 | 39.504 | 55709.8 | 72.5 |
| | _umap vs_ | _0.855x_ | _0.830x_ | _**7.901x**_ | _**7.901x**_ | _0.848x_ | _0.841x_ | _**1.536x**_ | _**6.826x**_ | _**6.826x**_ |

